import{b as it,g as lo,a as ic,c as ft,e as Ot,r as Af,_ as gi,P as Nf}from"./index-92b19661.js";var fo={},Te={};Object.defineProperty(Te,"__esModule",{value:!0});Te.getLocalStorage=Te.getLocalStorageOrThrow=Te.getCrypto=Te.getCryptoOrThrow=Te.getLocation=Te.getLocationOrThrow=Te.getNavigator=Te.getNavigatorOrThrow=Te.getDocument=Te.getDocumentOrThrow=Te.getFromWindowOrThrow=Te.getFromWindow=void 0;function pr(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Te.getFromWindow=pr;function Lr(t){const e=pr(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Te.getFromWindowOrThrow=Lr;function Rf(){return Lr("document")}Te.getDocumentOrThrow=Rf;function Pf(){return pr("document")}Te.getDocument=Pf;function Lf(){return Lr("navigator")}Te.getNavigatorOrThrow=Lf;function Ff(){return pr("navigator")}Te.getNavigator=Ff;function Mf(){return Lr("location")}Te.getLocationOrThrow=Mf;function Uf(){return pr("location")}Te.getLocation=Uf;function $f(){return Lr("crypto")}Te.getCryptoOrThrow=$f;function Bf(){return pr("crypto")}Te.getCrypto=Bf;function kf(){return Lr("localStorage")}Te.getLocalStorageOrThrow=kf;function zf(){return pr("localStorage")}Te.getLocalStorage=zf;Object.defineProperty(fo,"__esModule",{value:!0});var oc=fo.getWindowMetadata=void 0;const cs=Te;function jf(){let t,e;try{t=cs.getDocumentOrThrow(),e=cs.getLocationOrThrow()}catch{return null}function r(){const _=t.getElementsByTagName("link"),O=[];for(let v=0;v<_.length;v++){const m=_[v],I=m.getAttribute("rel");if(I&&I.toLowerCase().indexOf("icon")>-1){const x=m.getAttribute("href");if(x)if(x.toLowerCase().indexOf("https:")===-1&&x.toLowerCase().indexOf("http:")===-1&&x.indexOf("//")!==0){let R=e.protocol+"//"+e.host;if(x.indexOf("/")===0)R+=x;else{const p=e.pathname.split("/");p.pop();const w=p.join("/");R+=w+"/"+x}O.push(R)}else if(x.indexOf("//")===0){const R=e.protocol+x;O.push(R)}else O.push(x)}}return O}function n(..._){const O=t.getElementsByTagName("meta");for(let v=0;v<O.length;v++){const m=O[v],I=["itemprop","property","name"].map(x=>m.getAttribute(x)).filter(x=>x?_.includes(x):!1);if(I.length&&I){const x=m.getAttribute("content");if(x)return x}}return""}function i(){let _=n("name","og:site_name","og:title","twitter:title");return _||(_=t.title),_}function o(){return n("description","og:description","twitter:description","keywords")}const c=i(),s=o(),u=e.origin,h=r();return{description:s,url:u,icons:h,name:c}}oc=fo.getWindowMetadata=jf;var Ne={};Object.defineProperty(Ne,"__esModule",{value:!0});var sc=Ne.getLocalStorage=yc=Ne.getLocalStorageOrThrow=_c=Ne.getCrypto=pc=Ne.getCryptoOrThrow=gc=Ne.getLocation=dc=Ne.getLocationOrThrow=hc=Ne.getNavigator=fc=Ne.getNavigatorOrThrow=lc=Ne.getDocument=uc=Ne.getDocumentOrThrow=cc=Ne.getFromWindowOrThrow=ac=Ne.getFromWindow=void 0;function _r(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}var ac=Ne.getFromWindow=_r;function Fr(t){const e=_r(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}var cc=Ne.getFromWindowOrThrow=Fr;function qf(){return Fr("document")}var uc=Ne.getDocumentOrThrow=qf;function Hf(){return _r("document")}var lc=Ne.getDocument=Hf;function Kf(){return Fr("navigator")}var fc=Ne.getNavigatorOrThrow=Kf;function Vf(){return _r("navigator")}var hc=Ne.getNavigator=Vf;function Wf(){return Fr("location")}var dc=Ne.getLocationOrThrow=Wf;function Gf(){return _r("location")}var gc=Ne.getLocation=Gf;function Yf(){return Fr("crypto")}var pc=Ne.getCryptoOrThrow=Yf;function Jf(){return _r("crypto")}var _c=Ne.getCrypto=Jf;function Xf(){return Fr("localStorage")}var yc=Ne.getLocalStorageOrThrow=Xf;function Qf(){return _r("localStorage")}sc=Ne.getLocalStorage=Qf;var Zf=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var o=arguments[e],c=0,s=o.length;c<s;c++,i++)n[i]=o[c];return n},eh=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),th=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=it.platform}return t}(),rh=function(){function t(e,r,n,i){this.name=e,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return t}(),nh=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),ih=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),oh=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,sh=/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,us=3,ah=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",oh]],ls=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function ch(t){return t?fs(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new ih:typeof navigator<"u"?fs(navigator.userAgent):fh()}function uh(t){return t!==""&&ah.reduce(function(e,r){var n=r[0],i=r[1];if(e)return e;var o=i.exec(t);return!!o&&[n,o]},!1)}function fs(t){var e=uh(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new nh;var i=n[1]&&n[1].split(/[._]/).slice(0,3);i?i.length<us&&(i=Zf(i,hh(us-i.length))):i=[];var o=i.join("."),c=lh(t),s=sh.exec(t);return s&&s[1]?new rh(r,o,c,s[1]):new eh(r,o,c)}function lh(t){for(var e=0,r=ls.length;e<r;e++){var n=ls[e],i=n[0],o=n[1],c=o.exec(t);if(c)return i}return null}function fh(){var t=typeof it<"u"&&it.version;return t?new th(it.version.slice(1)):null}function hh(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}function ho(t){return ch(t)}function Vn(){const t=ho();return t&&t.os?t.os:void 0}function mc(){const t=Vn();return t?t.toLowerCase().includes("android"):!1}function vc(){const t=Vn();return t?t.toLowerCase().includes("ios")||t.toLowerCase().includes("mac")&&navigator.maxTouchPoints>1:!1}function dh(){return Vn()?mc()||vc():!1}function wc(){const t=ho();return t&&t.name?t.name.toLowerCase()==="node":!1}function gh(){return!wc()&&!!bc()}const ph=ac,_h=cc,yh=uc,mh=lc,vh=fc,bc=hc,wh=dc,bh=gc,Eh=pc,Dh=_c,Sh=yc,Wn=sc;function xh(){return oc()}function Ch(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return JSON.parse(t)}catch{return t}}function Oh(t){return typeof t=="string"?t:JSON.stringify(t)}const Ec=Ch,Dc=Oh;function Sc(t,e){const r=Dc(e),n=Wn();n&&n.setItem(t,r)}function Th(t){let e=null,r=null;const n=Wn();return n&&(r=n.getItem(t)),e=r&&Ec(r),e}function Ih(t){const e=Wn();e&&e.removeItem(t)}const xc="WALLETCONNECT_DEEPLINK_CHOICE";function Ah(t,e){const r=encodeURIComponent(t);return e.universalLink?`${e.universalLink}/wc?uri=${r}`:e.deepLink?`${e.deepLink}${e.deepLink.endsWith(":")?"//":"/"}wc?uri=${r}`:""}function Nh(t){const e=t.href.split("?")[0];Sc(xc,Object.assign(Object.assign({},t),{href:e}))}function Cc(t,e){return t.filter(r=>r.name.toLowerCase().includes(e.toLowerCase()))[0]}function Rh(t,e){let r=t;return e&&(r=e.map(n=>Cc(t,n)).filter(Boolean)),r}const Oc="https://registry.walletconnect.com";function Ph(){return Oc+"/api/v2/wallets"}function Lh(){return Oc+"/api/v2/dapps"}function Tc(t,e="mobile"){var r;return{name:t.name||"",shortName:t.metadata.shortName||"",color:t.metadata.colors.primary||"",logo:(r=t.image_url.sm)!==null&&r!==void 0?r:"",universalLink:t[e].universal||"",deepLink:t[e].native||""}}function Fh(t,e="mobile"){return Object.values(t).filter(r=>!!r[e].universal||!!r[e].native).map(r=>Tc(r,e))}const Mh=Object.freeze(Object.defineProperty({__proto__:null,detectEnv:ho,detectOS:Vn,formatIOSMobile:Ah,formatMobileRegistry:Fh,formatMobileRegistryEntry:Tc,getClientMeta:xh,getCrypto:Dh,getCryptoOrThrow:Eh,getDappRegistryUrl:Lh,getDocument:mh,getDocumentOrThrow:yh,getFromWindow:ph,getFromWindowOrThrow:_h,getLocal:Th,getLocalStorage:Wn,getLocalStorageOrThrow:Sh,getLocation:bh,getLocationOrThrow:wh,getMobileLinkRegistry:Rh,getMobileRegistryEntry:Cc,getNavigator:bc,getNavigatorOrThrow:vh,getWalletRegistryUrl:Ph,isAndroid:mc,isBrowser:gh,isIOS:vc,isMobile:dh,isNode:wc,mobileLinkChoiceKey:xc,removeLocal:Ih,safeJsonParse:Ec,safeJsonStringify:Dc,saveMobileLinkInfo:Nh,setLocal:Sc},Symbol.toStringTag,{value:"Module"})),Uh=lo(Mh);var fn={},$h=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},Ic={},tr={},Bh={}.toString,go=Array.isArray||function(t){return Bh.call(t)=="[object Array]"},kh=go;function zh(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},t.foo()===42}catch{return!1}}pe.TYPED_ARRAY_SUPPORT=zh();var hs=pe.TYPED_ARRAY_SUPPORT?2147483647:1073741823;function pe(t,e,r){return!pe.TYPED_ARRAY_SUPPORT&&!(this instanceof pe)?new pe(t,e,r):typeof t=="number"?Ac(this,t):Gh(this,t,e,r)}pe.TYPED_ARRAY_SUPPORT&&(pe.prototype.__proto__=Uint8Array.prototype,pe.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&pe[Symbol.species]===pe&&Object.defineProperty(pe,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}));function po(t){if(t>=hs)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+hs.toString(16)+" bytes");return t|0}function jh(t){return t!==t}function Or(t,e){var r;return pe.TYPED_ARRAY_SUPPORT?(r=new Uint8Array(e),r.__proto__=pe.prototype):(r=t,r===null&&(r=new pe(e)),r.length=e),r}function Ac(t,e){var r=Or(t,e<0?0:po(e)|0);if(!pe.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)r[n]=0;return r}function qh(t,e){var r=Rc(e)|0,n=Or(t,r),i=n.write(e);return i!==r&&(n=n.slice(0,i)),n}function $i(t,e){for(var r=e.length<0?0:po(e.length)|0,n=Or(t,r),i=0;i<r;i+=1)n[i]=e[i]&255;return n}function Hh(t,e,r,n){if(r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");var i;return r===void 0&&n===void 0?i=new Uint8Array(e):n===void 0?i=new Uint8Array(e,r):i=new Uint8Array(e,r,n),pe.TYPED_ARRAY_SUPPORT?i.__proto__=pe.prototype:i=$i(t,i),i}function Kh(t,e){if(pe.isBuffer(e)){var r=po(e.length)|0,n=Or(t,r);return n.length===0||e.copy(n,0,0,r),n}if(e){if(typeof ArrayBuffer<"u"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||jh(e.length)?Or(t,0):$i(t,e);if(e.type==="Buffer"&&Array.isArray(e.data))return $i(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function Nc(t,e){e=e||1/0;for(var r,n=t.length,i=null,o=[],c=0;c<n;++c){if(r=t.charCodeAt(c),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(c+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return o}function Rc(t){if(pe.isBuffer(t))return t.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;typeof t!="string"&&(t=""+t);var e=t.length;return e===0?0:Nc(t).length}function Vh(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function Wh(t,e,r,n){return Vh(Nc(e,t.length-r),t,r,n)}function Gh(t,e,r,n){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?Hh(t,e,r,n):typeof e=="string"?qh(t,e):Kh(t,e)}pe.prototype.write=function(e,r,n){r===void 0?(n=this.length,r=0):n===void 0&&typeof r=="string"?(n=this.length,r=0):isFinite(r)&&(r=r|0,isFinite(n)?n=n|0:n=void 0);var i=this.length-r;if((n===void 0||n>i)&&(n=i),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");return Wh(this,e,r,n)};pe.prototype.slice=function(e,r){var n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);var i;if(pe.TYPED_ARRAY_SUPPORT)i=this.subarray(e,r),i.__proto__=pe.prototype;else{var o=r-e;i=new pe(o,void 0);for(var c=0;c<o;++c)i[c]=this[c+e]}return i};pe.prototype.copy=function(e,r,n,i){if(n||(n=0),!i&&i!==0&&(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-n&&(i=e.length-r+n);var o=i-n,c;if(this===e&&n<r&&r<i)for(c=o-1;c>=0;--c)e[c+r]=this[c+n];else if(o<1e3||!pe.TYPED_ARRAY_SUPPORT)for(c=0;c<o;++c)e[c+r]=this[c+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),r);return o};pe.prototype.fill=function(e,r,n){if(typeof e=="string"){if(typeof r=="string"?(r=0,n=this.length):typeof n=="string"&&(n=this.length),e.length===1){var i=e.charCodeAt(0);i<256&&(e=i)}}else typeof e=="number"&&(e=e&255);if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);var o;if(typeof e=="number")for(o=r;o<n;++o)this[o]=e;else{var c=pe.isBuffer(e)?e:new pe(e),s=c.length;for(o=0;o<n-r;++o)this[o+r]=c[o%s]}return this};pe.concat=function(e,r){if(!kh(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return Or(null,0);var n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;var i=Ac(null,r),o=0;for(n=0;n<e.length;++n){var c=e[n];if(!pe.isBuffer(c))throw new TypeError('"list" argument must be an Array of Buffers');c.copy(i,o),o+=c.length}return i};pe.byteLength=Rc;pe.prototype._isBuffer=!0;pe.isBuffer=function(e){return!!(e!=null&&e._isBuffer)};tr.alloc=function(t){var e=new pe(t);return e.fill(0),e};tr.from=function(t){return new pe(t)};var bt={},_o,Yh=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];bt.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};bt.getSymbolTotalCodewords=function(e){return Yh[e]};bt.getBCHDigit=function(t){for(var e=0;t!==0;)e++,t>>>=1;return e};bt.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');_o=e};bt.isKanjiModeEnabled=function(){return typeof _o<"u"};bt.toSJIS=function(e){return _o(e)};var Gn={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(r){if(typeof r!="string")throw new Error("Param is not a string");var n=r.toLowerCase();switch(n){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+r)}}t.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},t.from=function(n,i){if(t.isValid(n))return n;try{return e(n)}catch{return i}}})(Gn);function Pc(){this.buffer=[],this.length=0}Pc.prototype={get:function(t){var e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(var r=0;r<e;r++)this.putBit((t>>>e-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var Jh=Pc,ds=tr;function hn(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=ds.alloc(t*t),this.reservedBit=ds.alloc(t*t)}hn.prototype.set=function(t,e,r,n){var i=t*this.size+e;this.data[i]=r,n&&(this.reservedBit[i]=!0)};hn.prototype.get=function(t,e){return this.data[t*this.size+e]};hn.prototype.xor=function(t,e,r){this.data[t*this.size+e]^=r};hn.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var Xh=hn,Lc={};(function(t){var e=bt.getSymbolSize;t.getRowColCoords=function(n){if(n===1)return[];for(var i=Math.floor(n/7)+2,o=e(n),c=o===145?26:Math.ceil((o-13)/(2*i-2))*2,s=[o-7],u=1;u<i-1;u++)s[u]=s[u-1]-c;return s.push(6),s.reverse()},t.getPositions=function(n){for(var i=[],o=t.getRowColCoords(n),c=o.length,s=0;s<c;s++)for(var u=0;u<c;u++)s===0&&u===0||s===0&&u===c-1||s===c-1&&u===0||i.push([o[s],o[u]]);return i}})(Lc);var Fc={},Qh=bt.getSymbolSize,gs=7;Fc.getPositions=function(e){var r=Qh(e);return[[0,0],[r-gs,0],[0,r-gs]]};var Mc={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},t.from=function(i){return t.isValid(i)?parseInt(i,10):void 0},t.getPenaltyN1=function(i){for(var o=i.size,c=0,s=0,u=0,h=null,f=null,_=0;_<o;_++){s=u=0,h=f=null;for(var O=0;O<o;O++){var v=i.get(_,O);v===h?s++:(s>=5&&(c+=e.N1+(s-5)),h=v,s=1),v=i.get(O,_),v===f?u++:(u>=5&&(c+=e.N1+(u-5)),f=v,u=1)}s>=5&&(c+=e.N1+(s-5)),u>=5&&(c+=e.N1+(u-5))}return c},t.getPenaltyN2=function(i){for(var o=i.size,c=0,s=0;s<o-1;s++)for(var u=0;u<o-1;u++){var h=i.get(s,u)+i.get(s,u+1)+i.get(s+1,u)+i.get(s+1,u+1);(h===4||h===0)&&c++}return c*e.N2},t.getPenaltyN3=function(i){for(var o=i.size,c=0,s=0,u=0,h=0;h<o;h++){s=u=0;for(var f=0;f<o;f++)s=s<<1&2047|i.get(h,f),f>=10&&(s===1488||s===93)&&c++,u=u<<1&2047|i.get(f,h),f>=10&&(u===1488||u===93)&&c++}return c*e.N3},t.getPenaltyN4=function(i){for(var o=0,c=i.data.length,s=0;s<c;s++)o+=i.data[s];var u=Math.abs(Math.ceil(o*100/c/5)-10);return u*e.N4};function r(n,i,o){switch(n){case t.Patterns.PATTERN000:return(i+o)%2===0;case t.Patterns.PATTERN001:return i%2===0;case t.Patterns.PATTERN010:return o%3===0;case t.Patterns.PATTERN011:return(i+o)%3===0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(o/3))%2===0;case t.Patterns.PATTERN101:return i*o%2+i*o%3===0;case t.Patterns.PATTERN110:return(i*o%2+i*o%3)%2===0;case t.Patterns.PATTERN111:return(i*o%3+(i+o)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}t.applyMask=function(i,o){for(var c=o.size,s=0;s<c;s++)for(var u=0;u<c;u++)o.isReserved(u,s)||o.xor(u,s,r(i,u,s))},t.getBestMask=function(i,o){for(var c=Object.keys(t.Patterns).length,s=0,u=1/0,h=0;h<c;h++){o(h),t.applyMask(h,i);var f=t.getPenaltyN1(i)+t.getPenaltyN2(i)+t.getPenaltyN3(i)+t.getPenaltyN4(i);t.applyMask(h,i),f<u&&(u=f,s=h)}return s}})(Mc);var Yn={},Qt=Gn,On=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Tn=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Yn.getBlocksCount=function(e,r){switch(r){case Qt.L:return On[(e-1)*4+0];case Qt.M:return On[(e-1)*4+1];case Qt.Q:return On[(e-1)*4+2];case Qt.H:return On[(e-1)*4+3];default:return}};Yn.getTotalCodewordsCount=function(e,r){switch(r){case Qt.L:return Tn[(e-1)*4+0];case Qt.M:return Tn[(e-1)*4+1];case Qt.Q:return Tn[(e-1)*4+2];case Qt.H:return Tn[(e-1)*4+3];default:return}};var Uc={},Jn={},$c=tr,Zr=$c.alloc(512),Fn=$c.alloc(256);(function(){for(var e=1,r=0;r<255;r++)Zr[r]=e,Fn[e]=r,e<<=1,e&256&&(e^=285);for(r=255;r<512;r++)Zr[r]=Zr[r-255]})();Jn.log=function(e){if(e<1)throw new Error("log("+e+")");return Fn[e]};Jn.exp=function(e){return Zr[e]};Jn.mul=function(e,r){return e===0||r===0?0:Zr[Fn[e]+Fn[r]]};(function(t){var e=tr,r=Jn;t.mul=function(i,o){for(var c=e.alloc(i.length+o.length-1),s=0;s<i.length;s++)for(var u=0;u<o.length;u++)c[s+u]^=r.mul(i[s],o[u]);return c},t.mod=function(i,o){for(var c=e.from(i);c.length-o.length>=0;){for(var s=c[0],u=0;u<o.length;u++)c[u]^=r.mul(o[u],s);for(var h=0;h<c.length&&c[h]===0;)h++;c=c.slice(h)}return c},t.generateECPolynomial=function(i){for(var o=e.from([1]),c=0;c<i;c++)o=t.mul(o,[1,r.exp(c)]);return o}})(Uc);var ps=tr,Bc=Uc,Zh=ic.Buffer;function yo(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}yo.prototype.initialize=function(e){this.degree=e,this.genPoly=Bc.generateECPolynomial(this.degree)};yo.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");var r=ps.alloc(this.degree),n=Zh.concat([e,r],e.length+this.degree),i=Bc.mod(n,this.genPoly),o=this.degree-i.length;if(o>0){var c=ps.alloc(this.degree);return i.copy(c,o),c}return i};var ed=yo,kc={},rr={},mo={};mo.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var $t={},zc="[0-9]+",td="[A-Z $%*+\\-./:]+",on="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";on=on.replace(/u/g,"\\u");var rd="(?:(?![A-Z0-9 $%*+\\-./:]|"+on+`)(?:.|[\r
]))+`;$t.KANJI=new RegExp(on,"g");$t.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");$t.BYTE=new RegExp(rd,"g");$t.NUMERIC=new RegExp(zc,"g");$t.ALPHANUMERIC=new RegExp(td,"g");var nd=new RegExp("^"+on+"$"),id=new RegExp("^"+zc+"$"),od=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");$t.testKanji=function(e){return nd.test(e)};$t.testNumeric=function(e){return id.test(e)};$t.testAlphanumeric=function(e){return od.test(e)};(function(t){var e=mo,r=$t;t.NUMERIC={id:"Numeric",bit:1<<0,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:1<<1,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:1<<2,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:1<<3,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(o,c){if(!o.ccBits)throw new Error("Invalid mode: "+o);if(!e.isValid(c))throw new Error("Invalid version: "+c);return c>=1&&c<10?o.ccBits[0]:c<27?o.ccBits[1]:o.ccBits[2]},t.getBestModeForData=function(o){return r.testNumeric(o)?t.NUMERIC:r.testAlphanumeric(o)?t.ALPHANUMERIC:r.testKanji(o)?t.KANJI:t.BYTE},t.toString=function(o){if(o&&o.id)return o.id;throw new Error("Invalid mode")},t.isValid=function(o){return o&&o.bit&&o.ccBits};function n(i){if(typeof i!="string")throw new Error("Param is not a string");var o=i.toLowerCase();switch(o){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+i)}}t.from=function(o,c){if(t.isValid(o))return o;try{return n(o)}catch{return c}}})(rr);(function(t){var e=bt,r=Yn,n=Gn,i=rr,o=mo,c=go,s=1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0,u=e.getBCHDigit(s);function h(v,m,I){for(var x=1;x<=40;x++)if(m<=t.getCapacity(x,I,v))return x}function f(v,m){return i.getCharCountIndicator(v,m)+4}function _(v,m){var I=0;return v.forEach(function(x){var R=f(x.mode,m);I+=R+x.getBitsLength()}),I}function O(v,m){for(var I=1;I<=40;I++){var x=_(v,I);if(x<=t.getCapacity(I,m,i.MIXED))return I}}t.from=function(m,I){return o.isValid(m)?parseInt(m,10):I},t.getCapacity=function(m,I,x){if(!o.isValid(m))throw new Error("Invalid QR Code version");typeof x>"u"&&(x=i.BYTE);var R=e.getSymbolTotalCodewords(m),p=r.getTotalCodewordsCount(m,I),w=(R-p)*8;if(x===i.MIXED)return w;var d=w-f(x,m);switch(x){case i.NUMERIC:return Math.floor(d/10*3);case i.ALPHANUMERIC:return Math.floor(d/11*2);case i.KANJI:return Math.floor(d/13);case i.BYTE:default:return Math.floor(d/8)}},t.getBestVersionForData=function(m,I){var x,R=n.from(I,n.M);if(c(m)){if(m.length>1)return O(m,R);if(m.length===0)return 1;x=m[0]}else x=m;return h(x.mode,x.getLength(),R)},t.getEncodedBits=function(m){if(!o.isValid(m)||m<7)throw new Error("Invalid QR Code version");for(var I=m<<12;e.getBCHDigit(I)-u>=0;)I^=s<<e.getBCHDigit(I)-u;return m<<12|I}})(kc);var jc={},Bi=bt,qc=1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0,sd=1<<14|1<<12|1<<10|1<<4|1<<1,_s=Bi.getBCHDigit(qc);jc.getEncodedBits=function(e,r){for(var n=e.bit<<3|r,i=n<<10;Bi.getBCHDigit(i)-_s>=0;)i^=qc<<Bi.getBCHDigit(i)-_s;return(n<<10|i)^sd};var Hc={},ad=rr;function Tr(t){this.mode=ad.NUMERIC,this.data=t.toString()}Tr.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};Tr.prototype.getLength=function(){return this.data.length};Tr.prototype.getBitsLength=function(){return Tr.getBitsLength(this.data.length)};Tr.prototype.write=function(e){var r,n,i;for(r=0;r+3<=this.data.length;r+=3)n=this.data.substr(r,3),i=parseInt(n,10),e.put(i,10);var o=this.data.length-r;o>0&&(n=this.data.substr(r),i=parseInt(n,10),e.put(i,o*3+1))};var cd=Tr,ud=rr,pi=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Ir(t){this.mode=ud.ALPHANUMERIC,this.data=t}Ir.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};Ir.prototype.getLength=function(){return this.data.length};Ir.prototype.getBitsLength=function(){return Ir.getBitsLength(this.data.length)};Ir.prototype.write=function(e){var r;for(r=0;r+2<=this.data.length;r+=2){var n=pi.indexOf(this.data[r])*45;n+=pi.indexOf(this.data[r+1]),e.put(n,11)}this.data.length%2&&e.put(pi.indexOf(this.data[r]),6)};var ld=Ir,fd=tr,hd=rr;function Ar(t){this.mode=hd.BYTE,this.data=fd.from(t)}Ar.getBitsLength=function(e){return e*8};Ar.prototype.getLength=function(){return this.data.length};Ar.prototype.getBitsLength=function(){return Ar.getBitsLength(this.data.length)};Ar.prototype.write=function(t){for(var e=0,r=this.data.length;e<r;e++)t.put(this.data[e],8)};var dd=Ar,gd=rr,pd=bt;function Nr(t){this.mode=gd.KANJI,this.data=t}Nr.getBitsLength=function(e){return e*13};Nr.prototype.getLength=function(){return this.data.length};Nr.prototype.getBitsLength=function(){return Nr.getBitsLength(this.data.length)};Nr.prototype.write=function(t){var e;for(e=0;e<this.data.length;e++){var r=pd.toSJIS(this.data[e]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),t.put(r,13)}};var _d=Nr,ki={},yd={get exports(){return ki},set exports(t){ki=t}};(function(t){var e={single_source_shortest_paths:function(r,n,i){var o={},c={};c[n]=0;var s=e.PriorityQueue.make();s.push(n,0);for(var u,h,f,_,O,v,m,I,x;!s.empty();){u=s.pop(),h=u.value,_=u.cost,O=r[h]||{};for(f in O)O.hasOwnProperty(f)&&(v=O[f],m=_+v,I=c[f],x=typeof c[f]>"u",(x||I>m)&&(c[f]=m,s.push(f,m),o[f]=h))}if(typeof i<"u"&&typeof c[i]>"u"){var R=["Could not find a path from ",n," to ",i,"."].join("");throw new Error(R)}return o},extract_shortest_path_from_predecessor_list:function(r,n){for(var i=[],o=n;o;)i.push(o),r[o],o=r[o];return i.reverse(),i},find_path:function(r,n,i){var o=e.single_source_shortest_paths(r,n,i);return e.extract_shortest_path_from_predecessor_list(o,i)},PriorityQueue:{make:function(r){var n=e.PriorityQueue,i={},o;r=r||{};for(o in n)n.hasOwnProperty(o)&&(i[o]=n[o]);return i.queue=[],i.sorter=r.sorter||n.default_sorter,i},default_sorter:function(r,n){return r.cost-n.cost},push:function(r,n){var i={value:r,cost:n};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(yd);(function(t){var e=rr,r=cd,n=ld,i=dd,o=_d,c=$t,s=bt,u=ki;function h(R){return unescape(encodeURIComponent(R)).length}function f(R,p,w){for(var d=[],b;(b=R.exec(w))!==null;)d.push({data:b[0],index:b.index,mode:p,length:b[0].length});return d}function _(R){var p=f(c.NUMERIC,e.NUMERIC,R),w=f(c.ALPHANUMERIC,e.ALPHANUMERIC,R),d,b;s.isKanjiModeEnabled()?(d=f(c.BYTE,e.BYTE,R),b=f(c.KANJI,e.KANJI,R)):(d=f(c.BYTE_KANJI,e.BYTE,R),b=[]);var E=p.concat(w,d,b);return E.sort(function(a,g){return a.index-g.index}).map(function(a){return{data:a.data,mode:a.mode,length:a.length}})}function O(R,p){switch(p){case e.NUMERIC:return r.getBitsLength(R);case e.ALPHANUMERIC:return n.getBitsLength(R);case e.KANJI:return o.getBitsLength(R);case e.BYTE:return i.getBitsLength(R)}}function v(R){return R.reduce(function(p,w){var d=p.length-1>=0?p[p.length-1]:null;return d&&d.mode===w.mode?(p[p.length-1].data+=w.data,p):(p.push(w),p)},[])}function m(R){for(var p=[],w=0;w<R.length;w++){var d=R[w];switch(d.mode){case e.NUMERIC:p.push([d,{data:d.data,mode:e.ALPHANUMERIC,length:d.length},{data:d.data,mode:e.BYTE,length:d.length}]);break;case e.ALPHANUMERIC:p.push([d,{data:d.data,mode:e.BYTE,length:d.length}]);break;case e.KANJI:p.push([d,{data:d.data,mode:e.BYTE,length:h(d.data)}]);break;case e.BYTE:p.push([{data:d.data,mode:e.BYTE,length:h(d.data)}])}}return p}function I(R,p){for(var w={},d={start:{}},b=["start"],E=0;E<R.length;E++){for(var a=R[E],g=[],B=0;B<a.length;B++){var C=a[B],F=""+E+B;g.push(F),w[F]={node:C,lastCount:0},d[F]={};for(var M=0;M<b.length;M++){var $=b[M];w[$]&&w[$].node.mode===C.mode?(d[$][F]=O(w[$].lastCount+C.length,C.mode)-O(w[$].lastCount,C.mode),w[$].lastCount+=C.length):(w[$]&&(w[$].lastCount=C.length),d[$][F]=O(C.length,C.mode)+4+e.getCharCountIndicator(C.mode,p))}}b=g}for(M=0;M<b.length;M++)d[b[M]].end=0;return{map:d,table:w}}function x(R,p){var w,d=e.getBestModeForData(R);if(w=e.from(p,d),w!==e.BYTE&&w.bit<d.bit)throw new Error('"'+R+'" cannot be encoded with mode '+e.toString(w)+`.
 Suggested mode is: `+e.toString(d));switch(w===e.KANJI&&!s.isKanjiModeEnabled()&&(w=e.BYTE),w){case e.NUMERIC:return new r(R);case e.ALPHANUMERIC:return new n(R);case e.KANJI:return new o(R);case e.BYTE:return new i(R)}}t.fromArray=function(p){return p.reduce(function(w,d){return typeof d=="string"?w.push(x(d,null)):d.data&&w.push(x(d.data,d.mode)),w},[])},t.fromString=function(p,w){for(var d=_(p,s.isKanjiModeEnabled()),b=m(d),E=I(b,w),a=u.find_path(E.map,"start","end"),g=[],B=1;B<a.length-1;B++)g.push(E.table[a[B]].node);return t.fromArray(v(g))},t.rawSplit=function(p){return t.fromArray(_(p,s.isKanjiModeEnabled()))}})(Hc);var ys=tr,Xn=bt,_i=Gn,md=Jh,vd=Xh,wd=Lc,bd=Fc,zi=Mc,ji=Yn,Ed=ed,Mn=kc,Dd=jc,Sd=rr,yi=Hc,xd=go;function Cd(t,e){for(var r=t.size,n=bd.getPositions(e),i=0;i<n.length;i++)for(var o=n[i][0],c=n[i][1],s=-1;s<=7;s++)if(!(o+s<=-1||r<=o+s))for(var u=-1;u<=7;u++)c+u<=-1||r<=c+u||(s>=0&&s<=6&&(u===0||u===6)||u>=0&&u<=6&&(s===0||s===6)||s>=2&&s<=4&&u>=2&&u<=4?t.set(o+s,c+u,!0,!0):t.set(o+s,c+u,!1,!0))}function Od(t){for(var e=t.size,r=8;r<e-8;r++){var n=r%2===0;t.set(r,6,n,!0),t.set(6,r,n,!0)}}function Td(t,e){for(var r=wd.getPositions(e),n=0;n<r.length;n++)for(var i=r[n][0],o=r[n][1],c=-2;c<=2;c++)for(var s=-2;s<=2;s++)c===-2||c===2||s===-2||s===2||c===0&&s===0?t.set(i+c,o+s,!0,!0):t.set(i+c,o+s,!1,!0)}function Id(t,e){for(var r=t.size,n=Mn.getEncodedBits(e),i,o,c,s=0;s<18;s++)i=Math.floor(s/3),o=s%3+r-8-3,c=(n>>s&1)===1,t.set(i,o,c,!0),t.set(o,i,c,!0)}function mi(t,e,r){var n=t.size,i=Dd.getEncodedBits(e,r),o,c;for(o=0;o<15;o++)c=(i>>o&1)===1,o<6?t.set(o,8,c,!0):o<8?t.set(o+1,8,c,!0):t.set(n-15+o,8,c,!0),o<8?t.set(8,n-o-1,c,!0):o<9?t.set(8,15-o-1+1,c,!0):t.set(8,15-o-1,c,!0);t.set(n-8,8,1,!0)}function Ad(t,e){for(var r=t.size,n=-1,i=r-1,o=7,c=0,s=r-1;s>0;s-=2)for(s===6&&s--;;){for(var u=0;u<2;u++)if(!t.isReserved(i,s-u)){var h=!1;c<e.length&&(h=(e[c]>>>o&1)===1),t.set(i,s-u,h),o--,o===-1&&(c++,o=7)}if(i+=n,i<0||r<=i){i-=n,n=-n;break}}}function Nd(t,e,r){var n=new md;r.forEach(function(h){n.put(h.mode.bit,4),n.put(h.getLength(),Sd.getCharCountIndicator(h.mode,t)),h.write(n)});var i=Xn.getSymbolTotalCodewords(t),o=ji.getTotalCodewordsCount(t,e),c=(i-o)*8;for(n.getLengthInBits()+4<=c&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);for(var s=(c-n.getLengthInBits())/8,u=0;u<s;u++)n.put(u%2?17:236,8);return Rd(n,t,e)}function Rd(t,e,r){for(var n=Xn.getSymbolTotalCodewords(e),i=ji.getTotalCodewordsCount(e,r),o=n-i,c=ji.getBlocksCount(e,r),s=n%c,u=c-s,h=Math.floor(n/c),f=Math.floor(o/c),_=f+1,O=h-f,v=new Ed(O),m=0,I=new Array(c),x=new Array(c),R=0,p=ys.from(t.buffer),w=0;w<c;w++){var d=w<u?f:_;I[w]=p.slice(m,m+d),x[w]=v.encode(I[w]),m+=d,R=Math.max(R,d)}var b=ys.alloc(n),E=0,a,g;for(a=0;a<R;a++)for(g=0;g<c;g++)a<I[g].length&&(b[E++]=I[g][a]);for(a=0;a<O;a++)for(g=0;g<c;g++)b[E++]=x[g][a];return b}function Pd(t,e,r,n){var i;if(xd(t))i=yi.fromArray(t);else if(typeof t=="string"){var o=e;if(!o){var c=yi.rawSplit(t);o=Mn.getBestVersionForData(c,r)}i=yi.fromString(t,o||40)}else throw new Error("Invalid data");var s=Mn.getBestVersionForData(i,r);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=s;else if(e<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);var u=Nd(e,r,i),h=Xn.getSymbolSize(e),f=new vd(h);return Cd(f,e),Od(f),Td(f,e),mi(f,r,0),e>=7&&Id(f,e),Ad(f,u),isNaN(n)&&(n=zi.getBestMask(f,mi.bind(null,f,r))),zi.applyMask(n,f),mi(f,r,n),{modules:f,version:e,errorCorrectionLevel:r,maskPattern:n,segments:i}}Ic.create=function(e,r){if(typeof e>"u"||e==="")throw new Error("No input text");var n=_i.M,i,o;return typeof r<"u"&&(n=_i.from(r.errorCorrectionLevel,_i.M),i=Mn.from(r.version),o=zi.from(r.maskPattern),r.toSJISFunc&&Xn.setToSJISFunction(r.toSJISFunc)),Pd(e,i,n,o)};var Kc={},vo={};(function(t){function e(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");var n=r.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+r);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(o){return[o,o]}))),n.length===6&&n.push("F","F");var i=parseInt(n.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+n.slice(0,6).join("")}}t.getOptions=function(n){n||(n={}),n.color||(n.color={});var i=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,o=n.width&&n.width>=21?n.width:void 0,c=n.scale||4;return{width:o,scale:o?4:c,margin:i,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},t.getScale=function(n,i){return i.width&&i.width>=n+i.margin*2?i.width/(n+i.margin*2):i.scale},t.getImageWidth=function(n,i){var o=t.getScale(n,i);return Math.floor((n+i.margin*2)*o)},t.qrToImageData=function(n,i,o){for(var c=i.modules.size,s=i.modules.data,u=t.getScale(c,o),h=Math.floor((c+o.margin*2)*u),f=o.margin*u,_=[o.color.light,o.color.dark],O=0;O<h;O++)for(var v=0;v<h;v++){var m=(O*h+v)*4,I=o.color.light;if(O>=f&&v>=f&&O<h-f&&v<h-f){var x=Math.floor((O-f)/u),R=Math.floor((v-f)/u);I=_[s[x*c+R]?1:0]}n[m++]=I.r,n[m++]=I.g,n[m++]=I.b,n[m]=I.a}}})(vo);(function(t){var e=vo;function r(i,o,c){i.clearRect(0,0,o.width,o.height),o.style||(o.style={}),o.height=c,o.width=c,o.style.height=c+"px",o.style.width=c+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(o,c,s){var u=s,h=c;typeof u>"u"&&(!c||!c.getContext)&&(u=c,c=void 0),c||(h=n()),u=e.getOptions(u);var f=e.getImageWidth(o.modules.size,u),_=h.getContext("2d"),O=_.createImageData(f,f);return e.qrToImageData(O.data,o,u),r(_,h,f),_.putImageData(O,0,0),h},t.renderToDataURL=function(o,c,s){var u=s;typeof u>"u"&&(!c||!c.getContext)&&(u=c,c=void 0),u||(u={});var h=t.render(o,c,u),f=u.type||"image/png",_=u.rendererOpts||{};return h.toDataURL(f,_.quality)}})(Kc);var Vc={},Ld=vo;function ms(t,e){var r=t.a/255,n=e+'="'+t.hex+'"';return r<1?n+" "+e+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function vi(t,e,r){var n=t+e;return typeof r<"u"&&(n+=" "+r),n}function Fd(t,e,r){for(var n="",i=0,o=!1,c=0,s=0;s<t.length;s++){var u=Math.floor(s%e),h=Math.floor(s/e);!u&&!o&&(o=!0),t[s]?(c++,s>0&&u>0&&t[s-1]||(n+=o?vi("M",u+r,.5+h+r):vi("m",i,0),i=0,o=!1),u+1<e&&t[s+1]||(n+=vi("h",c),c=0)):i++}return n}Vc.render=function(e,r,n){var i=Ld.getOptions(r),o=e.modules.size,c=e.modules.data,s=o+i.margin*2,u=i.color.light.a?"<path "+ms(i.color.light,"fill")+' d="M0 0h'+s+"v"+s+'H0z"/>':"",h="<path "+ms(i.color.dark,"stroke")+' d="'+Fd(c,o,i.margin)+'"/>',f='viewBox="0 0 '+s+" "+s+'"',_=i.width?'width="'+i.width+'" height="'+i.width+'" ':"",O='<svg xmlns="http://www.w3.org/2000/svg" '+_+f+' shape-rendering="crispEdges">'+u+h+`</svg>
`;return typeof n=="function"&&n(null,O),O};var Md=$h,qi=Ic,Wc=Kc,Ud=Vc;function wo(t,e,r,n,i){var o=[].slice.call(arguments,1),c=o.length,s=typeof o[c-1]=="function";if(!s&&!Md())throw new Error("Callback required as last argument");if(s){if(c<2)throw new Error("Too few arguments provided");c===2?(i=r,r=e,e=n=void 0):c===3&&(e.getContext&&typeof i>"u"?(i=n,n=void 0):(i=n,n=r,r=e,e=void 0))}else{if(c<1)throw new Error("Too few arguments provided");return c===1?(r=e,e=n=void 0):c===2&&!e.getContext&&(n=r,r=e,e=void 0),new Promise(function(h,f){try{var _=qi.create(r,n);h(t(_,e,n))}catch(O){f(O)}})}try{var u=qi.create(r,n);i(null,t(u,e,n))}catch(h){i(h)}}fn.create=qi.create;fn.toCanvas=wo.bind(null,Wc.render);fn.toDataURL=wo.bind(null,Wc.renderToDataURL);fn.toString=wo.bind(null,function(t,e,r){return Ud.render(t,r)});var $d=function(){var t=document.getSelection();if(!t.rangeCount)return function(){};for(var e=document.activeElement,r=[],n=0;n<t.rangeCount;n++)r.push(t.getRangeAt(n));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null;break}return t.removeAllRanges(),function(){t.type==="Caret"&&t.removeAllRanges(),t.rangeCount||r.forEach(function(i){t.addRange(i)}),e&&e.focus()}},Bd=$d,vs={"text/plain":"Text","text/html":"Url",default:"Text"},kd="Copy to clipboard: #{key}, Enter";function zd(t){var e=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return t.replace(/#{\s*key\s*}/g,e)}function jd(t,e){var r,n,i,o,c,s,u=!1;e||(e={}),r=e.debug||!1;try{i=Bd(),o=document.createRange(),c=document.getSelection(),s=document.createElement("span"),s.textContent=t,s.ariaHidden="true",s.style.all="unset",s.style.position="fixed",s.style.top=0,s.style.clip="rect(0, 0, 0, 0)",s.style.whiteSpace="pre",s.style.webkitUserSelect="text",s.style.MozUserSelect="text",s.style.msUserSelect="text",s.style.userSelect="text",s.addEventListener("copy",function(f){if(f.stopPropagation(),e.format)if(f.preventDefault(),typeof f.clipboardData>"u"){r&&console.warn("unable to use e.clipboardData"),r&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var _=vs[e.format]||vs.default;window.clipboardData.setData(_,t)}else f.clipboardData.clearData(),f.clipboardData.setData(e.format,t);e.onCopy&&(f.preventDefault(),e.onCopy(f.clipboardData))}),document.body.appendChild(s),o.selectNodeContents(s),c.addRange(o);var h=document.execCommand("copy");if(!h)throw new Error("copy command was unsuccessful");u=!0}catch(f){r&&console.error("unable to copy using execCommand: ",f),r&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(e.format||"text",t),e.onCopy&&e.onCopy(window.clipboardData),u=!0}catch(_){r&&console.error("unable to copy using clipboardData: ",_),r&&console.error("falling back to prompt"),n=zd("message"in e?e.message:kd),window.prompt(n,t)}}finally{c&&(typeof c.removeRange=="function"?c.removeRange(o):c.removeAllRanges()),s&&document.body.removeChild(s),i()}return u}var qd=jd,re,en,bo,Gc,ws,Eo,Yc,Kt={},Qn=[],Hd=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord/i;function Ht(t,e){for(var r in e)t[r]=e[r];return t}function Jc(t){var e=t.parentNode;e&&e.removeChild(t)}function Vt(t,e,r){var n,i=arguments,o={};for(n in e)n!=="key"&&n!=="ref"&&(o[n]=e[n]);if(arguments.length>3)for(r=[r],n=3;n<arguments.length;n++)r.push(i[n]);if(r!=null&&(o.children=r),typeof t=="function"&&t.defaultProps!=null)for(n in t.defaultProps)o[n]===void 0&&(o[n]=t.defaultProps[n]);return Un(t,o,e&&e.key,e&&e.ref,null)}function Un(t,e,r,n,i){var o={type:t,props:e,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:i};return i==null&&(o.__v=o),re.vnode&&re.vnode(o),o}function Xc(){return{}}function dn(t){return t.children}function Nt(t,e){this.props=t,this.context=e}function sn(t,e){if(e==null)return t.__?sn(t.__,t.__.__k.indexOf(t)+1):null;for(var r;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null)return r.__e;return typeof t.type=="function"?sn(t):null}function Qc(t){var e,r;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null){t.__e=t.__c.base=r.__e;break}return Qc(t)}}function Rn(t){(!t.__d&&(t.__d=!0)&&en.push(t)&&!bo++||ws!==re.debounceRendering)&&((ws=re.debounceRendering)||Gc)(Kd)}function Kd(){for(var t;bo=en.length;)t=en.sort(function(e,r){return e.__v.__b-r.__v.__b}),en=[],t.some(function(e){var r,n,i,o,c,s,u;e.__d&&(s=(c=(r=e).__v).__e,(u=r.__P)&&(n=[],(i=Ht({},c)).__v=i,o=Do(u,c,i,r.__n,u.ownerSVGElement!==void 0,null,n,s??sn(c)),eu(n,c),o!=s&&Qc(c)))})}function Zc(t,e,r,n,i,o,c,s,u){var h,f,_,O,v,m,I,x=r&&r.__k||Qn,R=x.length;if(s==Kt&&(s=o!=null?o[0]:R?sn(r,0):null),h=0,e.__k=Zt(e.__k,function(p){if(p!=null){if(p.__=e,p.__b=e.__b+1,(_=x[h])===null||_&&p.key==_.key&&p.type===_.type)x[h]=void 0;else for(f=0;f<R;f++){if((_=x[f])&&p.key==_.key&&p.type===_.type){x[f]=void 0;break}_=null}if(O=Do(t,p,_=_||Kt,n,i,o,c,s,u),(f=p.ref)&&_.ref!=f&&(I||(I=[]),_.ref&&I.push(_.ref,null,p),I.push(f,p.__c||O,p)),O!=null){var w;if(m==null&&(m=O),p.__d!==void 0)w=p.__d,p.__d=void 0;else if(o==_||O!=s||O.parentNode==null){e:if(s==null||s.parentNode!==t)t.appendChild(O),w=null;else{for(v=s,f=0;(v=v.nextSibling)&&f<R;f+=2)if(v==O)break e;t.insertBefore(O,s),w=s}e.type=="option"&&(t.value="")}s=w!==void 0?w:O.nextSibling,typeof e.type=="function"&&(e.__d=s)}else s&&_.__e==s&&s.parentNode!=t&&(s=sn(_))}return h++,p}),e.__e=m,o!=null&&typeof e.type!="function")for(h=o.length;h--;)o[h]!=null&&Jc(o[h]);for(h=R;h--;)x[h]!=null&&tn(x[h],x[h]);if(I)for(h=0;h<I.length;h++)tu(I[h],I[++h],I[++h])}function Zt(t,e,r){if(r==null&&(r=[]),t==null||typeof t=="boolean")e&&r.push(e(null));else if(Array.isArray(t))for(var n=0;n<t.length;n++)Zt(t[n],e,r);else r.push(e?e(typeof t=="string"||typeof t=="number"?Un(null,t,null,null,t):t.__e!=null||t.__c!=null?Un(t.type,t.props,t.key,null,t.__v):t):t);return r}function Vd(t,e,r,n,i){var o;for(o in r)o==="children"||o==="key"||o in e||$n(t,o,null,r[o],n);for(o in e)i&&typeof e[o]!="function"||o==="children"||o==="key"||o==="value"||o==="checked"||r[o]===e[o]||$n(t,o,e[o],r[o],n)}function bs(t,e,r){e[0]==="-"?t.setProperty(e,r):t[e]=typeof r=="number"&&Hd.test(e)===!1?r+"px":r??""}function $n(t,e,r,n,i){var o,c,s,u,h;if(i?e==="className"&&(e="class"):e==="class"&&(e="className"),e==="style")if(o=t.style,typeof r=="string")o.cssText=r;else{if(typeof n=="string"&&(o.cssText="",n=null),n)for(u in n)r&&u in r||bs(o,u,"");if(r)for(h in r)n&&r[h]===n[h]||bs(o,h,r[h])}else e[0]==="o"&&e[1]==="n"?(c=e!==(e=e.replace(/Capture$/,"")),s=e.toLowerCase(),e=(s in t?s:e).slice(2),r?(n||t.addEventListener(e,Es,c),(t.l||(t.l={}))[e]=r):t.removeEventListener(e,Es,c)):e!=="list"&&e!=="tagName"&&e!=="form"&&e!=="type"&&e!=="size"&&!i&&e in t?t[e]=r??"":typeof r!="function"&&e!=="dangerouslySetInnerHTML"&&(e!==(e=e.replace(/^xlink:?/,""))?r==null||r===!1?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),r):r==null||r===!1&&!/^ar/.test(e)?t.removeAttribute(e):t.setAttribute(e,r))}function Es(t){this.l[t.type](re.event?re.event(t):t)}function Do(t,e,r,n,i,o,c,s,u){var h,f,_,O,v,m,I,x,R,p,w=e.type;if(e.constructor!==void 0)return null;(h=re.__b)&&h(e);try{e:if(typeof w=="function"){if(x=e.props,R=(h=w.contextType)&&n[h.__c],p=h?R?R.props.value:h.__:n,r.__c?I=(f=e.__c=r.__c).__=f.__E:("prototype"in w&&w.prototype.render?e.__c=f=new w(x,p):(e.__c=f=new Nt(x,p),f.constructor=w,f.render=Gd),R&&R.sub(f),f.props=x,f.state||(f.state={}),f.context=p,f.__n=n,_=f.__d=!0,f.__h=[]),f.__s==null&&(f.__s=f.state),w.getDerivedStateFromProps!=null&&(f.__s==f.state&&(f.__s=Ht({},f.__s)),Ht(f.__s,w.getDerivedStateFromProps(x,f.__s))),O=f.props,v=f.state,_)w.getDerivedStateFromProps==null&&f.componentWillMount!=null&&f.componentWillMount(),f.componentDidMount!=null&&f.__h.push(f.componentDidMount);else{if(w.getDerivedStateFromProps==null&&x!==O&&f.componentWillReceiveProps!=null&&f.componentWillReceiveProps(x,p),!f.__e&&f.shouldComponentUpdate!=null&&f.shouldComponentUpdate(x,f.__s,p)===!1||e.__v===r.__v&&!f.__){for(f.props=x,f.state=f.__s,e.__v!==r.__v&&(f.__d=!1),f.__v=e,e.__e=r.__e,e.__k=r.__k,f.__h.length&&c.push(f),h=0;h<e.__k.length;h++)e.__k[h]&&(e.__k[h].__=e);break e}f.componentWillUpdate!=null&&f.componentWillUpdate(x,f.__s,p),f.componentDidUpdate!=null&&f.__h.push(function(){f.componentDidUpdate(O,v,m)})}f.context=p,f.props=x,f.state=f.__s,(h=re.__r)&&h(e),f.__d=!1,f.__v=e,f.__P=t,h=f.render(f.props,f.state,f.context),e.__k=h!=null&&h.type==dn&&h.key==null?h.props.children:Array.isArray(h)?h:[h],f.getChildContext!=null&&(n=Ht(Ht({},n),f.getChildContext())),_||f.getSnapshotBeforeUpdate==null||(m=f.getSnapshotBeforeUpdate(O,v)),Zc(t,e,r,n,i,o,c,s,u),f.base=e.__e,f.__h.length&&c.push(f),I&&(f.__E=f.__=null),f.__e=!1}else o==null&&e.__v===r.__v?(e.__k=r.__k,e.__e=r.__e):e.__e=Wd(r.__e,e,r,n,i,o,c,u);(h=re.diffed)&&h(e)}catch(d){e.__v=null,re.__e(d,e,r)}return e.__e}function eu(t,e){re.__c&&re.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(n){n.call(r)})}catch(n){re.__e(n,r.__v)}})}function Wd(t,e,r,n,i,o,c,s){var u,h,f,_,O,v=r.props,m=e.props;if(i=e.type==="svg"||i,o!=null){for(u=0;u<o.length;u++)if((h=o[u])!=null&&((e.type===null?h.nodeType===3:h.localName===e.type)||t==h)){t=h,o[u]=null;break}}if(t==null){if(e.type===null)return document.createTextNode(m);t=i?document.createElementNS("http://www.w3.org/2000/svg",e.type):document.createElement(e.type,m.is&&{is:m.is}),o=null,s=!1}if(e.type===null)v!==m&&t.data!=m&&(t.data=m);else{if(o!=null&&(o=Qn.slice.call(t.childNodes)),f=(v=r.props||Kt).dangerouslySetInnerHTML,_=m.dangerouslySetInnerHTML,!s){if(v===Kt)for(v={},O=0;O<t.attributes.length;O++)v[t.attributes[O].name]=t.attributes[O].value;(_||f)&&(_&&f&&_.__html==f.__html||(t.innerHTML=_&&_.__html||""))}Vd(t,m,v,i,s),_?e.__k=[]:(e.__k=e.props.children,Zc(t,e,r,n,e.type!=="foreignObject"&&i,o,c,Kt,s)),s||("value"in m&&(u=m.value)!==void 0&&u!==t.value&&$n(t,"value",u,v.value,!1),"checked"in m&&(u=m.checked)!==void 0&&u!==t.checked&&$n(t,"checked",u,v.checked,!1))}return t}function tu(t,e,r){try{typeof t=="function"?t(e):t.current=e}catch(n){re.__e(n,r)}}function tn(t,e,r){var n,i,o;if(re.unmount&&re.unmount(t),(n=t.ref)&&(n.current&&n.current!==t.__e||tu(n,null,e)),r||typeof t.type=="function"||(r=(i=t.__e)!=null),t.__e=t.__d=void 0,(n=t.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(c){re.__e(c,e)}n.base=n.__P=null}if(n=t.__k)for(o=0;o<n.length;o++)n[o]&&tn(n[o],e,r);i!=null&&Jc(i)}function Gd(t,e,r){return this.constructor(t,r)}function an(t,e,r){var n,i,o;re.__&&re.__(t,e),i=(n=r===Eo)?null:r&&r.__k||e.__k,t=Vt(dn,null,[t]),o=[],Do(e,(n?e:r||e).__k=t,i||Kt,Kt,e.ownerSVGElement!==void 0,r&&!n?[r]:i?null:Qn.slice.call(e.childNodes),o,r||Kt,n),eu(o,t)}function ru(t,e){an(t,e,Eo)}function Yd(t,e){var r,n;for(n in e=Ht(Ht({},t.props),e),arguments.length>2&&(e.children=Qn.slice.call(arguments,2)),r={},e)n!=="key"&&n!=="ref"&&(r[n]=e[n]);return Un(t.type,r,e.key||t.key,e.ref||t.ref,null)}function nu(t){var e={},r={__c:"__cC"+Yc++,__:t,Consumer:function(n,i){return n.children(i)},Provider:function(n){var i,o=this;return this.getChildContext||(i=[],this.getChildContext=function(){return e[r.__c]=o,e},this.shouldComponentUpdate=function(c){o.props.value!==c.value&&i.some(function(s){s.context=c.value,Rn(s)})},this.sub=function(c){i.push(c);var s=c.componentWillUnmount;c.componentWillUnmount=function(){i.splice(i.indexOf(c),1),s&&s.call(c)}}),n.children}};return r.Consumer.contextType=r,r.Provider.__=r,r}re={__e:function(t,e){for(var r,n;e=e.__;)if((r=e.__c)&&!r.__)try{if(r.constructor&&r.constructor.getDerivedStateFromError!=null&&(n=!0,r.setState(r.constructor.getDerivedStateFromError(t))),r.componentDidCatch!=null&&(n=!0,r.componentDidCatch(t)),n)return Rn(r.__E=r)}catch(i){t=i}throw t}},Nt.prototype.setState=function(t,e){var r;r=this.__s!==this.state?this.__s:this.__s=Ht({},this.state),typeof t=="function"&&(t=t(r,this.props)),t&&Ht(r,t),t!=null&&this.__v&&(e&&this.__h.push(e),Rn(this))},Nt.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Rn(this))},Nt.prototype.render=dn,en=[],bo=0,Gc=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Eo=Kt,Yc=0;var yr,gt,Ds,Rr=0,Hi=[],Ss=re.__r,xs=re.diffed,Cs=re.__c,Os=re.unmount;function Mr(t,e){re.__h&&re.__h(gt,t,Rr||e),Rr=0;var r=gt.__H||(gt.__H={__:[],__h:[]});return t>=r.__.length&&r.__.push({}),r.__[t]}function So(t){return Rr=1,xo(lu,t)}function xo(t,e,r){var n=Mr(yr++,2);return n.__c||(n.__c=gt,n.__=[r?r(e):lu(void 0,e),function(i){var o=t(n.__[0],i);n.__[0]!==o&&(n.__[0]=o,n.__c.setState({}))}]),n.__}function iu(t,e){var r=Mr(yr++,3);!re.__s&&Oo(r.__H,e)&&(r.__=t,r.__H=e,gt.__H.__h.push(r))}function Co(t,e){var r=Mr(yr++,4);!re.__s&&Oo(r.__H,e)&&(r.__=t,r.__H=e,gt.__h.push(r))}function ou(t){return Rr=5,Zn(function(){return{current:t}},[])}function su(t,e,r){Rr=6,Co(function(){typeof t=="function"?t(e()):t&&(t.current=e())},r==null?r:r.concat(t))}function Zn(t,e){var r=Mr(yr++,7);return Oo(r.__H,e)?(r.__H=e,r.__h=t,r.__=t()):r.__}function au(t,e){return Rr=8,Zn(function(){return t},e)}function cu(t){var e=gt.context[t.__c],r=Mr(yr++,9);return r.__c=t,e?(r.__==null&&(r.__=!0,e.sub(gt)),e.props.value):t.__}function uu(t,e){re.useDebugValue&&re.useDebugValue(e?e(t):t)}function Jd(t){var e=Mr(yr++,10),r=So();return e.__=t,gt.componentDidCatch||(gt.componentDidCatch=function(n){e.__&&e.__(n),r[1](n)}),[r[0],function(){r[1](void 0)}]}function Xd(){Hi.some(function(t){if(t.__P)try{t.__H.__h.forEach(Ki),t.__H.__h.forEach(Vi),t.__H.__h=[]}catch(e){return t.__H.__h=[],re.__e(e,t.__v),!0}}),Hi=[]}function Ki(t){t.t&&t.t()}function Vi(t){var e=t.__();typeof e=="function"&&(t.t=e)}function Oo(t,e){return!t||e.some(function(r,n){return r!==t[n]})}function lu(t,e){return typeof e=="function"?e(t):e}re.__r=function(t){Ss&&Ss(t),yr=0,(gt=t.__c).__H&&(gt.__H.__h.forEach(Ki),gt.__H.__h.forEach(Vi),gt.__H.__h=[])},re.diffed=function(t){xs&&xs(t);var e=t.__c;if(e){var r=e.__H;r&&r.__h.length&&(Hi.push(e)!==1&&Ds===re.requestAnimationFrame||((Ds=re.requestAnimationFrame)||function(n){var i,o=function(){clearTimeout(c),cancelAnimationFrame(i),setTimeout(n)},c=setTimeout(o,100);typeof window<"u"&&(i=requestAnimationFrame(o))})(Xd))}},re.__c=function(t,e){e.some(function(r){try{r.__h.forEach(Ki),r.__h=r.__h.filter(function(n){return!n.__||Vi(n)})}catch(n){e.some(function(i){i.__h&&(i.__h=[])}),e=[],re.__e(n,r.__v)}}),Cs&&Cs(t,e)},re.unmount=function(t){Os&&Os(t);var e=t.__c;if(e){var r=e.__H;if(r)try{r.__.forEach(function(n){return n.t&&n.t()})}catch(n){re.__e(n,e.__v)}}};function To(t,e){for(var r in e)t[r]=e[r];return t}function Wi(t,e){for(var r in t)if(r!=="__source"&&!(r in e))return!0;for(var n in e)if(n!=="__source"&&t[n]!==e[n])return!0;return!1}var fu=function(t){var e,r;function n(i){var o;return(o=t.call(this,i)||this).isPureReactComponent=!0,o}return r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,n.prototype.shouldComponentUpdate=function(i,o){return Wi(this.props,i)||Wi(this.state,o)},n}(Nt);function hu(t,e){function r(i){var o=this.props.ref,c=o==i.ref;return!c&&o&&(o.call?o(null):o.current=null),e?!e(this.props,i)||!c:Wi(this.props,i)}function n(i){return this.shouldComponentUpdate=r,Vt(t,To({},i))}return n.prototype.isReactComponent=!0,n.displayName="Memo("+(t.displayName||t.name)+")",n.t=!0,n}var Ts=re.__b;function du(t){function e(r){var n=To({},r);return delete n.ref,t(n,r.ref)}return e.prototype.isReactComponent=e.t=!0,e.displayName="ForwardRef("+(t.displayName||t.name)+")",e}re.__b=function(t){t.type&&t.type.t&&t.ref&&(t.props.ref=t.ref,t.ref=null),Ts&&Ts(t)};var Is=function(t,e){return t?Zt(t).reduce(function(r,n,i){return r.concat(e(n,i))},[]):null},gu={map:Is,forEach:Is,count:function(t){return t?Zt(t).length:0},only:function(t){if((t=Zt(t)).length!==1)throw new Error("Children.only() expects only one child.");return t[0]},toArray:Zt},Qd=re.__e;function pu(t){return t&&((t=To({},t)).__c=null,t.__k=t.__k&&t.__k.map(pu)),t}function Bn(){this.__u=0,this.o=null,this.__b=null}function _u(t){var e=t.__.__c;return e&&e.u&&e.u(t)}function yu(t){var e,r,n;function i(o){if(e||(e=t()).then(function(c){r=c.default||c},function(c){n=c}),n)throw n;if(!r)throw e;return Vt(r,o)}return i.displayName="Lazy",i.t=!0,i}function Cr(){this.i=null,this.l=null}re.__e=function(t,e,r){if(t.then){for(var n,i=e;i=i.__;)if((n=i.__c)&&n.__c)return n.__c(t,e.__c)}Qd(t,e,r)},(Bn.prototype=new Nt).__c=function(t,e){var r=this;r.o==null&&(r.o=[]),r.o.push(e);var n=_u(r.__v),i=!1,o=function(){i||(i=!0,n?n(c):c())};e.__c=e.componentWillUnmount,e.componentWillUnmount=function(){o(),e.__c&&e.__c()};var c=function(){var s;if(!--r.__u)for(r.__v.__k[0]=r.state.u,r.setState({u:r.__b=null});s=r.o.pop();)s.forceUpdate()};r.__u++||r.setState({u:r.__b=r.__v.__k[0]}),t.then(o,o)},Bn.prototype.render=function(t,e){return this.__b&&(this.__v.__k[0]=pu(this.__b),this.__b=null),[Vt(Nt,null,e.u?null:t.children),e.u&&t.fallback]};var As=function(t,e,r){if(++r[1]===r[0]&&t.l.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.l.size))for(r=t.i;r;){for(;r.length>3;)r.pop()();if(r[1]<r[0])break;t.i=r=r[2]}};(Cr.prototype=new Nt).u=function(t){var e=this,r=_u(e.__v),n=e.l.get(t);return n[0]++,function(i){var o=function(){e.props.revealOrder?(n.push(i),As(e,t,n)):i()};r?r(o):o()}},Cr.prototype.render=function(t){this.i=null,this.l=new Map;var e=Zt(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var r=e.length;r--;)this.l.set(e[r],this.i=[1,0,this.i]);return t.children},Cr.prototype.componentDidUpdate=Cr.prototype.componentDidMount=function(){var t=this;t.l.forEach(function(e,r){As(t,r,e)})};var Zd=function(){function t(){}var e=t.prototype;return e.getChildContext=function(){return this.props.context},e.render=function(r){return r.children},t}();function eg(t){var e=this,r=t.container,n=Vt(Zd,{context:e.context},t.vnode);return e.s&&e.s!==r&&(e.v.parentNode&&e.s.removeChild(e.v),tn(e.h),e.p=!1),t.vnode?e.p?(r.__k=e.__k,an(n,r),e.__k=r.__k):(e.v=document.createTextNode(""),ru("",r),r.appendChild(e.v),e.p=!0,e.s=r,an(n,r,e.v),e.__k=e.v.__k):e.p&&(e.v.parentNode&&e.s.removeChild(e.v),tn(e.h)),e.h=n,e.componentWillUnmount=function(){e.v.parentNode&&e.s.removeChild(e.v),tn(e.h)},null}function mu(t,e){return Vt(eg,{vnode:t,container:e})}var Ns=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/;Nt.prototype.isReactComponent={};var vu=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103;function Gi(t,e,r){if(e.__k==null)for(;e.firstChild;)e.removeChild(e.firstChild);return an(t,e),typeof r=="function"&&r(),t?t.__c:null}function tg(t,e,r){return ru(t,e),typeof r=="function"&&r(),t?t.__c:null}var Rs=re.event;function wi(t,e){t["UNSAFE_"+e]&&!t[e]&&Object.defineProperty(t,e,{configurable:!1,get:function(){return this["UNSAFE_"+e]},set:function(r){this["UNSAFE_"+e]=r}})}re.event=function(t){Rs&&(t=Rs(t)),t.persist=function(){};var e=!1,r=!1,n=t.stopPropagation;t.stopPropagation=function(){n.call(t),e=!0};var i=t.preventDefault;return t.preventDefault=function(){i.call(t),r=!0},t.isPropagationStopped=function(){return e},t.isDefaultPrevented=function(){return r},t.nativeEvent=t};var Ps={configurable:!0,get:function(){return this.class}},Ls=re.vnode;re.vnode=function(t){t.$$typeof=vu;var e=t.type,r=t.props;if(e){if(r.class!=r.className&&(Ps.enumerable="className"in r,r.className!=null&&(r.class=r.className),Object.defineProperty(r,"className",Ps)),typeof e!="function"){var n,i,o;for(o in r.defaultValue&&r.value!==void 0&&(r.value||r.value===0||(r.value=r.defaultValue),delete r.defaultValue),Array.isArray(r.value)&&r.multiple&&e==="select"&&(Zt(r.children).forEach(function(c){r.value.indexOf(c.props.value)!=-1&&(c.props.selected=!0)}),delete r.value),r)if(n=Ns.test(o))break;if(n)for(o in i=t.props={},r)i[Ns.test(o)?o.replace(/[A-Z0-9]/,"-$&").toLowerCase():o]=r[o]}(function(c){var s=t.type,u=t.props;if(u&&typeof s=="string"){var h={};for(var f in u)/^on(Ani|Tra|Tou)/.test(f)&&(u[f.toLowerCase()]=u[f],delete u[f]),h[f.toLowerCase()]=f;if(h.ondoubleclick&&(u.ondblclick=u[h.ondoubleclick],delete u[h.ondoubleclick]),h.onbeforeinput&&(u.onbeforeinput=u[h.onbeforeinput],delete u[h.onbeforeinput]),h.onchange&&(s==="textarea"||s.toLowerCase()==="input"&&!/^fil|che|ra/i.test(u.type))){var _=h.oninput||"oninput";u[_]||(u[_]=u[h.onchange],delete u[h.onchange])}}})(),typeof e=="function"&&!e.m&&e.prototype&&(wi(e.prototype,"componentWillMount"),wi(e.prototype,"componentWillReceiveProps"),wi(e.prototype,"componentWillUpdate"),e.m=!0)}Ls&&Ls(t)};var rg="16.8.0";function wu(t){return Vt.bind(null,t)}function Io(t){return!!t&&t.$$typeof===vu}function bu(t){return Io(t)?Yd.apply(null,arguments):t}function Eu(t){return!!t.__k&&(an(null,t),!0)}function Du(t){return t&&(t.base||t.nodeType===1&&t)||null}var Su=function(t,e){return t(e)};const ng={useState:So,useReducer:xo,useEffect:iu,useLayoutEffect:Co,useRef:ou,useImperativeHandle:su,useMemo:Zn,useCallback:au,useContext:cu,useDebugValue:uu,version:"16.8.0",Children:gu,render:Gi,hydrate:Gi,unmountComponentAtNode:Eu,createPortal:mu,createElement:Vt,createContext:nu,createFactory:wu,cloneElement:bu,createRef:Xc,Fragment:dn,isValidElement:Io,findDOMNode:Du,Component:Nt,PureComponent:fu,memo:hu,forwardRef:du,unstable_batchedUpdates:Su,Suspense:Bn,SuspenseList:Cr,lazy:yu},ig=Object.freeze(Object.defineProperty({__proto__:null,Children:gu,Component:Nt,Fragment:dn,PureComponent:fu,Suspense:Bn,SuspenseList:Cr,cloneElement:bu,createContext:nu,createElement:Vt,createFactory:wu,createPortal:mu,createRef:Xc,default:ng,findDOMNode:Du,forwardRef:du,hydrate:tg,isValidElement:Io,lazy:yu,memo:hu,render:Gi,unmountComponentAtNode:Eu,unstable_batchedUpdates:Su,useCallback:au,useContext:cu,useDebugValue:uu,useEffect:iu,useErrorBoundary:Jd,useImperativeHandle:su,useLayoutEffect:Co,useMemo:Zn,useReducer:xo,useRef:ou,useState:So,version:rg},Symbol.toStringTag,{value:"Module"})),og=lo(ig);function xu(t){return t&&typeof t=="object"&&"default"in t?t.default:t}var lt=Uh,Cu=xu(fn),sg=xu(qd),Y=og;function ag(t){Cu.toString(t,{type:"terminal"}).then(console.log)}var cg=`:root {
  --animation-duration: 300ms;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes fadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

.animated {
  animation-duration: var(--animation-duration);
  animation-fill-mode: both;
}

.fadeIn {
  animation-name: fadeIn;
}

.fadeOut {
  animation-name: fadeOut;
}

#walletconnect-wrapper {
  -webkit-user-select: none;
  align-items: center;
  display: flex;
  height: 100%;
  justify-content: center;
  left: 0;
  pointer-events: none;
  position: fixed;
  top: 0;
  user-select: none;
  width: 100%;
  z-index: 99999999999999;
}

.walletconnect-modal__headerLogo {
  height: 21px;
}

.walletconnect-modal__header p {
  color: #ffffff;
  font-size: 20px;
  font-weight: 600;
  margin: 0;
  align-items: flex-start;
  display: flex;
  flex: 1;
  margin-left: 5px;
}

.walletconnect-modal__close__wrapper {
  position: absolute;
  top: 0px;
  right: 0px;
  z-index: 10000;
  background: white;
  border-radius: 26px;
  padding: 6px;
  box-sizing: border-box;
  width: 26px;
  height: 26px;
  cursor: pointer;
}

.walletconnect-modal__close__icon {
  position: relative;
  top: 7px;
  right: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  transform: rotate(45deg);
}

.walletconnect-modal__close__line1 {
  position: absolute;
  width: 100%;
  border: 1px solid rgb(48, 52, 59);
}

.walletconnect-modal__close__line2 {
  position: absolute;
  width: 100%;
  border: 1px solid rgb(48, 52, 59);
  transform: rotate(90deg);
}

.walletconnect-qrcode__base {
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
  background: rgba(37, 41, 46, 0.95);
  height: 100%;
  left: 0;
  pointer-events: auto;
  position: fixed;
  top: 0;
  transition: 0.4s cubic-bezier(0.19, 1, 0.22, 1);
  width: 100%;
  will-change: opacity;
  padding: 40px;
  box-sizing: border-box;
}

.walletconnect-qrcode__text {
  color: rgba(60, 66, 82, 0.6);
  font-size: 16px;
  font-weight: 600;
  letter-spacing: 0;
  line-height: 1.1875em;
  margin: 10px 0 20px 0;
  text-align: center;
  width: 100%;
}

@media only screen and (max-width: 768px) {
  .walletconnect-qrcode__text {
    font-size: 4vw;
  }
}

@media only screen and (max-width: 320px) {
  .walletconnect-qrcode__text {
    font-size: 14px;
  }
}

.walletconnect-qrcode__image {
  width: calc(100% - 30px);
  box-sizing: border-box;
  cursor: none;
  margin: 0 auto;
}

.walletconnect-qrcode__notification {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  font-size: 16px;
  padding: 16px 20px;
  border-radius: 16px;
  text-align: center;
  transition: all 0.1s ease-in-out;
  background: white;
  color: black;
  margin-bottom: -60px;
  opacity: 0;
}

.walletconnect-qrcode__notification.notification__show {
  opacity: 1;
}

@media only screen and (max-width: 768px) {
  .walletconnect-modal__header {
    height: 130px;
  }
  .walletconnect-modal__base {
    overflow: auto;
  }
}

@media only screen and (min-device-width: 415px) and (max-width: 768px) {
  #content {
    max-width: 768px;
    box-sizing: border-box;
  }
}

@media only screen and (min-width: 375px) and (max-width: 415px) {
  #content {
    max-width: 414px;
    box-sizing: border-box;
  }
}

@media only screen and (min-width: 320px) and (max-width: 375px) {
  #content {
    max-width: 375px;
    box-sizing: border-box;
  }
}

@media only screen and (max-width: 320px) {
  #content {
    max-width: 320px;
    box-sizing: border-box;
  }
}

.walletconnect-modal__base {
  -webkit-font-smoothing: antialiased;
  background: #ffffff;
  border-radius: 24px;
  box-shadow: 0 10px 50px 5px rgba(0, 0, 0, 0.4);
  font-family: ui-rounded, "SF Pro Rounded", "SF Pro Text", medium-content-sans-serif-font,
    -apple-system, BlinkMacSystemFont, ui-sans-serif, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell,
    "Open Sans", "Helvetica Neue", sans-serif;
  margin-top: 41px;
  padding: 24px 24px 22px;
  pointer-events: auto;
  position: relative;
  text-align: center;
  transition: 0.4s cubic-bezier(0.19, 1, 0.22, 1);
  will-change: transform;
  overflow: visible;
  transform: translateY(-50%);
  top: 50%;
  max-width: 500px;
  margin: auto;
}

@media only screen and (max-width: 320px) {
  .walletconnect-modal__base {
    padding: 24px 12px;
  }
}

.walletconnect-modal__base .hidden {
  transform: translateY(150%);
  transition: 0.125s cubic-bezier(0.4, 0, 1, 1);
}

.walletconnect-modal__header {
  align-items: center;
  display: flex;
  height: 26px;
  left: 0;
  justify-content: space-between;
  position: absolute;
  top: -42px;
  width: 100%;
}

.walletconnect-modal__base .wc-logo {
  align-items: center;
  display: flex;
  height: 26px;
  margin-top: 15px;
  padding-bottom: 15px;
  pointer-events: auto;
}

.walletconnect-modal__base .wc-logo div {
  background-color: #3399ff;
  height: 21px;
  margin-right: 5px;
  mask-image: url("images/wc-logo.svg") center no-repeat;
  width: 32px;
}

.walletconnect-modal__base .wc-logo p {
  color: #ffffff;
  font-size: 20px;
  font-weight: 600;
  margin: 0;
}

.walletconnect-modal__base h2 {
  color: rgba(60, 66, 82, 0.6);
  font-size: 16px;
  font-weight: 600;
  letter-spacing: 0;
  line-height: 1.1875em;
  margin: 0 0 19px 0;
  text-align: center;
  width: 100%;
}

.walletconnect-modal__base__row {
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
  align-items: center;
  border-radius: 20px;
  cursor: pointer;
  display: flex;
  height: 56px;
  justify-content: space-between;
  padding: 0 15px;
  position: relative;
  margin: 0px 0px 8px;
  text-align: left;
  transition: 0.15s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  will-change: transform;
  text-decoration: none;
}

.walletconnect-modal__base__row:hover {
  background: rgba(60, 66, 82, 0.06);
}

.walletconnect-modal__base__row:active {
  background: rgba(60, 66, 82, 0.06);
  transform: scale(0.975);
  transition: 0.1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.walletconnect-modal__base__row__h3 {
  color: #25292e;
  font-size: 20px;
  font-weight: 700;
  margin: 0;
  padding-bottom: 3px;
}

.walletconnect-modal__base__row__right {
  align-items: center;
  display: flex;
  justify-content: center;
}

.walletconnect-modal__base__row__right__app-icon {
  border-radius: 8px;
  height: 34px;
  margin: 0 11px 2px 0;
  width: 34px;
  background-size: 100%;
  box-shadow: 0 4px 12px 0 rgba(37, 41, 46, 0.25);
}

.walletconnect-modal__base__row__right__caret {
  height: 18px;
  opacity: 0.3;
  transition: 0.1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  width: 8px;
  will-change: opacity;
}

.walletconnect-modal__base__row:hover .caret,
.walletconnect-modal__base__row:active .caret {
  opacity: 0.6;
}

.walletconnect-modal__mobile__toggle {
  width: 80%;
  display: flex;
  margin: 0 auto;
  position: relative;
  overflow: hidden;
  border-radius: 8px;
  margin-bottom: 18px;
  background: #d4d5d9;
}

.walletconnect-modal__single_wallet {
  display: flex;
  justify-content: center;
  margin-top: 7px;
  margin-bottom: 18px;
}

.walletconnect-modal__single_wallet a {
  cursor: pointer;
  color: rgb(64, 153, 255);
  font-size: 21px;
  font-weight: 800;
  text-decoration: none !important;
  margin: 0 auto;
}

.walletconnect-modal__mobile__toggle_selector {
  width: calc(50% - 8px);
  background: white;
  position: absolute;
  border-radius: 5px;
  height: calc(100% - 8px);
  top: 4px;
  transition: all 0.2s ease-in-out;
  transform: translate3d(4px, 0, 0);
}

.walletconnect-modal__mobile__toggle.right__selected .walletconnect-modal__mobile__toggle_selector {
  transform: translate3d(calc(100% + 12px), 0, 0);
}

.walletconnect-modal__mobile__toggle a {
  font-size: 12px;
  width: 50%;
  text-align: center;
  padding: 8px;
  margin: 0;
  font-weight: 600;
  z-index: 1;
}

.walletconnect-modal__footer {
  display: flex;
  justify-content: center;
  margin-top: 20px;
}

@media only screen and (max-width: 768px) {
  .walletconnect-modal__footer {
    margin-top: 5vw;
  }
}

.walletconnect-modal__footer a {
  cursor: pointer;
  color: #898d97;
  font-size: 15px;
  margin: 0 auto;
}

@media only screen and (max-width: 320px) {
  .walletconnect-modal__footer a {
    font-size: 14px;
  }
}

.walletconnect-connect__buttons__wrapper {
  max-height: 44vh;
}

.walletconnect-connect__buttons__wrapper__android {
  margin: 50% 0;
}

.walletconnect-connect__buttons__wrapper__wrap {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  margin: 10px 0;
}

@media only screen and (min-width: 768px) {
  .walletconnect-connect__buttons__wrapper__wrap {
    margin-top: 40px;
  }
}

.walletconnect-connect__button {
  background-color: rgb(64, 153, 255);
  padding: 12px;
  border-radius: 8px;
  text-decoration: none;
  color: rgb(255, 255, 255);
  font-weight: 500;
}

.walletconnect-connect__button__icon_anchor {
  cursor: pointer;
  display: flex;
  justify-content: flex-start;
  align-items: center;
  margin: 8px;
  width: 42px;
  justify-self: center;
  flex-direction: column;
  text-decoration: none !important;
}

@media only screen and (max-width: 320px) {
  .walletconnect-connect__button__icon_anchor {
    margin: 4px;
  }
}

.walletconnect-connect__button__icon {
  border-radius: 10px;
  height: 42px;
  margin: 0;
  width: 42px;
  background-size: cover !important;
  box-shadow: 0 4px 12px 0 rgba(37, 41, 46, 0.25);
}

.walletconnect-connect__button__text {
  color: #424952;
  font-size: 2.7vw;
  text-decoration: none !important;
  padding: 0;
  margin-top: 1.8vw;
  font-weight: 600;
}

@media only screen and (min-width: 768px) {
  .walletconnect-connect__button__text {
    font-size: 16px;
    margin-top: 12px;
  }
}

.walletconnect-search__input {
  border: none;
  background: #d4d5d9;
  border-style: none;
  padding: 8px 16px;
  outline: none;
  font-style: normal;
  font-stretch: normal;
  font-size: 16px;
  font-style: normal;
  font-stretch: normal;
  line-height: normal;
  letter-spacing: normal;
  text-align: left;
  border-radius: 8px;
  width: calc(100% - 16px);
  margin: 0;
  margin-bottom: 8px;
}
`;typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")));typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));function ug(t,e){try{var r=t()}catch(n){return e(n)}return r&&r.then?r.then(void 0,e):r}var lg="data:image/svg+xml,%3Csvg height='185' viewBox='0 0 300 185' width='300' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='m61.4385429 36.2562612c48.9112241-47.8881663 128.2119871-47.8881663 177.1232091 0l5.886545 5.7634174c2.445561 2.3944081 2.445561 6.2765112 0 8.6709204l-20.136695 19.715503c-1.222781 1.1972051-3.2053 1.1972051-4.428081 0l-8.100584-7.9311479c-34.121692-33.4079817-89.443886-33.4079817-123.5655788 0l-8.6750562 8.4936051c-1.2227816 1.1972041-3.205301 1.1972041-4.4280806 0l-20.1366949-19.7155031c-2.4455612-2.3944092-2.4455612-6.2765122 0-8.6709204zm218.7677961 40.7737449 17.921697 17.546897c2.445549 2.3943969 2.445563 6.2764769.000031 8.6708899l-80.810171 79.121134c-2.445544 2.394426-6.410582 2.394453-8.85616.000062-.00001-.00001-.000022-.000022-.000032-.000032l-57.354143-56.154572c-.61139-.598602-1.60265-.598602-2.21404 0-.000004.000004-.000007.000008-.000011.000011l-57.3529212 56.154531c-2.4455368 2.394432-6.4105755 2.394472-8.8561612.000087-.0000143-.000014-.0000296-.000028-.0000449-.000044l-80.81241943-79.122185c-2.44556021-2.394408-2.44556021-6.2765115 0-8.6709197l17.92172963-17.5468673c2.4455602-2.3944082 6.4105989-2.3944082 8.8561602 0l57.3549775 56.155357c.6113908.598602 1.602649.598602 2.2140398 0 .0000092-.000009.0000174-.000017.0000265-.000024l57.3521031-56.155333c2.445505-2.3944633 6.410544-2.3945531 8.856161-.0002.000034.0000336.000068.0000673.000101.000101l57.354902 56.155432c.61139.598601 1.60265.598601 2.21404 0l57.353975-56.1543249c2.445561-2.3944092 6.410599-2.3944092 8.85616 0z' fill='%233b99fc'/%3E%3C/svg%3E",fg="WalletConnect",hg=300,dg="rgb(64, 153, 255)",Ou="walletconnect-wrapper",Fs="walletconnect-style-sheet",Tu="walletconnect-qrcode-modal",gg="walletconnect-qrcode-close",Iu="walletconnect-qrcode-text",pg="walletconnect-connect-button";function _g(t){return Y.createElement("div",{className:"walletconnect-modal__header"},Y.createElement("img",{src:lg,className:"walletconnect-modal__headerLogo"}),Y.createElement("p",null,fg),Y.createElement("div",{className:"walletconnect-modal__close__wrapper",onClick:t.onClose},Y.createElement("div",{id:gg,className:"walletconnect-modal__close__icon"},Y.createElement("div",{className:"walletconnect-modal__close__line1"}),Y.createElement("div",{className:"walletconnect-modal__close__line2"}))))}function yg(t){return Y.createElement("a",{className:"walletconnect-connect__button",href:t.href,id:pg+"-"+t.name,onClick:t.onClick,rel:"noopener noreferrer",style:{backgroundColor:t.color},target:"_blank"},t.name)}var mg="data:image/svg+xml,%3Csvg fill='none' height='18' viewBox='0 0 8 18' width='8' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath clip-rule='evenodd' d='m.586301.213898c-.435947.33907-.5144813.967342-.175411 1.403292l4.87831 6.27212c.28087.36111.28087.86677 0 1.22788l-4.878311 6.27211c-.33907.436-.260536 1.0642.175412 1.4033.435949.3391 1.064219.2605 1.403289-.1754l4.87832-6.2721c.84259-1.08336.84259-2.60034 0-3.68367l-4.87832-6.27212c-.33907-.4359474-.96734-.514482-1.403289-.175412z' fill='%233c4252' fill-rule='evenodd'/%3E%3C/svg%3E";function vg(t){var e=t.color,r=t.href,n=t.name,i=t.logo,o=t.onClick;return Y.createElement("a",{className:"walletconnect-modal__base__row",href:r,onClick:o,rel:"noopener noreferrer",target:"_blank"},Y.createElement("h3",{className:"walletconnect-modal__base__row__h3"},n),Y.createElement("div",{className:"walletconnect-modal__base__row__right"},Y.createElement("div",{className:"walletconnect-modal__base__row__right__app-icon",style:{background:"url('"+i+"') "+e,backgroundSize:"100%"}}),Y.createElement("img",{src:mg,className:"walletconnect-modal__base__row__right__caret"})))}function wg(t){var e=t.color,r=t.href,n=t.name,i=t.logo,o=t.onClick,c=window.innerWidth<768?(n.length>8?2.5:2.7)+"vw":"inherit";return Y.createElement("a",{className:"walletconnect-connect__button__icon_anchor",href:r,onClick:o,rel:"noopener noreferrer",target:"_blank"},Y.createElement("div",{className:"walletconnect-connect__button__icon",style:{background:"url('"+i+"') "+e,backgroundSize:"100%"}}),Y.createElement("div",{style:{fontSize:c},className:"walletconnect-connect__button__text"},n))}var bg=5,bi=12;function Eg(t){var e=lt.isAndroid(),r=Y.useState(""),n=r[0],i=r[1],o=Y.useState(""),c=o[0],s=o[1],u=Y.useState(1),h=u[0],f=u[1],_=c?t.links.filter(function(d){return d.name.toLowerCase().includes(c.toLowerCase())}):t.links,O=t.errorMessage,v=c||_.length>bg,m=Math.ceil(_.length/bi),I=[(h-1)*bi+1,h*bi],x=_.length?_.filter(function(d,b){return b+1>=I[0]&&b+1<=I[1]}):[],R=!e&&m>1,p=void 0;function w(d){i(d.target.value),clearTimeout(p),d.target.value?p=setTimeout(function(){s(d.target.value),f(1)},1e3):(i(""),s(""),f(1))}return Y.createElement("div",null,Y.createElement("p",{id:Iu,className:"walletconnect-qrcode__text"},e?t.text.connect_mobile_wallet:t.text.choose_preferred_wallet),!e&&Y.createElement("input",{className:"walletconnect-search__input",placeholder:"Search",value:n,onChange:w}),Y.createElement("div",{className:"walletconnect-connect__buttons__wrapper"+(e?"__android":v&&_.length?"__wrap":"")},e?Y.createElement(yg,{name:t.text.connect,color:dg,href:t.uri,onClick:Y.useCallback(function(){lt.saveMobileLinkInfo({name:"Unknown",href:t.uri})},[])}):x.length?x.map(function(d){var b=d.color,E=d.name,a=d.shortName,g=d.logo,B=lt.formatIOSMobile(t.uri,d),C=Y.useCallback(function(){lt.saveMobileLinkInfo({name:E,href:B})},[x]);return v?Y.createElement(wg,{color:b,href:B,name:a||E,logo:g,onClick:C}):Y.createElement(vg,{color:b,href:B,name:E,logo:g,onClick:C})}):Y.createElement(Y.Fragment,null,Y.createElement("p",null,O.length?t.errorMessage:t.links.length&&!_.length?t.text.no_wallets_found:t.text.loading))),R&&Y.createElement("div",{className:"walletconnect-modal__footer"},Array(m).fill(0).map(function(d,b){var E=b+1,a=h===E;return Y.createElement("a",{style:{margin:"auto 10px",fontWeight:a?"bold":"normal"},onClick:function(){return f(E)}},E)})))}function Dg(t){var e=!!t.message.trim();return Y.createElement("div",{className:"walletconnect-qrcode__notification"+(e?" notification__show":"")},t.message)}var Sg=function(t){try{var e="";return Promise.resolve(Cu.toString(t,{margin:0,type:"svg"})).then(function(r){return typeof r=="string"&&(e=r.replace("<svg",'<svg class="walletconnect-qrcode__image"')),e})}catch(r){return Promise.reject(r)}};function xg(t){var e=Y.useState(""),r=e[0],n=e[1],i=Y.useState(""),o=i[0],c=i[1];Y.useEffect(function(){try{return Promise.resolve(Sg(t.uri)).then(function(u){c(u)})}catch(u){Promise.reject(u)}},[]);var s=function(){var u=sg(t.uri);u?(n(t.text.copied_to_clipboard),setInterval(function(){return n("")},1200)):(n("Error"),setInterval(function(){return n("")},1200))};return Y.createElement("div",null,Y.createElement("p",{id:Iu,className:"walletconnect-qrcode__text"},t.text.scan_qrcode_with_wallet),Y.createElement("div",{dangerouslySetInnerHTML:{__html:o}}),Y.createElement("div",{className:"walletconnect-modal__footer"},Y.createElement("a",{onClick:s},t.text.copy_to_clipboard)),Y.createElement(Dg,{message:r}))}function Cg(t){var e=lt.isAndroid(),r=lt.isMobile(),n=r?t.qrcodeModalOptions&&t.qrcodeModalOptions.mobileLinks?t.qrcodeModalOptions.mobileLinks:void 0:t.qrcodeModalOptions&&t.qrcodeModalOptions.desktopLinks?t.qrcodeModalOptions.desktopLinks:void 0,i=Y.useState(!1),o=i[0],c=i[1],s=Y.useState(!1),u=s[0],h=s[1],f=Y.useState(!r),_=f[0],O=f[1],v={mobile:r,text:t.text,uri:t.uri,qrcodeModalOptions:t.qrcodeModalOptions},m=Y.useState(""),I=m[0],x=m[1],R=Y.useState(!1),p=R[0],w=R[1],d=Y.useState([]),b=d[0],E=d[1],a=Y.useState(""),g=a[0],B=a[1],C=function(){u||o||n&&!n.length||b.length>0||Y.useEffect(function(){var M=function(){try{if(e)return Promise.resolve();c(!0);var $=ug(function(){var T=t.qrcodeModalOptions&&t.qrcodeModalOptions.registryUrl?t.qrcodeModalOptions.registryUrl:lt.getWalletRegistryUrl();return Promise.resolve(fetch(T)).then(function(S){return Promise.resolve(S.json()).then(function(H){var z=H.listings,k=r?"mobile":"desktop",U=lt.getMobileLinkRegistry(lt.formatMobileRegistry(z,k),n);c(!1),h(!0),B(U.length?"":t.text.no_supported_wallets),E(U);var j=U.length===1;j&&(x(lt.formatIOSMobile(t.uri,U[0])),O(!0)),w(j)})})},function(T){c(!1),h(!0),B(t.text.something_went_wrong),console.error(T)});return Promise.resolve($&&$.then?$.then(function(){}):void 0)}catch(T){return Promise.reject(T)}};M()})};C();var F=r?_:!_;return Y.createElement("div",{id:Tu,className:"walletconnect-qrcode__base animated fadeIn"},Y.createElement("div",{className:"walletconnect-modal__base"},Y.createElement(_g,{onClose:t.onClose}),p&&_?Y.createElement("div",{className:"walletconnect-modal__single_wallet"},Y.createElement("a",{onClick:function(){return lt.saveMobileLinkInfo({name:b[0].name,href:I})},href:I,rel:"noopener noreferrer",target:"_blank"},t.text.connect_with+" "+(p?b[0].name:"")+" ›")):e||o||!o&&b.length?Y.createElement("div",{className:"walletconnect-modal__mobile__toggle"+(F?" right__selected":"")},Y.createElement("div",{className:"walletconnect-modal__mobile__toggle_selector"}),r?Y.createElement(Y.Fragment,null,Y.createElement("a",{onClick:function(){return O(!1),C()}},t.text.mobile),Y.createElement("a",{onClick:function(){return O(!0)}},t.text.qrcode)):Y.createElement(Y.Fragment,null,Y.createElement("a",{onClick:function(){return O(!0)}},t.text.qrcode),Y.createElement("a",{onClick:function(){return O(!1),C()}},t.text.desktop))):null,Y.createElement("div",null,_||!e&&!o&&!b.length?Y.createElement(xg,Object.assign({},v)):Y.createElement(Eg,Object.assign({},v,{links:b,errorMessage:g})))))}var Og={choose_preferred_wallet:"Wähle bevorzugte Wallet",connect_mobile_wallet:"Verbinde mit Mobile Wallet",scan_qrcode_with_wallet:"Scanne den QR-code mit einer WalletConnect kompatiblen Wallet",connect:"Verbinden",qrcode:"QR-Code",mobile:"Mobile",desktop:"Desktop",copy_to_clipboard:"In die Zwischenablage kopieren",copied_to_clipboard:"In die Zwischenablage kopiert!",connect_with:"Verbinden mit Hilfe von",loading:"Laden...",something_went_wrong:"Etwas ist schief gelaufen",no_supported_wallets:"Es gibt noch keine unterstützten Wallet",no_wallets_found:"keine Wallet gefunden"},Tg={choose_preferred_wallet:"Choose your preferred wallet",connect_mobile_wallet:"Connect to Mobile Wallet",scan_qrcode_with_wallet:"Scan QR code with a WalletConnect-compatible wallet",connect:"Connect",qrcode:"QR Code",mobile:"Mobile",desktop:"Desktop",copy_to_clipboard:"Copy to clipboard",copied_to_clipboard:"Copied to clipboard!",connect_with:"Connect with",loading:"Loading...",something_went_wrong:"Something went wrong",no_supported_wallets:"There are no supported wallets yet",no_wallets_found:"No wallets found"},Ig={choose_preferred_wallet:"Elige tu billetera preferida",connect_mobile_wallet:"Conectar a billetera móvil",scan_qrcode_with_wallet:"Escanea el código QR con una billetera compatible con WalletConnect",connect:"Conectar",qrcode:"Código QR",mobile:"Móvil",desktop:"Desktop",copy_to_clipboard:"Copiar",copied_to_clipboard:"Copiado!",connect_with:"Conectar mediante",loading:"Cargando...",something_went_wrong:"Algo salió mal",no_supported_wallets:"Todavía no hay billeteras compatibles",no_wallets_found:"No se encontraron billeteras"},Ag={choose_preferred_wallet:"Choisissez votre portefeuille préféré",connect_mobile_wallet:"Se connecter au portefeuille mobile",scan_qrcode_with_wallet:"Scannez le QR code avec un portefeuille compatible WalletConnect",connect:"Se connecter",qrcode:"QR Code",mobile:"Mobile",desktop:"Desktop",copy_to_clipboard:"Copier",copied_to_clipboard:"Copié!",connect_with:"Connectez-vous à l'aide de",loading:"Chargement...",something_went_wrong:"Quelque chose a mal tourné",no_supported_wallets:"Il n'y a pas encore de portefeuilles pris en charge",no_wallets_found:"Aucun portefeuille trouvé"},Ng={choose_preferred_wallet:"원하는 지갑을 선택하세요",connect_mobile_wallet:"모바일 지갑과 연결",scan_qrcode_with_wallet:"WalletConnect 지원 지갑에서 QR코드를 스캔하세요",connect:"연결",qrcode:"QR 코드",mobile:"모바일",desktop:"데스크탑",copy_to_clipboard:"클립보드에 복사",copied_to_clipboard:"클립보드에 복사되었습니다!",connect_with:"와 연결하다",loading:"로드 중...",something_went_wrong:"문제가 발생했습니다.",no_supported_wallets:"아직 지원되는 지갑이 없습니다",no_wallets_found:"지갑을 찾을 수 없습니다"},Rg={choose_preferred_wallet:"Escolha sua carteira preferida",connect_mobile_wallet:"Conectar-se à carteira móvel",scan_qrcode_with_wallet:"Ler o código QR com uma carteira compatível com WalletConnect",connect:"Conectar",qrcode:"Código QR",mobile:"Móvel",desktop:"Desktop",copy_to_clipboard:"Copiar",copied_to_clipboard:"Copiado!",connect_with:"Ligar por meio de",loading:"Carregamento...",something_went_wrong:"Algo correu mal",no_supported_wallets:"Ainda não há carteiras suportadas",no_wallets_found:"Nenhuma carteira encontrada"},Pg={choose_preferred_wallet:"选择你的钱包",connect_mobile_wallet:"连接至移动端钱包",scan_qrcode_with_wallet:"使用兼容 WalletConnect 的钱包扫描二维码",connect:"连接",qrcode:"二维码",mobile:"移动",desktop:"桌面",copy_to_clipboard:"复制到剪贴板",copied_to_clipboard:"复制到剪贴板成功！",connect_with:"通过以下方式连接",loading:"正在加载...",something_went_wrong:"出了问题",no_supported_wallets:"目前还没有支持的钱包",no_wallets_found:"没有找到钱包"},Lg={choose_preferred_wallet:"کیف پول مورد نظر خود را انتخاب کنید",connect_mobile_wallet:"به کیف پول موبایل وصل شوید",scan_qrcode_with_wallet:"کد QR را با یک کیف پول سازگار با WalletConnect اسکن کنید",connect:"اتصال",qrcode:"کد QR",mobile:"سیار",desktop:"دسکتاپ",copy_to_clipboard:"کپی به کلیپ بورد",copied_to_clipboard:"در کلیپ بورد کپی شد!",connect_with:"ارتباط با",loading:"...بارگذاری",something_went_wrong:"مشکلی پیش آمد",no_supported_wallets:"هنوز هیچ کیف پول پشتیبانی شده ای وجود ندارد",no_wallets_found:"هیچ کیف پولی پیدا نشد"},Ms={de:Og,en:Tg,es:Ig,fr:Ag,ko:Ng,pt:Rg,zh:Pg,fa:Lg};function Fg(){var t=lt.getDocumentOrThrow(),e=t.getElementById(Fs);e&&t.head.removeChild(e);var r=t.createElement("style");r.setAttribute("id",Fs),r.innerText=cg,t.head.appendChild(r)}function Mg(){var t=lt.getDocumentOrThrow(),e=t.createElement("div");return e.setAttribute("id",Ou),t.body.appendChild(e),e}function Au(){var t=lt.getDocumentOrThrow(),e=t.getElementById(Tu);e&&(e.className=e.className.replace("fadeIn","fadeOut"),setTimeout(function(){var r=t.getElementById(Ou);r&&t.body.removeChild(r)},hg))}function Ug(t){return function(){Au(),t&&t()}}function $g(){var t=lt.getNavigatorOrThrow().language.split("-")[0]||"en";return Ms[t]||Ms.en}function Bg(t,e,r){Fg();var n=Mg();Y.render(Y.createElement(Cg,{text:$g(),uri:t,onClose:Ug(e),qrcodeModalOptions:r}),n)}function kg(){Au()}var Nu=function(){return typeof it<"u"&&typeof it.versions<"u"&&typeof it.versions.node<"u"};function zg(t,e,r){console.log(t),Nu()?ag(t):Bg(t,e,r)}function jg(){Nu()||kg()}var qg={open:zg,close:jg},Us=qg;function Hg(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var Kg=Vg;function Vg(t,e,r){var n=r&&r.stringify||Hg,i=1;if(typeof t=="object"&&t!==null){var o=e.length+i;if(o===1)return t;var c=new Array(o);c[0]=n(t);for(var s=1;s<o;s++)c[s]=n(e[s]);return c.join(" ")}if(typeof t!="string")return t;var u=e.length;if(u===0)return t;for(var h="",f=1-i,_=-1,O=t&&t.length||0,v=0;v<O;){if(t.charCodeAt(v)===37&&v+1<O){switch(_=_>-1?_:0,t.charCodeAt(v+1)){case 100:case 102:if(f>=u||e[f]==null)break;_<v&&(h+=t.slice(_,v)),h+=Number(e[f]),_=v+2,v++;break;case 105:if(f>=u||e[f]==null)break;_<v&&(h+=t.slice(_,v)),h+=Math.floor(Number(e[f])),_=v+2,v++;break;case 79:case 111:case 106:if(f>=u||e[f]===void 0)break;_<v&&(h+=t.slice(_,v));var m=typeof e[f];if(m==="string"){h+="'"+e[f]+"'",_=v+2,v++;break}if(m==="function"){h+=e[f].name||"<anonymous>",_=v+2,v++;break}h+=n(e[f]),_=v+2,v++;break;case 115:if(f>=u)break;_<v&&(h+=t.slice(_,v)),h+=String(e[f]),_=v+2,v++;break;case 37:_<v&&(h+=t.slice(_,v)),h+="%",_=v+2,v++,f--;break}++f}++v}return _===-1?t:(_<O&&(h+=t.slice(_)),h)}const $s=Kg;var ei=Ut;const cn=rp().console||{},Wg={mapHttpRequest:In,mapHttpResponse:In,wrapRequestSerializer:Ei,wrapResponseSerializer:Ei,wrapErrorSerializer:Ei,req:In,res:In,err:Qg};function Gg(t,e){return Array.isArray(t)?t.filter(function(n){return n!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function Ut(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const r=t.browser.write||cn;t.browser.write&&(t.browser.asObject=!0);const n=t.serializers||{},i=Gg(t.browser.serialize,n);let o=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(o=!1);const c=["error","fatal","warn","info","debug","trace"];typeof r=="function"&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),t.enabled===!1&&(t.level="silent");const s=t.level||"info",u=Object.create(r);u.log||(u.log=un),Object.defineProperty(u,"levelVal",{get:f}),Object.defineProperty(u,"level",{get:_,set:O});const h={transmit:e,serialize:i,asObject:t.browser.asObject,levels:c,timestamp:Zg(t)};u.levels=Ut.levels,u.level=s,u.setMaxListeners=u.getMaxListeners=u.emit=u.addListener=u.on=u.prependListener=u.once=u.prependOnceListener=u.removeListener=u.removeAllListeners=u.listeners=u.listenerCount=u.eventNames=u.write=u.flush=un,u.serializers=n,u._serialize=i,u._stdErrSerialize=o,u.child=v,e&&(u._logEvent=Yi());function f(){return this.level==="silent"?1/0:this.levels.values[this.level]}function _(){return this._level}function O(m){if(m!=="silent"&&!this.levels.values[m])throw Error("unknown level "+m);this._level=m,Er(h,u,"error","log"),Er(h,u,"fatal","error"),Er(h,u,"warn","error"),Er(h,u,"info","log"),Er(h,u,"debug","log"),Er(h,u,"trace","log")}function v(m,I){if(!m)throw new Error("missing bindings for child Pino");I=I||{},i&&m.serializers&&(I.serializers=m.serializers);const x=I.serializers;if(i&&x){var R=Object.assign({},n,x),p=t.browser.serialize===!0?Object.keys(R):i;delete m.serializers,ti([m],p,R,this._stdErrSerialize)}function w(d){this._childLevel=(d._childLevel|0)+1,this.error=Dr(d,m,"error"),this.fatal=Dr(d,m,"fatal"),this.warn=Dr(d,m,"warn"),this.info=Dr(d,m,"info"),this.debug=Dr(d,m,"debug"),this.trace=Dr(d,m,"trace"),R&&(this.serializers=R,this._serialize=p),e&&(this._logEvent=Yi([].concat(d._logEvent.bindings,m)))}return w.prototype=this,new w(this)}return u}Ut.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Ut.stdSerializers=Wg;Ut.stdTimeFunctions=Object.assign({},{nullTime:Ru,epochTime:Pu,unixTime:ep,isoTime:tp});function Er(t,e,r,n){const i=Object.getPrototypeOf(e);e[r]=e.levelVal>e.levels.values[r]?un:i[r]?i[r]:cn[r]||cn[n]||un,Yg(t,e,r)}function Yg(t,e,r){!t.transmit&&e[r]===un||(e[r]=function(n){return function(){const o=t.timestamp(),c=new Array(arguments.length),s=Object.getPrototypeOf&&Object.getPrototypeOf(this)===cn?cn:this;for(var u=0;u<c.length;u++)c[u]=arguments[u];if(t.serialize&&!t.asObject&&ti(c,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?n.call(s,Jg(this,r,c,o)):n.apply(s,c),t.transmit){const h=t.transmit.level||e.level,f=Ut.levels.values[h],_=Ut.levels.values[r];if(_<f)return;Xg(this,{ts:o,methodLevel:r,methodValue:_,transmitLevel:h,transmitValue:Ut.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},c)}}}(e[r]))}function Jg(t,e,r,n){t._serialize&&ti(r,t._serialize,t.serializers,t._stdErrSerialize);const i=r.slice();let o=i[0];const c={};n&&(c.time=n),c.level=Ut.levels.values[e];let s=(t._childLevel|0)+1;if(s<1&&(s=1),o!==null&&typeof o=="object"){for(;s--&&typeof i[0]=="object";)Object.assign(c,i.shift());o=i.length?$s(i.shift(),i):void 0}else typeof o=="string"&&(o=$s(i.shift(),i));return o!==void 0&&(c.msg=o),c}function ti(t,e,r,n){for(const i in t)if(n&&t[i]instanceof Error)t[i]=Ut.stdSerializers.err(t[i]);else if(typeof t[i]=="object"&&!Array.isArray(t[i]))for(const o in t[i])e&&e.indexOf(o)>-1&&o in r&&(t[i][o]=r[o](t[i][o]))}function Dr(t,e,r){return function(){const n=new Array(1+arguments.length);n[0]=e;for(var i=1;i<n.length;i++)n[i]=arguments[i-1];return t[r].apply(this,n)}}function Xg(t,e,r){const n=e.send,i=e.ts,o=e.methodLevel,c=e.methodValue,s=e.val,u=t._logEvent.bindings;ti(r,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=i,t._logEvent.messages=r.filter(function(h){return u.indexOf(h)===-1}),t._logEvent.level.label=o,t._logEvent.level.value=c,n(o,t._logEvent,s),t._logEvent=Yi(u)}function Yi(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function Qg(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const r in t)e[r]===void 0&&(e[r]=t[r]);return e}function Zg(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?Ru:Pu}function In(){return{}}function Ei(t){return t}function un(){}function Ru(){return!1}function Pu(){return Date.now()}function ep(){return Math.round(Date.now()/1e3)}function tp(){return new Date(Date.now()).toISOString()}function rp(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}var ri={},yt={},np={get exports(){return yt},set exports(t){yt=t}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(t){var e,r,n,i,o,c,s,u,h,f,_,O,v,m,I,x,R,p,w,d,b,E,a;(function(g){var B=typeof ft=="object"?ft:typeof self=="object"?self:typeof this=="object"?this:{};g(C(B,C(t.exports)));function C(F,M){return F!==B&&(typeof Object.create=="function"?Object.defineProperty(F,"__esModule",{value:!0}):F.__esModule=!0),function($,T){return F[$]=M?M($,T):T}}})(function(g){var B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,F){C.__proto__=F}||function(C,F){for(var M in F)F.hasOwnProperty(M)&&(C[M]=F[M])};e=function(C,F){B(C,F);function M(){this.constructor=C}C.prototype=F===null?Object.create(F):(M.prototype=F.prototype,new M)},r=Object.assign||function(C){for(var F,M=1,$=arguments.length;M<$;M++){F=arguments[M];for(var T in F)Object.prototype.hasOwnProperty.call(F,T)&&(C[T]=F[T])}return C},n=function(C,F){var M={};for(var $ in C)Object.prototype.hasOwnProperty.call(C,$)&&F.indexOf($)<0&&(M[$]=C[$]);if(C!=null&&typeof Object.getOwnPropertySymbols=="function")for(var T=0,$=Object.getOwnPropertySymbols(C);T<$.length;T++)F.indexOf($[T])<0&&Object.prototype.propertyIsEnumerable.call(C,$[T])&&(M[$[T]]=C[$[T]]);return M},i=function(C,F,M,$){var T=arguments.length,S=T<3?F:$===null?$=Object.getOwnPropertyDescriptor(F,M):$,H;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(C,F,M,$);else for(var z=C.length-1;z>=0;z--)(H=C[z])&&(S=(T<3?H(S):T>3?H(F,M,S):H(F,M))||S);return T>3&&S&&Object.defineProperty(F,M,S),S},o=function(C,F){return function(M,$){F(M,$,C)}},c=function(C,F){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(C,F)},s=function(C,F,M,$){function T(S){return S instanceof M?S:new M(function(H){H(S)})}return new(M||(M=Promise))(function(S,H){function z(j){try{U($.next(j))}catch(K){H(K)}}function k(j){try{U($.throw(j))}catch(K){H(K)}}function U(j){j.done?S(j.value):T(j.value).then(z,k)}U(($=$.apply(C,F||[])).next())})},u=function(C,F){var M={label:0,sent:function(){if(S[0]&1)throw S[1];return S[1]},trys:[],ops:[]},$,T,S,H;return H={next:z(0),throw:z(1),return:z(2)},typeof Symbol=="function"&&(H[Symbol.iterator]=function(){return this}),H;function z(U){return function(j){return k([U,j])}}function k(U){if($)throw new TypeError("Generator is already executing.");for(;M;)try{if($=1,T&&(S=U[0]&2?T.return:U[0]?T.throw||((S=T.return)&&S.call(T),0):T.next)&&!(S=S.call(T,U[1])).done)return S;switch(T=0,S&&(U=[U[0]&2,S.value]),U[0]){case 0:case 1:S=U;break;case 4:return M.label++,{value:U[1],done:!1};case 5:M.label++,T=U[1],U=[0];continue;case 7:U=M.ops.pop(),M.trys.pop();continue;default:if(S=M.trys,!(S=S.length>0&&S[S.length-1])&&(U[0]===6||U[0]===2)){M=0;continue}if(U[0]===3&&(!S||U[1]>S[0]&&U[1]<S[3])){M.label=U[1];break}if(U[0]===6&&M.label<S[1]){M.label=S[1],S=U;break}if(S&&M.label<S[2]){M.label=S[2],M.ops.push(U);break}S[2]&&M.ops.pop(),M.trys.pop();continue}U=F.call(C,M)}catch(j){U=[6,j],T=0}finally{$=S=0}if(U[0]&5)throw U[1];return{value:U[0]?U[1]:void 0,done:!0}}},a=function(C,F,M,$){$===void 0&&($=M),C[$]=F[M]},h=function(C,F){for(var M in C)M!=="default"&&!F.hasOwnProperty(M)&&(F[M]=C[M])},f=function(C){var F=typeof Symbol=="function"&&Symbol.iterator,M=F&&C[F],$=0;if(M)return M.call(C);if(C&&typeof C.length=="number")return{next:function(){return C&&$>=C.length&&(C=void 0),{value:C&&C[$++],done:!C}}};throw new TypeError(F?"Object is not iterable.":"Symbol.iterator is not defined.")},_=function(C,F){var M=typeof Symbol=="function"&&C[Symbol.iterator];if(!M)return C;var $=M.call(C),T,S=[],H;try{for(;(F===void 0||F-- >0)&&!(T=$.next()).done;)S.push(T.value)}catch(z){H={error:z}}finally{try{T&&!T.done&&(M=$.return)&&M.call($)}finally{if(H)throw H.error}}return S},O=function(){for(var C=[],F=0;F<arguments.length;F++)C=C.concat(_(arguments[F]));return C},v=function(){for(var C=0,F=0,M=arguments.length;F<M;F++)C+=arguments[F].length;for(var $=Array(C),T=0,F=0;F<M;F++)for(var S=arguments[F],H=0,z=S.length;H<z;H++,T++)$[T]=S[H];return $},m=function(C){return this instanceof m?(this.v=C,this):new m(C)},I=function(C,F,M){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var $=M.apply(C,F||[]),T,S=[];return T={},H("next"),H("throw"),H("return"),T[Symbol.asyncIterator]=function(){return this},T;function H(Z){$[Z]&&(T[Z]=function(V){return new Promise(function(ee,Q){S.push([Z,V,ee,Q])>1||z(Z,V)})})}function z(Z,V){try{k($[Z](V))}catch(ee){K(S[0][3],ee)}}function k(Z){Z.value instanceof m?Promise.resolve(Z.value.v).then(U,j):K(S[0][2],Z)}function U(Z){z("next",Z)}function j(Z){z("throw",Z)}function K(Z,V){Z(V),S.shift(),S.length&&z(S[0][0],S[0][1])}},x=function(C){var F,M;return F={},$("next"),$("throw",function(T){throw T}),$("return"),F[Symbol.iterator]=function(){return this},F;function $(T,S){F[T]=C[T]?function(H){return(M=!M)?{value:m(C[T](H)),done:T==="return"}:S?S(H):H}:S}},R=function(C){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var F=C[Symbol.asyncIterator],M;return F?F.call(C):(C=typeof f=="function"?f(C):C[Symbol.iterator](),M={},$("next"),$("throw"),$("return"),M[Symbol.asyncIterator]=function(){return this},M);function $(S){M[S]=C[S]&&function(H){return new Promise(function(z,k){H=C[S](H),T(z,k,H.done,H.value)})}}function T(S,H,z,k){Promise.resolve(k).then(function(U){S({value:U,done:z})},H)}},p=function(C,F){return Object.defineProperty?Object.defineProperty(C,"raw",{value:F}):C.raw=F,C},w=function(C){if(C&&C.__esModule)return C;var F={};if(C!=null)for(var M in C)Object.hasOwnProperty.call(C,M)&&(F[M]=C[M]);return F.default=C,F},d=function(C){return C&&C.__esModule?C:{default:C}},b=function(C,F){if(!F.has(C))throw new TypeError("attempted to get private field on non-instance");return F.get(C)},E=function(C,F,M){if(!F.has(C))throw new TypeError("attempted to set private field on non-instance");return F.set(C,M),M},g("__extends",e),g("__assign",r),g("__rest",n),g("__decorate",i),g("__param",o),g("__metadata",c),g("__awaiter",s),g("__generator",u),g("__exportStar",h),g("__createBinding",a),g("__values",f),g("__read",_),g("__spread",O),g("__spreadArrays",v),g("__await",m),g("__asyncGenerator",I),g("__asyncDelegator",x),g("__asyncValues",R),g("__makeTemplateObject",p),g("__importStar",w),g("__importDefault",d),g("__classPrivateFieldGet",b),g("__classPrivateFieldSet",E)})})(np);var gn={};Object.defineProperty(gn,"__esModule",{value:!0});function ip(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return JSON.parse(t)}catch{return t}}gn.safeJsonParse=ip;function op(t){return typeof t=="string"?t:JSON.stringify(t,(e,r)=>typeof r>"u"?null:r)}gn.safeJsonStringify=op;var kn={},Di={get exports(){return kn},set exports(t){kn=t}},Bs;function sp(){return Bs||(Bs=1,function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,n){this[r]=String(n)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof ft<"u"&&ft.localStorage?Di.exports=ft.localStorage:typeof window<"u"&&window.localStorage?Di.exports=window.localStorage:Di.exports=new e}()),kn}var Si={},qr={},ks;function ap(){if(ks)return qr;ks=1,Object.defineProperty(qr,"__esModule",{value:!0}),qr.IKeyValueStorage=void 0;class t{}return qr.IKeyValueStorage=t,qr}var Hr={},zs;function cp(){if(zs)return Hr;zs=1,Object.defineProperty(Hr,"__esModule",{value:!0}),Hr.parseEntry=void 0;const t=gn;function e(r){var n;return[r[0],t.safeJsonParse((n=r[1])!==null&&n!==void 0?n:"")]}return Hr.parseEntry=e,Hr}var js;function up(){return js||(js=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=yt;e.__exportStar(ap(),t),e.__exportStar(cp(),t)}(Si)),Si}Object.defineProperty(ri,"__esModule",{value:!0});ri.KeyValueStorage=void 0;const xr=yt,qs=gn,lp=xr.__importDefault(sp()),fp=up();class Lu{constructor(){this.localStorage=lp.default}getKeys(){return xr.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return xr.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(fp.parseEntry)})}getItem(e){return xr.__awaiter(this,void 0,void 0,function*(){const r=this.localStorage.getItem(e);if(r!==null)return qs.safeJsonParse(r)})}setItem(e,r){return xr.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(e,qs.safeJsonStringify(r))})}removeItem(e){return xr.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(e)})}}ri.KeyValueStorage=Lu;var hp=ri.default=Lu,pn={},Kr={},te={},xi={},Vr={},Hs;function dp(){if(Hs)return Vr;Hs=1,Object.defineProperty(Vr,"__esModule",{value:!0}),Vr.delay=void 0;function t(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return Vr.delay=t,Vr}var cr={},Ci={},ur={},Ks;function gp(){return Ks||(Ks=1,Object.defineProperty(ur,"__esModule",{value:!0}),ur.ONE_THOUSAND=ur.ONE_HUNDRED=void 0,ur.ONE_HUNDRED=100,ur.ONE_THOUSAND=1e3),ur}var Oi={},Vs;function pp(){return Vs||(Vs=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(Oi)),Oi}var Ws;function Fu(){return Ws||(Ws=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=yt;e.__exportStar(gp(),t),e.__exportStar(pp(),t)}(Ci)),Ci}var Gs;function _p(){if(Gs)return cr;Gs=1,Object.defineProperty(cr,"__esModule",{value:!0}),cr.fromMiliseconds=cr.toMiliseconds=void 0;const t=Fu();function e(n){return n*t.ONE_THOUSAND}cr.toMiliseconds=e;function r(n){return Math.floor(n/t.ONE_THOUSAND)}return cr.fromMiliseconds=r,cr}var Ys;function yp(){return Ys||(Ys=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=yt;e.__exportStar(dp(),t),e.__exportStar(_p(),t)}(xi)),xi}var Sr={},Js;function mp(){if(Js)return Sr;Js=1,Object.defineProperty(Sr,"__esModule",{value:!0}),Sr.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const n=this.get(r);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const i=Date.now()-n.started;this.timestamps.set(r,{started:n.started,elapsed:i})}get(r){const n=this.timestamps.get(r);if(typeof n>"u")throw new Error(`No timestamp found for label: ${r}`);return n}elapsed(r){const n=this.get(r);return n.elapsed||Date.now()-n.started}}return Sr.Watch=t,Sr.default=t,Sr}var Ti={},Wr={},Xs;function vp(){if(Xs)return Wr;Xs=1,Object.defineProperty(Wr,"__esModule",{value:!0}),Wr.IWatch=void 0;class t{}return Wr.IWatch=t,Wr}var Qs;function wp(){return Qs||(Qs=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),yt.__exportStar(vp(),t)}(Ti)),Ti}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=yt;e.__exportStar(yp(),t),e.__exportStar(mp(),t),e.__exportStar(wp(),t),e.__exportStar(Fu(),t)})(te);var Ii={},Gr={};let mr=class{};const bp=Object.freeze(Object.defineProperty({__proto__:null,IEvents:mr},Symbol.toStringTag,{value:"Module"})),Ep=lo(bp);var Zs;function Dp(){if(Zs)return Gr;Zs=1,Object.defineProperty(Gr,"__esModule",{value:!0}),Gr.IHeartBeat=void 0;const t=Ep;class e extends t.IEvents{constructor(n){super()}}return Gr.IHeartBeat=e,Gr}var ea;function Mu(){return ea||(ea=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),yt.__exportStar(Dp(),t)}(Ii)),Ii}var Ai={},lr={},ta;function Sp(){if(ta)return lr;ta=1,Object.defineProperty(lr,"__esModule",{value:!0}),lr.HEARTBEAT_EVENTS=lr.HEARTBEAT_INTERVAL=void 0;const t=te;return lr.HEARTBEAT_INTERVAL=t.FIVE_SECONDS,lr.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},lr}var ra;function Uu(){return ra||(ra=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),yt.__exportStar(Sp(),t)}(Ai)),Ai}var na;function xp(){if(na)return Kr;na=1,Object.defineProperty(Kr,"__esModule",{value:!0}),Kr.HeartBeat=void 0;const t=yt,e=Ot,r=te,n=Mu(),i=Uu();class o extends n.IHeartBeat{constructor(s){super(s),this.events=new e.EventEmitter,this.interval=i.HEARTBEAT_INTERVAL,this.interval=(s==null?void 0:s.interval)||i.HEARTBEAT_INTERVAL}static init(s){return t.__awaiter(this,void 0,void 0,function*(){const u=new o(s);return yield u.init(),u})}init(){return t.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(s,u){this.events.on(s,u)}once(s,u){this.events.once(s,u)}off(s,u){this.events.off(s,u)}removeListener(s,u){this.events.removeListener(s,u)}initialize(){return t.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),r.toMiliseconds(this.interval))})}pulse(){this.events.emit(i.HEARTBEAT_EVENTS.pulse)}}return Kr.HeartBeat=o,Kr}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=yt;e.__exportStar(xp(),t),e.__exportStar(Mu(),t),e.__exportStar(Uu(),t)})(pn);var Oe={},fr={},ia;function $u(){return ia||(ia=1,Object.defineProperty(fr,"__esModule",{value:!0}),fr.PINO_CUSTOM_CONTEXT_KEY=fr.PINO_LOGGER_DEFAULTS=void 0,fr.PINO_LOGGER_DEFAULTS={level:"info"},fr.PINO_CUSTOM_CONTEXT_KEY="custom_context"),fr}var ut={},oa;function Cp(){if(oa)return ut;oa=1,Object.defineProperty(ut,"__esModule",{value:!0}),ut.generateChildLogger=ut.formatChildLoggerContext=ut.getLoggerContext=ut.setBrowserLoggerContext=ut.getBrowserLoggerContext=ut.getDefaultLoggerOptions=void 0;const t=$u();function e(s){return Object.assign(Object.assign({},s),{level:(s==null?void 0:s.level)||t.PINO_LOGGER_DEFAULTS.level})}ut.getDefaultLoggerOptions=e;function r(s,u=t.PINO_CUSTOM_CONTEXT_KEY){return s[u]||""}ut.getBrowserLoggerContext=r;function n(s,u,h=t.PINO_CUSTOM_CONTEXT_KEY){return s[h]=u,s}ut.setBrowserLoggerContext=n;function i(s,u=t.PINO_CUSTOM_CONTEXT_KEY){let h="";return typeof s.bindings>"u"?h=r(s,u):h=s.bindings().context||"",h}ut.getLoggerContext=i;function o(s,u,h=t.PINO_CUSTOM_CONTEXT_KEY){const f=i(s,h);return f.trim()?`${f}/${u}`:u}ut.formatChildLoggerContext=o;function c(s,u,h=t.PINO_CUSTOM_CONTEXT_KEY){const f=o(s,u,h),_=s.child({context:f});return n(_,f,h)}return ut.generateChildLogger=c,ut}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.pino=void 0;const e=yt,r=e.__importDefault(ei);Object.defineProperty(t,"pino",{enumerable:!0,get:function(){return r.default}}),e.__exportStar($u(),t),e.__exportStar(Cp(),t)})(Oe);class Op extends mr{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}let Tp=class extends mr{constructor(e,r){super(),this.core=e,this.logger=r,this.records=new Map}};class Ip{constructor(e,r){this.logger=e,this.core=r}}let Ap=class extends mr{constructor(e,r){super(),this.relayer=e,this.logger=r}},Np=class extends mr{constructor(e){super()}},Rp=class{constructor(e,r,n,i){this.core=e,this.logger=r,this.name=n}};class Pp extends mr{constructor(e,r){super(),this.relayer=e,this.logger=r}}let Lp=class extends mr{constructor(e,r){super(),this.core=e,this.logger=r}};class Fp{constructor(e){this.opts=e,this.protocol="wc",this.version=2}}let Mp=class{constructor(e){this.client=e}};function Bu(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return JSON.parse(t)}catch{return t}}function Ao(t){return typeof t=="string"?t:JSON.stringify(t)}var No={},Ur={},ni={},ii={};Object.defineProperty(ii,"__esModule",{value:!0});ii.BrowserRandomSource=void 0;const sa=65536;class Up{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(e);for(let n=0;n<r.length;n+=sa)this._crypto.getRandomValues(r.subarray(n,n+Math.min(r.length-n,sa)));return r}}ii.BrowserRandomSource=Up;function $p(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var oi={},Et={};Object.defineProperty(Et,"__esModule",{value:!0});function Bp(t){for(var e=0;e<t.length;e++)t[e]=0;return t}Et.wipe=Bp;Object.defineProperty(oi,"__esModule",{value:!0});oi.NodeRandomSource=void 0;const kp=Et;class zp{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof $p<"u"){const e=Af();e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const n=new Uint8Array(e);for(let i=0;i<n.length;i++)n[i]=r[i];return(0,kp.wipe)(r),n}}oi.NodeRandomSource=zp;Object.defineProperty(ni,"__esModule",{value:!0});ni.SystemRandomSource=void 0;const jp=ii,qp=oi;class Hp{constructor(){if(this.isAvailable=!1,this.name="",this._source=new jp.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new qp.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}ni.SystemRandomSource=Hp;var oe={},ku={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(s,u){var h=s>>>16&65535,f=s&65535,_=u>>>16&65535,O=u&65535;return f*O+(h*O+f*_<<16>>>0)|0}t.mul=Math.imul||e;function r(s,u){return s+u|0}t.add=r;function n(s,u){return s-u|0}t.sub=n;function i(s,u){return s<<u|s>>>32-u}t.rotl=i;function o(s,u){return s<<32-u|s>>>u}t.rotr=o;function c(s){return typeof s=="number"&&isFinite(s)&&Math.floor(s)===s}t.isInteger=Number.isInteger||c,t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(s){return t.isInteger(s)&&s>=-t.MAX_SAFE_INTEGER&&s<=t.MAX_SAFE_INTEGER}})(ku);Object.defineProperty(oe,"__esModule",{value:!0});var zu=ku;function Kp(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}oe.readInt16BE=Kp;function Vp(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}oe.readUint16BE=Vp;function Wp(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}oe.readInt16LE=Wp;function Gp(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}oe.readUint16LE=Gp;function ju(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}oe.writeUint16BE=ju;oe.writeInt16BE=ju;function qu(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}oe.writeUint16LE=qu;oe.writeInt16LE=qu;function Ji(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}oe.readInt32BE=Ji;function Xi(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}oe.readUint32BE=Xi;function Qi(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}oe.readInt32LE=Qi;function Zi(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}oe.readUint32LE=Zi;function zn(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}oe.writeUint32BE=zn;oe.writeInt32BE=zn;function jn(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}oe.writeUint32LE=jn;oe.writeInt32LE=jn;function Yp(t,e){e===void 0&&(e=0);var r=Ji(t,e),n=Ji(t,e+4);return r*4294967296+n-(n>>31)*4294967296}oe.readInt64BE=Yp;function Jp(t,e){e===void 0&&(e=0);var r=Xi(t,e),n=Xi(t,e+4);return r*4294967296+n}oe.readUint64BE=Jp;function Xp(t,e){e===void 0&&(e=0);var r=Qi(t,e),n=Qi(t,e+4);return n*4294967296+r-(r>>31)*4294967296}oe.readInt64LE=Xp;function Qp(t,e){e===void 0&&(e=0);var r=Zi(t,e),n=Zi(t,e+4);return n*4294967296+r}oe.readUint64LE=Qp;function Hu(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),zn(t/4294967296>>>0,e,r),zn(t>>>0,e,r+4),e}oe.writeUint64BE=Hu;oe.writeInt64BE=Hu;function Ku(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),jn(t>>>0,e,r),jn(t/4294967296>>>0,e,r+4),e}oe.writeUint64LE=Ku;oe.writeInt64LE=Ku;function Zp(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,o=t/8+r-1;o>=r;o--)n+=e[o]*i,i*=256;return n}oe.readUintBE=Zp;function e0(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,o=r;o<r+t/8;o++)n+=e[o]*i,i*=256;return n}oe.readUintLE=e0;function t0(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!zu.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var i=1,o=t/8+n-1;o>=n;o--)r[o]=e/i&255,i*=256;return r}oe.writeUintBE=t0;function r0(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!zu.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var i=1,o=n;o<n+t/8;o++)r[o]=e/i&255,i*=256;return r}oe.writeUintLE=r0;function n0(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}oe.readFloat32BE=n0;function i0(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}oe.readFloat32LE=i0;function o0(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}oe.readFloat64BE=o0;function s0(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}oe.readFloat64LE=s0;function a0(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t),e}oe.writeFloat32BE=a0;function c0(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t,!0),e}oe.writeFloat32LE=c0;function u0(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t),e}oe.writeFloat64BE=u0;function l0(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t,!0),e}oe.writeFloat64LE=l0;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const e=ni,r=oe,n=Et;t.defaultRandomSource=new e.SystemRandomSource;function i(h,f=t.defaultRandomSource){return f.randomBytes(h)}t.randomBytes=i;function o(h=t.defaultRandomSource){const f=i(4,h),_=(0,r.readUint32LE)(f);return(0,n.wipe)(f),_}t.randomUint32=o;const c="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function s(h,f=c,_=t.defaultRandomSource){if(f.length<2)throw new Error("randomString charset is too short");if(f.length>256)throw new Error("randomString charset is too long");let O="";const v=f.length,m=256-256%v;for(;h>0;){const I=i(Math.ceil(h*256/m),_);for(let x=0;x<I.length&&h>0;x++){const R=I[x];R<m&&(O+=f.charAt(R%v),h--)}(0,n.wipe)(I)}return O}t.randomString=s;function u(h,f=c,_=t.defaultRandomSource){const O=Math.ceil(h/(Math.log(f.length)/Math.LN2));return s(O,f,_)}t.randomStringForEntropy=u})(Ur);var Vu={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=oe,r=Et;t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var n=function(){function s(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return s.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},s.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},s.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},s.prototype.update=function(u,h){if(h===void 0&&(h=u.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var f=0;if(this._bytesHashed+=h,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&h>0;)this._buffer[this._bufferLength++]=u[f++],h--;this._bufferLength===this.blockSize&&(o(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(h>=this.blockSize&&(f=o(this._tempHi,this._tempLo,this._stateHi,this._stateLo,u,f,h),h%=this.blockSize);h>0;)this._buffer[this._bufferLength++]=u[f++],h--;return this},s.prototype.finish=function(u){if(!this._finished){var h=this._bytesHashed,f=this._bufferLength,_=h/536870912|0,O=h<<3,v=h%128<112?128:256;this._buffer[f]=128;for(var m=f+1;m<v-8;m++)this._buffer[m]=0;e.writeUint32BE(_,this._buffer,v-8),e.writeUint32BE(O,this._buffer,v-4),o(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,v),this._finished=!0}for(var m=0;m<this.digestLength/8;m++)e.writeUint32BE(this._stateHi[m],u,m*8),e.writeUint32BE(this._stateLo[m],u,m*8+4);return this},s.prototype.digest=function(){var u=new Uint8Array(this.digestLength);return this.finish(u),u},s.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},s.prototype.restoreState=function(u){return this._stateHi.set(u.stateHi),this._stateLo.set(u.stateLo),this._bufferLength=u.bufferLength,u.buffer&&this._buffer.set(u.buffer),this._bytesHashed=u.bytesHashed,this._finished=!1,this},s.prototype.cleanSavedState=function(u){r.wipe(u.stateHi),r.wipe(u.stateLo),u.buffer&&r.wipe(u.buffer),u.bufferLength=0,u.bytesHashed=0},s}();t.SHA512=n;var i=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function o(s,u,h,f,_,O,v){for(var m=h[0],I=h[1],x=h[2],R=h[3],p=h[4],w=h[5],d=h[6],b=h[7],E=f[0],a=f[1],g=f[2],B=f[3],C=f[4],F=f[5],M=f[6],$=f[7],T,S,H,z,k,U,j,K;v>=128;){for(var Z=0;Z<16;Z++){var V=8*Z+O;s[Z]=e.readUint32BE(_,V),u[Z]=e.readUint32BE(_,V+4)}for(var Z=0;Z<80;Z++){var ee=m,Q=I,ue=x,L=R,P=p,A=w,l=d,D=b,W=E,J=a,de=g,we=B,_e=C,De=F,$e=M,Le=$;if(T=b,S=$,k=S&65535,U=S>>>16,j=T&65535,K=T>>>16,T=(p>>>14|C<<32-14)^(p>>>18|C<<32-18)^(C>>>41-32|p<<32-(41-32)),S=(C>>>14|p<<32-14)^(C>>>18|p<<32-18)^(p>>>41-32|C<<32-(41-32)),k+=S&65535,U+=S>>>16,j+=T&65535,K+=T>>>16,T=p&w^~p&d,S=C&F^~C&M,k+=S&65535,U+=S>>>16,j+=T&65535,K+=T>>>16,T=i[Z*2],S=i[Z*2+1],k+=S&65535,U+=S>>>16,j+=T&65535,K+=T>>>16,T=s[Z%16],S=u[Z%16],k+=S&65535,U+=S>>>16,j+=T&65535,K+=T>>>16,U+=k>>>16,j+=U>>>16,K+=j>>>16,H=j&65535|K<<16,z=k&65535|U<<16,T=H,S=z,k=S&65535,U=S>>>16,j=T&65535,K=T>>>16,T=(m>>>28|E<<32-28)^(E>>>34-32|m<<32-(34-32))^(E>>>39-32|m<<32-(39-32)),S=(E>>>28|m<<32-28)^(m>>>34-32|E<<32-(34-32))^(m>>>39-32|E<<32-(39-32)),k+=S&65535,U+=S>>>16,j+=T&65535,K+=T>>>16,T=m&I^m&x^I&x,S=E&a^E&g^a&g,k+=S&65535,U+=S>>>16,j+=T&65535,K+=T>>>16,U+=k>>>16,j+=U>>>16,K+=j>>>16,D=j&65535|K<<16,Le=k&65535|U<<16,T=L,S=we,k=S&65535,U=S>>>16,j=T&65535,K=T>>>16,T=H,S=z,k+=S&65535,U+=S>>>16,j+=T&65535,K+=T>>>16,U+=k>>>16,j+=U>>>16,K+=j>>>16,L=j&65535|K<<16,we=k&65535|U<<16,I=ee,x=Q,R=ue,p=L,w=P,d=A,b=l,m=D,a=W,g=J,B=de,C=we,F=_e,M=De,$=$e,E=Le,Z%16===15)for(var V=0;V<16;V++)T=s[V],S=u[V],k=S&65535,U=S>>>16,j=T&65535,K=T>>>16,T=s[(V+9)%16],S=u[(V+9)%16],k+=S&65535,U+=S>>>16,j+=T&65535,K+=T>>>16,H=s[(V+1)%16],z=u[(V+1)%16],T=(H>>>1|z<<32-1)^(H>>>8|z<<32-8)^H>>>7,S=(z>>>1|H<<32-1)^(z>>>8|H<<32-8)^(z>>>7|H<<32-7),k+=S&65535,U+=S>>>16,j+=T&65535,K+=T>>>16,H=s[(V+14)%16],z=u[(V+14)%16],T=(H>>>19|z<<32-19)^(z>>>61-32|H<<32-(61-32))^H>>>6,S=(z>>>19|H<<32-19)^(H>>>61-32|z<<32-(61-32))^(z>>>6|H<<32-6),k+=S&65535,U+=S>>>16,j+=T&65535,K+=T>>>16,U+=k>>>16,j+=U>>>16,K+=j>>>16,s[V]=j&65535|K<<16,u[V]=k&65535|U<<16}T=m,S=E,k=S&65535,U=S>>>16,j=T&65535,K=T>>>16,T=h[0],S=f[0],k+=S&65535,U+=S>>>16,j+=T&65535,K+=T>>>16,U+=k>>>16,j+=U>>>16,K+=j>>>16,h[0]=m=j&65535|K<<16,f[0]=E=k&65535|U<<16,T=I,S=a,k=S&65535,U=S>>>16,j=T&65535,K=T>>>16,T=h[1],S=f[1],k+=S&65535,U+=S>>>16,j+=T&65535,K+=T>>>16,U+=k>>>16,j+=U>>>16,K+=j>>>16,h[1]=I=j&65535|K<<16,f[1]=a=k&65535|U<<16,T=x,S=g,k=S&65535,U=S>>>16,j=T&65535,K=T>>>16,T=h[2],S=f[2],k+=S&65535,U+=S>>>16,j+=T&65535,K+=T>>>16,U+=k>>>16,j+=U>>>16,K+=j>>>16,h[2]=x=j&65535|K<<16,f[2]=g=k&65535|U<<16,T=R,S=B,k=S&65535,U=S>>>16,j=T&65535,K=T>>>16,T=h[3],S=f[3],k+=S&65535,U+=S>>>16,j+=T&65535,K+=T>>>16,U+=k>>>16,j+=U>>>16,K+=j>>>16,h[3]=R=j&65535|K<<16,f[3]=B=k&65535|U<<16,T=p,S=C,k=S&65535,U=S>>>16,j=T&65535,K=T>>>16,T=h[4],S=f[4],k+=S&65535,U+=S>>>16,j+=T&65535,K+=T>>>16,U+=k>>>16,j+=U>>>16,K+=j>>>16,h[4]=p=j&65535|K<<16,f[4]=C=k&65535|U<<16,T=w,S=F,k=S&65535,U=S>>>16,j=T&65535,K=T>>>16,T=h[5],S=f[5],k+=S&65535,U+=S>>>16,j+=T&65535,K+=T>>>16,U+=k>>>16,j+=U>>>16,K+=j>>>16,h[5]=w=j&65535|K<<16,f[5]=F=k&65535|U<<16,T=d,S=M,k=S&65535,U=S>>>16,j=T&65535,K=T>>>16,T=h[6],S=f[6],k+=S&65535,U+=S>>>16,j+=T&65535,K+=T>>>16,U+=k>>>16,j+=U>>>16,K+=j>>>16,h[6]=d=j&65535|K<<16,f[6]=M=k&65535|U<<16,T=b,S=$,k=S&65535,U=S>>>16,j=T&65535,K=T>>>16,T=h[7],S=f[7],k+=S&65535,U+=S>>>16,j+=T&65535,K+=T>>>16,U+=k>>>16,j+=U>>>16,K+=j>>>16,h[7]=b=j&65535|K<<16,f[7]=$=k&65535|U<<16,O+=128,v-=128}return O}function c(s){var u=new n;u.update(s);var h=u.digest();return u.clean(),h}t.hash=c})(Vu);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.convertSecretKeyToX25519=t.convertPublicKeyToX25519=t.verify=t.sign=t.extractPublicKeyFromSecretKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.SEED_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=t.SIGNATURE_LENGTH=void 0;const e=Ur,r=Vu,n=Et;t.SIGNATURE_LENGTH=64,t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=64,t.SEED_LENGTH=32;function i(L){const P=new Float64Array(16);if(L)for(let A=0;A<L.length;A++)P[A]=L[A];return P}const o=new Uint8Array(32);o[0]=9;const c=i(),s=i([1]),u=i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),h=i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),f=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),_=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),O=i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function v(L,P){for(let A=0;A<16;A++)L[A]=P[A]|0}function m(L){let P=1;for(let A=0;A<16;A++){let l=L[A]+P+65535;P=Math.floor(l/65536),L[A]=l-P*65536}L[0]+=P-1+37*(P-1)}function I(L,P,A){const l=~(A-1);for(let D=0;D<16;D++){const W=l&(L[D]^P[D]);L[D]^=W,P[D]^=W}}function x(L,P){const A=i(),l=i();for(let D=0;D<16;D++)l[D]=P[D];m(l),m(l),m(l);for(let D=0;D<2;D++){A[0]=l[0]-65517;for(let J=1;J<15;J++)A[J]=l[J]-65535-(A[J-1]>>16&1),A[J-1]&=65535;A[15]=l[15]-32767-(A[14]>>16&1);const W=A[15]>>16&1;A[14]&=65535,I(l,A,1-W)}for(let D=0;D<16;D++)L[2*D]=l[D]&255,L[2*D+1]=l[D]>>8}function R(L,P){let A=0;for(let l=0;l<32;l++)A|=L[l]^P[l];return(1&A-1>>>8)-1}function p(L,P){const A=new Uint8Array(32),l=new Uint8Array(32);return x(A,L),x(l,P),R(A,l)}function w(L){const P=new Uint8Array(32);return x(P,L),P[0]&1}function d(L,P){for(let A=0;A<16;A++)L[A]=P[2*A]+(P[2*A+1]<<8);L[15]&=32767}function b(L,P,A){for(let l=0;l<16;l++)L[l]=P[l]+A[l]}function E(L,P,A){for(let l=0;l<16;l++)L[l]=P[l]-A[l]}function a(L,P,A){let l,D,W=0,J=0,de=0,we=0,_e=0,De=0,$e=0,Le=0,ve=0,ye=0,ge=0,fe=0,le=0,ce=0,ae=0,ne=0,he=0,me=0,ie=0,be=0,Ee=0,xe=0,Ce=0,Se=0,Tt=0,Rt=0,Wt=0,vt=0,ir=0,kr=0,wn=0,ke=A[0],Fe=A[1],ze=A[2],je=A[3],qe=A[4],Me=A[5],We=A[6],Ge=A[7],Ye=A[8],Je=A[9],Xe=A[10],Ke=A[11],He=A[12],Re=A[13],Qe=A[14],Ze=A[15];l=P[0],W+=l*ke,J+=l*Fe,de+=l*ze,we+=l*je,_e+=l*qe,De+=l*Me,$e+=l*We,Le+=l*Ge,ve+=l*Ye,ye+=l*Je,ge+=l*Xe,fe+=l*Ke,le+=l*He,ce+=l*Re,ae+=l*Qe,ne+=l*Ze,l=P[1],J+=l*ke,de+=l*Fe,we+=l*ze,_e+=l*je,De+=l*qe,$e+=l*Me,Le+=l*We,ve+=l*Ge,ye+=l*Ye,ge+=l*Je,fe+=l*Xe,le+=l*Ke,ce+=l*He,ae+=l*Re,ne+=l*Qe,he+=l*Ze,l=P[2],de+=l*ke,we+=l*Fe,_e+=l*ze,De+=l*je,$e+=l*qe,Le+=l*Me,ve+=l*We,ye+=l*Ge,ge+=l*Ye,fe+=l*Je,le+=l*Xe,ce+=l*Ke,ae+=l*He,ne+=l*Re,he+=l*Qe,me+=l*Ze,l=P[3],we+=l*ke,_e+=l*Fe,De+=l*ze,$e+=l*je,Le+=l*qe,ve+=l*Me,ye+=l*We,ge+=l*Ge,fe+=l*Ye,le+=l*Je,ce+=l*Xe,ae+=l*Ke,ne+=l*He,he+=l*Re,me+=l*Qe,ie+=l*Ze,l=P[4],_e+=l*ke,De+=l*Fe,$e+=l*ze,Le+=l*je,ve+=l*qe,ye+=l*Me,ge+=l*We,fe+=l*Ge,le+=l*Ye,ce+=l*Je,ae+=l*Xe,ne+=l*Ke,he+=l*He,me+=l*Re,ie+=l*Qe,be+=l*Ze,l=P[5],De+=l*ke,$e+=l*Fe,Le+=l*ze,ve+=l*je,ye+=l*qe,ge+=l*Me,fe+=l*We,le+=l*Ge,ce+=l*Ye,ae+=l*Je,ne+=l*Xe,he+=l*Ke,me+=l*He,ie+=l*Re,be+=l*Qe,Ee+=l*Ze,l=P[6],$e+=l*ke,Le+=l*Fe,ve+=l*ze,ye+=l*je,ge+=l*qe,fe+=l*Me,le+=l*We,ce+=l*Ge,ae+=l*Ye,ne+=l*Je,he+=l*Xe,me+=l*Ke,ie+=l*He,be+=l*Re,Ee+=l*Qe,xe+=l*Ze,l=P[7],Le+=l*ke,ve+=l*Fe,ye+=l*ze,ge+=l*je,fe+=l*qe,le+=l*Me,ce+=l*We,ae+=l*Ge,ne+=l*Ye,he+=l*Je,me+=l*Xe,ie+=l*Ke,be+=l*He,Ee+=l*Re,xe+=l*Qe,Ce+=l*Ze,l=P[8],ve+=l*ke,ye+=l*Fe,ge+=l*ze,fe+=l*je,le+=l*qe,ce+=l*Me,ae+=l*We,ne+=l*Ge,he+=l*Ye,me+=l*Je,ie+=l*Xe,be+=l*Ke,Ee+=l*He,xe+=l*Re,Ce+=l*Qe,Se+=l*Ze,l=P[9],ye+=l*ke,ge+=l*Fe,fe+=l*ze,le+=l*je,ce+=l*qe,ae+=l*Me,ne+=l*We,he+=l*Ge,me+=l*Ye,ie+=l*Je,be+=l*Xe,Ee+=l*Ke,xe+=l*He,Ce+=l*Re,Se+=l*Qe,Tt+=l*Ze,l=P[10],ge+=l*ke,fe+=l*Fe,le+=l*ze,ce+=l*je,ae+=l*qe,ne+=l*Me,he+=l*We,me+=l*Ge,ie+=l*Ye,be+=l*Je,Ee+=l*Xe,xe+=l*Ke,Ce+=l*He,Se+=l*Re,Tt+=l*Qe,Rt+=l*Ze,l=P[11],fe+=l*ke,le+=l*Fe,ce+=l*ze,ae+=l*je,ne+=l*qe,he+=l*Me,me+=l*We,ie+=l*Ge,be+=l*Ye,Ee+=l*Je,xe+=l*Xe,Ce+=l*Ke,Se+=l*He,Tt+=l*Re,Rt+=l*Qe,Wt+=l*Ze,l=P[12],le+=l*ke,ce+=l*Fe,ae+=l*ze,ne+=l*je,he+=l*qe,me+=l*Me,ie+=l*We,be+=l*Ge,Ee+=l*Ye,xe+=l*Je,Ce+=l*Xe,Se+=l*Ke,Tt+=l*He,Rt+=l*Re,Wt+=l*Qe,vt+=l*Ze,l=P[13],ce+=l*ke,ae+=l*Fe,ne+=l*ze,he+=l*je,me+=l*qe,ie+=l*Me,be+=l*We,Ee+=l*Ge,xe+=l*Ye,Ce+=l*Je,Se+=l*Xe,Tt+=l*Ke,Rt+=l*He,Wt+=l*Re,vt+=l*Qe,ir+=l*Ze,l=P[14],ae+=l*ke,ne+=l*Fe,he+=l*ze,me+=l*je,ie+=l*qe,be+=l*Me,Ee+=l*We,xe+=l*Ge,Ce+=l*Ye,Se+=l*Je,Tt+=l*Xe,Rt+=l*Ke,Wt+=l*He,vt+=l*Re,ir+=l*Qe,kr+=l*Ze,l=P[15],ne+=l*ke,he+=l*Fe,me+=l*ze,ie+=l*je,be+=l*qe,Ee+=l*Me,xe+=l*We,Ce+=l*Ge,Se+=l*Ye,Tt+=l*Je,Rt+=l*Xe,Wt+=l*Ke,vt+=l*He,ir+=l*Re,kr+=l*Qe,wn+=l*Ze,W+=38*he,J+=38*me,de+=38*ie,we+=38*be,_e+=38*Ee,De+=38*xe,$e+=38*Ce,Le+=38*Se,ve+=38*Tt,ye+=38*Rt,ge+=38*Wt,fe+=38*vt,le+=38*ir,ce+=38*kr,ae+=38*wn,D=1,l=W+D+65535,D=Math.floor(l/65536),W=l-D*65536,l=J+D+65535,D=Math.floor(l/65536),J=l-D*65536,l=de+D+65535,D=Math.floor(l/65536),de=l-D*65536,l=we+D+65535,D=Math.floor(l/65536),we=l-D*65536,l=_e+D+65535,D=Math.floor(l/65536),_e=l-D*65536,l=De+D+65535,D=Math.floor(l/65536),De=l-D*65536,l=$e+D+65535,D=Math.floor(l/65536),$e=l-D*65536,l=Le+D+65535,D=Math.floor(l/65536),Le=l-D*65536,l=ve+D+65535,D=Math.floor(l/65536),ve=l-D*65536,l=ye+D+65535,D=Math.floor(l/65536),ye=l-D*65536,l=ge+D+65535,D=Math.floor(l/65536),ge=l-D*65536,l=fe+D+65535,D=Math.floor(l/65536),fe=l-D*65536,l=le+D+65535,D=Math.floor(l/65536),le=l-D*65536,l=ce+D+65535,D=Math.floor(l/65536),ce=l-D*65536,l=ae+D+65535,D=Math.floor(l/65536),ae=l-D*65536,l=ne+D+65535,D=Math.floor(l/65536),ne=l-D*65536,W+=D-1+37*(D-1),D=1,l=W+D+65535,D=Math.floor(l/65536),W=l-D*65536,l=J+D+65535,D=Math.floor(l/65536),J=l-D*65536,l=de+D+65535,D=Math.floor(l/65536),de=l-D*65536,l=we+D+65535,D=Math.floor(l/65536),we=l-D*65536,l=_e+D+65535,D=Math.floor(l/65536),_e=l-D*65536,l=De+D+65535,D=Math.floor(l/65536),De=l-D*65536,l=$e+D+65535,D=Math.floor(l/65536),$e=l-D*65536,l=Le+D+65535,D=Math.floor(l/65536),Le=l-D*65536,l=ve+D+65535,D=Math.floor(l/65536),ve=l-D*65536,l=ye+D+65535,D=Math.floor(l/65536),ye=l-D*65536,l=ge+D+65535,D=Math.floor(l/65536),ge=l-D*65536,l=fe+D+65535,D=Math.floor(l/65536),fe=l-D*65536,l=le+D+65535,D=Math.floor(l/65536),le=l-D*65536,l=ce+D+65535,D=Math.floor(l/65536),ce=l-D*65536,l=ae+D+65535,D=Math.floor(l/65536),ae=l-D*65536,l=ne+D+65535,D=Math.floor(l/65536),ne=l-D*65536,W+=D-1+37*(D-1),L[0]=W,L[1]=J,L[2]=de,L[3]=we,L[4]=_e,L[5]=De,L[6]=$e,L[7]=Le,L[8]=ve,L[9]=ye,L[10]=ge,L[11]=fe,L[12]=le,L[13]=ce,L[14]=ae,L[15]=ne}function g(L,P){a(L,P,P)}function B(L,P){const A=i();let l;for(l=0;l<16;l++)A[l]=P[l];for(l=253;l>=0;l--)g(A,A),l!==2&&l!==4&&a(A,A,P);for(l=0;l<16;l++)L[l]=A[l]}function C(L,P){const A=i();let l;for(l=0;l<16;l++)A[l]=P[l];for(l=250;l>=0;l--)g(A,A),l!==1&&a(A,A,P);for(l=0;l<16;l++)L[l]=A[l]}function F(L,P){const A=i(),l=i(),D=i(),W=i(),J=i(),de=i(),we=i(),_e=i(),De=i();E(A,L[1],L[0]),E(De,P[1],P[0]),a(A,A,De),b(l,L[0],L[1]),b(De,P[0],P[1]),a(l,l,De),a(D,L[3],P[3]),a(D,D,h),a(W,L[2],P[2]),b(W,W,W),E(J,l,A),E(de,W,D),b(we,W,D),b(_e,l,A),a(L[0],J,de),a(L[1],_e,we),a(L[2],we,de),a(L[3],J,_e)}function M(L,P,A){for(let l=0;l<4;l++)I(L[l],P[l],A)}function $(L,P){const A=i(),l=i(),D=i();B(D,P[2]),a(A,P[0],D),a(l,P[1],D),x(L,l),L[31]^=w(A)<<7}function T(L,P,A){v(L[0],c),v(L[1],s),v(L[2],s),v(L[3],c);for(let l=255;l>=0;--l){const D=A[l/8|0]>>(l&7)&1;M(L,P,D),F(P,L),F(L,L),M(L,P,D)}}function S(L,P){const A=[i(),i(),i(),i()];v(A[0],f),v(A[1],_),v(A[2],s),a(A[3],f,_),T(L,A,P)}function H(L){if(L.length!==t.SEED_LENGTH)throw new Error(`ed25519: seed must be ${t.SEED_LENGTH} bytes`);const P=(0,r.hash)(L);P[0]&=248,P[31]&=127,P[31]|=64;const A=new Uint8Array(32),l=[i(),i(),i(),i()];S(l,P),$(A,l);const D=new Uint8Array(64);return D.set(L),D.set(A,32),{publicKey:A,secretKey:D}}t.generateKeyPairFromSeed=H;function z(L){const P=(0,e.randomBytes)(32,L),A=H(P);return(0,n.wipe)(P),A}t.generateKeyPair=z;function k(L){if(L.length!==t.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${t.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(L.subarray(32))}t.extractPublicKeyFromSecretKey=k;const U=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function j(L,P){let A,l,D,W;for(l=63;l>=32;--l){for(A=0,D=l-32,W=l-12;D<W;++D)P[D]+=A-16*P[l]*U[D-(l-32)],A=Math.floor((P[D]+128)/256),P[D]-=A*256;P[D]+=A,P[l]=0}for(A=0,D=0;D<32;D++)P[D]+=A-(P[31]>>4)*U[D],A=P[D]>>8,P[D]&=255;for(D=0;D<32;D++)P[D]-=A*U[D];for(l=0;l<32;l++)P[l+1]+=P[l]>>8,L[l]=P[l]&255}function K(L){const P=new Float64Array(64);for(let A=0;A<64;A++)P[A]=L[A];for(let A=0;A<64;A++)L[A]=0;j(L,P)}function Z(L,P){const A=new Float64Array(64),l=[i(),i(),i(),i()],D=(0,r.hash)(L.subarray(0,32));D[0]&=248,D[31]&=127,D[31]|=64;const W=new Uint8Array(64);W.set(D.subarray(32),32);const J=new r.SHA512;J.update(W.subarray(32)),J.update(P);const de=J.digest();J.clean(),K(de),S(l,de),$(W,l),J.reset(),J.update(W.subarray(0,32)),J.update(L.subarray(32)),J.update(P);const we=J.digest();K(we);for(let _e=0;_e<32;_e++)A[_e]=de[_e];for(let _e=0;_e<32;_e++)for(let De=0;De<32;De++)A[_e+De]+=we[_e]*D[De];return j(W.subarray(32),A),W}t.sign=Z;function V(L,P){const A=i(),l=i(),D=i(),W=i(),J=i(),de=i(),we=i();return v(L[2],s),d(L[1],P),g(D,L[1]),a(W,D,u),E(D,D,L[2]),b(W,L[2],W),g(J,W),g(de,J),a(we,de,J),a(A,we,D),a(A,A,W),C(A,A),a(A,A,D),a(A,A,W),a(A,A,W),a(L[0],A,W),g(l,L[0]),a(l,l,W),p(l,D)&&a(L[0],L[0],O),g(l,L[0]),a(l,l,W),p(l,D)?-1:(w(L[0])===P[31]>>7&&E(L[0],c,L[0]),a(L[3],L[0],L[1]),0)}function ee(L,P,A){const l=new Uint8Array(32),D=[i(),i(),i(),i()],W=[i(),i(),i(),i()];if(A.length!==t.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${t.SIGNATURE_LENGTH} bytes`);if(V(W,L))return!1;const J=new r.SHA512;J.update(A.subarray(0,32)),J.update(L),J.update(P);const de=J.digest();return K(de),T(D,W,de),S(W,A.subarray(32)),F(D,W),$(l,D),!R(A,l)}t.verify=ee;function Q(L){let P=[i(),i(),i(),i()];if(V(P,L))throw new Error("Ed25519: invalid public key");let A=i(),l=i(),D=P[1];b(A,s,D),E(l,s,D),B(l,l),a(A,A,l);let W=new Uint8Array(32);return x(W,A),W}t.convertPublicKeyToX25519=Q;function ue(L){const P=(0,r.hash)(L.subarray(0,32));P[0]&=248,P[31]&=127,P[31]|=64;const A=new Uint8Array(P.subarray(0,32));return(0,n.wipe)(P),A}t.convertSecretKeyToX25519=ue})(No);const f0="EdDSA",h0="JWT",Wu=".",Gu="base64url",d0="utf8",g0="utf8",p0=":",_0="did",y0="key",aa="base58btc",m0="z",v0="K36",w0=32;function Ro(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function Yu(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Ro(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function eo(t,e){e||(e=t.reduce((i,o)=>i+o.length,0));const r=Yu(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return Ro(r)}function b0(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var o=t.charAt(i),c=o.charCodeAt(0);if(r[c]!==255)throw new TypeError(o+" is ambiguous");r[c]=i}var s=t.length,u=t.charAt(0),h=Math.log(s)/Math.log(256),f=Math.log(256)/Math.log(s);function _(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var I=0,x=0,R=0,p=m.length;R!==p&&m[R]===0;)R++,I++;for(var w=(p-R)*f+1>>>0,d=new Uint8Array(w);R!==p;){for(var b=m[R],E=0,a=w-1;(b!==0||E<x)&&a!==-1;a--,E++)b+=256*d[a]>>>0,d[a]=b%s>>>0,b=b/s>>>0;if(b!==0)throw new Error("Non-zero carry");x=E,R++}for(var g=w-x;g!==w&&d[g]===0;)g++;for(var B=u.repeat(I);g<w;++g)B+=t.charAt(d[g]);return B}function O(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;var I=0;if(m[I]!==" "){for(var x=0,R=0;m[I]===u;)x++,I++;for(var p=(m.length-I)*h+1>>>0,w=new Uint8Array(p);m[I];){var d=r[m.charCodeAt(I)];if(d===255)return;for(var b=0,E=p-1;(d!==0||b<R)&&E!==-1;E--,b++)d+=s*w[E]>>>0,w[E]=d%256>>>0,d=d/256>>>0;if(d!==0)throw new Error("Non-zero carry");R=b,I++}if(m[I]!==" "){for(var a=p-R;a!==p&&w[a]===0;)a++;for(var g=new Uint8Array(x+(p-a)),B=x;a!==p;)g[B++]=w[a++];return g}}}function v(m){var I=O(m);if(I)return I;throw new Error(`Non-${e} character`)}return{encode:_,decodeUnsafe:O,decode:v}}var E0=b0,D0=E0;const S0=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},x0=t=>new TextEncoder().encode(t),C0=t=>new TextDecoder().decode(t);class O0{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class T0{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Ju(this,e)}}class I0{constructor(e){this.decoders=e}or(e){return Ju(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Ju=(t,e)=>new I0({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class A0{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new O0(e,r,n),this.decoder=new T0(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const si=({name:t,prefix:e,encode:r,decode:n})=>new A0(t,e,r,n),_n=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=D0(r,e);return si({prefix:t,name:e,encode:n,decode:o=>S0(i(o))})},N0=(t,e,r,n)=>{const i={};for(let f=0;f<e.length;++f)i[e[f]]=f;let o=t.length;for(;t[o-1]==="=";)--o;const c=new Uint8Array(o*r/8|0);let s=0,u=0,h=0;for(let f=0;f<o;++f){const _=i[t[f]];if(_===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|_,s+=r,s>=8&&(s-=8,c[h++]=255&u>>s)}if(s>=r||255&u<<8-s)throw new SyntaxError("Unexpected end of data");return c},R0=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let o="",c=0,s=0;for(let u=0;u<t.length;++u)for(s=s<<8|t[u],c+=8;c>r;)c-=r,o+=e[i&s>>c];if(c&&(o+=e[i&s<<r-c]),n)for(;o.length*r&7;)o+="=";return o},ot=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>si({prefix:e,name:t,encode(i){return R0(i,n,r)},decode(i){return N0(i,n,r,t)}}),P0=si({prefix:"\0",name:"identity",encode:t=>C0(t),decode:t=>x0(t)}),L0=Object.freeze(Object.defineProperty({__proto__:null,identity:P0},Symbol.toStringTag,{value:"Module"})),F0=ot({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),M0=Object.freeze(Object.defineProperty({__proto__:null,base2:F0},Symbol.toStringTag,{value:"Module"})),U0=ot({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),$0=Object.freeze(Object.defineProperty({__proto__:null,base8:U0},Symbol.toStringTag,{value:"Module"})),B0=_n({prefix:"9",name:"base10",alphabet:"0123456789"}),k0=Object.freeze(Object.defineProperty({__proto__:null,base10:B0},Symbol.toStringTag,{value:"Module"})),z0=ot({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),j0=ot({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),q0=Object.freeze(Object.defineProperty({__proto__:null,base16:z0,base16upper:j0},Symbol.toStringTag,{value:"Module"})),H0=ot({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),K0=ot({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),V0=ot({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),W0=ot({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),G0=ot({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Y0=ot({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),J0=ot({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),X0=ot({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Q0=ot({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Z0=Object.freeze(Object.defineProperty({__proto__:null,base32:H0,base32hex:G0,base32hexpad:J0,base32hexpadupper:X0,base32hexupper:Y0,base32pad:V0,base32padupper:W0,base32upper:K0,base32z:Q0},Symbol.toStringTag,{value:"Module"})),e_=_n({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),t_=_n({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),r_=Object.freeze(Object.defineProperty({__proto__:null,base36:e_,base36upper:t_},Symbol.toStringTag,{value:"Module"})),n_=_n({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),i_=_n({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),o_=Object.freeze(Object.defineProperty({__proto__:null,base58btc:n_,base58flickr:i_},Symbol.toStringTag,{value:"Module"})),s_=ot({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),a_=ot({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),c_=ot({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),u_=ot({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),l_=Object.freeze(Object.defineProperty({__proto__:null,base64:s_,base64pad:a_,base64url:c_,base64urlpad:u_},Symbol.toStringTag,{value:"Module"})),Xu=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),f_=Xu.reduce((t,e,r)=>(t[r]=e,t),[]),h_=Xu.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function d_(t){return t.reduce((e,r)=>(e+=f_[r],e),"")}function g_(t){const e=[];for(const r of t){const n=h_[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const p_=si({prefix:"🚀",name:"base256emoji",encode:d_,decode:g_}),__=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:p_},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const ca={...L0,...M0,...$0,...k0,...q0,...Z0,...r_,...o_,...l_,...__};function Qu(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const ua=Qu("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Ni=Qu("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=Yu(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),Zu={utf8:ua,"utf-8":ua,hex:ca.base16,latin1:Ni,ascii:Ni,binary:Ni,...ca};function mt(t,e="utf8"){const r=Zu[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function pt(t,e="utf8"){const r=Zu[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Ro(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function qn(t){return mt(pt(Ao(t),d0),Gu)}function el(t){const e=pt(v0,aa),r=m0+mt(eo([e,t]),aa);return[_0,y0,r].join(p0)}function y_(t){return mt(t,Gu)}function m_(t){return pt([qn(t.header),qn(t.payload)].join(Wu),g0)}function v_(t){return[qn(t.header),qn(t.payload),y_(t.signature)].join(Wu)}function la(t=Ur.randomBytes(w0)){return No.generateKeyPairFromSeed(t)}async function w_(t,e,r,n,i=te.fromMiliseconds(Date.now())){const o={alg:f0,typ:h0},c=el(n.publicKey),s=i+r,u={iss:c,sub:t,aud:e,iat:i,exp:s},h=m_({header:o,payload:u}),f=No.sign(n.secretKey,h);return v_({header:o,payload:u,signature:f})}var Po={},ai={};Object.defineProperty(ai,"__esModule",{value:!0});var ct=oe,to=Et,b_=20;function E_(t,e,r){for(var n=1634760805,i=857760878,o=2036477234,c=1797285236,s=r[3]<<24|r[2]<<16|r[1]<<8|r[0],u=r[7]<<24|r[6]<<16|r[5]<<8|r[4],h=r[11]<<24|r[10]<<16|r[9]<<8|r[8],f=r[15]<<24|r[14]<<16|r[13]<<8|r[12],_=r[19]<<24|r[18]<<16|r[17]<<8|r[16],O=r[23]<<24|r[22]<<16|r[21]<<8|r[20],v=r[27]<<24|r[26]<<16|r[25]<<8|r[24],m=r[31]<<24|r[30]<<16|r[29]<<8|r[28],I=e[3]<<24|e[2]<<16|e[1]<<8|e[0],x=e[7]<<24|e[6]<<16|e[5]<<8|e[4],R=e[11]<<24|e[10]<<16|e[9]<<8|e[8],p=e[15]<<24|e[14]<<16|e[13]<<8|e[12],w=n,d=i,b=o,E=c,a=s,g=u,B=h,C=f,F=_,M=O,$=v,T=m,S=I,H=x,z=R,k=p,U=0;U<b_;U+=2)w=w+a|0,S^=w,S=S>>>32-16|S<<16,F=F+S|0,a^=F,a=a>>>32-12|a<<12,d=d+g|0,H^=d,H=H>>>32-16|H<<16,M=M+H|0,g^=M,g=g>>>32-12|g<<12,b=b+B|0,z^=b,z=z>>>32-16|z<<16,$=$+z|0,B^=$,B=B>>>32-12|B<<12,E=E+C|0,k^=E,k=k>>>32-16|k<<16,T=T+k|0,C^=T,C=C>>>32-12|C<<12,b=b+B|0,z^=b,z=z>>>32-8|z<<8,$=$+z|0,B^=$,B=B>>>32-7|B<<7,E=E+C|0,k^=E,k=k>>>32-8|k<<8,T=T+k|0,C^=T,C=C>>>32-7|C<<7,d=d+g|0,H^=d,H=H>>>32-8|H<<8,M=M+H|0,g^=M,g=g>>>32-7|g<<7,w=w+a|0,S^=w,S=S>>>32-8|S<<8,F=F+S|0,a^=F,a=a>>>32-7|a<<7,w=w+g|0,k^=w,k=k>>>32-16|k<<16,$=$+k|0,g^=$,g=g>>>32-12|g<<12,d=d+B|0,S^=d,S=S>>>32-16|S<<16,T=T+S|0,B^=T,B=B>>>32-12|B<<12,b=b+C|0,H^=b,H=H>>>32-16|H<<16,F=F+H|0,C^=F,C=C>>>32-12|C<<12,E=E+a|0,z^=E,z=z>>>32-16|z<<16,M=M+z|0,a^=M,a=a>>>32-12|a<<12,b=b+C|0,H^=b,H=H>>>32-8|H<<8,F=F+H|0,C^=F,C=C>>>32-7|C<<7,E=E+a|0,z^=E,z=z>>>32-8|z<<8,M=M+z|0,a^=M,a=a>>>32-7|a<<7,d=d+B|0,S^=d,S=S>>>32-8|S<<8,T=T+S|0,B^=T,B=B>>>32-7|B<<7,w=w+g|0,k^=w,k=k>>>32-8|k<<8,$=$+k|0,g^=$,g=g>>>32-7|g<<7;ct.writeUint32LE(w+n|0,t,0),ct.writeUint32LE(d+i|0,t,4),ct.writeUint32LE(b+o|0,t,8),ct.writeUint32LE(E+c|0,t,12),ct.writeUint32LE(a+s|0,t,16),ct.writeUint32LE(g+u|0,t,20),ct.writeUint32LE(B+h|0,t,24),ct.writeUint32LE(C+f|0,t,28),ct.writeUint32LE(F+_|0,t,32),ct.writeUint32LE(M+O|0,t,36),ct.writeUint32LE($+v|0,t,40),ct.writeUint32LE(T+m|0,t,44),ct.writeUint32LE(S+I|0,t,48),ct.writeUint32LE(H+x|0,t,52),ct.writeUint32LE(z+R|0,t,56),ct.writeUint32LE(k+p|0,t,60)}function tl(t,e,r,n,i){if(i===void 0&&(i=0),t.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var o,c;if(i===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");o=new Uint8Array(16),c=o.length-e.length,o.set(e,c)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");o=e,c=i}for(var s=new Uint8Array(64),u=0;u<r.length;u+=64){E_(s,o,t);for(var h=u;h<u+64&&h<r.length;h++)n[h]=r[h]^s[h-u];S_(o,0,c)}return to.wipe(s),i===0&&to.wipe(o),n}ai.streamXOR=tl;function D_(t,e,r,n){return n===void 0&&(n=0),to.wipe(r),tl(t,e,r,r,n)}ai.stream=D_;function S_(t,e,r){for(var n=1;r--;)n=n+(t[e]&255)|0,t[e]=n&255,n>>>=8,e++;if(n>0)throw new Error("ChaCha: counter overflow")}var rl={},nr={};Object.defineProperty(nr,"__esModule",{value:!0});function x_(t,e,r){return~(t-1)&e|t-1&r}nr.select=x_;function C_(t,e){return(t|0)-(e|0)-1>>>31&1}nr.lessOrEqual=C_;function nl(t,e){if(t.length!==e.length)return 0;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return 1&r-1>>>8}nr.compare=nl;function O_(t,e){return t.length===0||e.length===0?!1:nl(t,e)!==0}nr.equal=O_;(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=nr,r=Et;t.DIGEST_LENGTH=16;var n=function(){function c(s){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var u=s[0]|s[1]<<8;this._r[0]=u&8191;var h=s[2]|s[3]<<8;this._r[1]=(u>>>13|h<<3)&8191;var f=s[4]|s[5]<<8;this._r[2]=(h>>>10|f<<6)&7939;var _=s[6]|s[7]<<8;this._r[3]=(f>>>7|_<<9)&8191;var O=s[8]|s[9]<<8;this._r[4]=(_>>>4|O<<12)&255,this._r[5]=O>>>1&8190;var v=s[10]|s[11]<<8;this._r[6]=(O>>>14|v<<2)&8191;var m=s[12]|s[13]<<8;this._r[7]=(v>>>11|m<<5)&8065;var I=s[14]|s[15]<<8;this._r[8]=(m>>>8|I<<8)&8191,this._r[9]=I>>>5&127,this._pad[0]=s[16]|s[17]<<8,this._pad[1]=s[18]|s[19]<<8,this._pad[2]=s[20]|s[21]<<8,this._pad[3]=s[22]|s[23]<<8,this._pad[4]=s[24]|s[25]<<8,this._pad[5]=s[26]|s[27]<<8,this._pad[6]=s[28]|s[29]<<8,this._pad[7]=s[30]|s[31]<<8}return c.prototype._blocks=function(s,u,h){for(var f=this._fin?0:2048,_=this._h[0],O=this._h[1],v=this._h[2],m=this._h[3],I=this._h[4],x=this._h[5],R=this._h[6],p=this._h[7],w=this._h[8],d=this._h[9],b=this._r[0],E=this._r[1],a=this._r[2],g=this._r[3],B=this._r[4],C=this._r[5],F=this._r[6],M=this._r[7],$=this._r[8],T=this._r[9];h>=16;){var S=s[u+0]|s[u+1]<<8;_+=S&8191;var H=s[u+2]|s[u+3]<<8;O+=(S>>>13|H<<3)&8191;var z=s[u+4]|s[u+5]<<8;v+=(H>>>10|z<<6)&8191;var k=s[u+6]|s[u+7]<<8;m+=(z>>>7|k<<9)&8191;var U=s[u+8]|s[u+9]<<8;I+=(k>>>4|U<<12)&8191,x+=U>>>1&8191;var j=s[u+10]|s[u+11]<<8;R+=(U>>>14|j<<2)&8191;var K=s[u+12]|s[u+13]<<8;p+=(j>>>11|K<<5)&8191;var Z=s[u+14]|s[u+15]<<8;w+=(K>>>8|Z<<8)&8191,d+=Z>>>5|f;var V=0,ee=V;ee+=_*b,ee+=O*(5*T),ee+=v*(5*$),ee+=m*(5*M),ee+=I*(5*F),V=ee>>>13,ee&=8191,ee+=x*(5*C),ee+=R*(5*B),ee+=p*(5*g),ee+=w*(5*a),ee+=d*(5*E),V+=ee>>>13,ee&=8191;var Q=V;Q+=_*E,Q+=O*b,Q+=v*(5*T),Q+=m*(5*$),Q+=I*(5*M),V=Q>>>13,Q&=8191,Q+=x*(5*F),Q+=R*(5*C),Q+=p*(5*B),Q+=w*(5*g),Q+=d*(5*a),V+=Q>>>13,Q&=8191;var ue=V;ue+=_*a,ue+=O*E,ue+=v*b,ue+=m*(5*T),ue+=I*(5*$),V=ue>>>13,ue&=8191,ue+=x*(5*M),ue+=R*(5*F),ue+=p*(5*C),ue+=w*(5*B),ue+=d*(5*g),V+=ue>>>13,ue&=8191;var L=V;L+=_*g,L+=O*a,L+=v*E,L+=m*b,L+=I*(5*T),V=L>>>13,L&=8191,L+=x*(5*$),L+=R*(5*M),L+=p*(5*F),L+=w*(5*C),L+=d*(5*B),V+=L>>>13,L&=8191;var P=V;P+=_*B,P+=O*g,P+=v*a,P+=m*E,P+=I*b,V=P>>>13,P&=8191,P+=x*(5*T),P+=R*(5*$),P+=p*(5*M),P+=w*(5*F),P+=d*(5*C),V+=P>>>13,P&=8191;var A=V;A+=_*C,A+=O*B,A+=v*g,A+=m*a,A+=I*E,V=A>>>13,A&=8191,A+=x*b,A+=R*(5*T),A+=p*(5*$),A+=w*(5*M),A+=d*(5*F),V+=A>>>13,A&=8191;var l=V;l+=_*F,l+=O*C,l+=v*B,l+=m*g,l+=I*a,V=l>>>13,l&=8191,l+=x*E,l+=R*b,l+=p*(5*T),l+=w*(5*$),l+=d*(5*M),V+=l>>>13,l&=8191;var D=V;D+=_*M,D+=O*F,D+=v*C,D+=m*B,D+=I*g,V=D>>>13,D&=8191,D+=x*a,D+=R*E,D+=p*b,D+=w*(5*T),D+=d*(5*$),V+=D>>>13,D&=8191;var W=V;W+=_*$,W+=O*M,W+=v*F,W+=m*C,W+=I*B,V=W>>>13,W&=8191,W+=x*g,W+=R*a,W+=p*E,W+=w*b,W+=d*(5*T),V+=W>>>13,W&=8191;var J=V;J+=_*T,J+=O*$,J+=v*M,J+=m*F,J+=I*C,V=J>>>13,J&=8191,J+=x*B,J+=R*g,J+=p*a,J+=w*E,J+=d*b,V+=J>>>13,J&=8191,V=(V<<2)+V|0,V=V+ee|0,ee=V&8191,V=V>>>13,Q+=V,_=ee,O=Q,v=ue,m=L,I=P,x=A,R=l,p=D,w=W,d=J,u+=16,h-=16}this._h[0]=_,this._h[1]=O,this._h[2]=v,this._h[3]=m,this._h[4]=I,this._h[5]=x,this._h[6]=R,this._h[7]=p,this._h[8]=w,this._h[9]=d},c.prototype.finish=function(s,u){u===void 0&&(u=0);var h=new Uint16Array(10),f,_,O,v;if(this._leftover){for(v=this._leftover,this._buffer[v++]=1;v<16;v++)this._buffer[v]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(f=this._h[1]>>>13,this._h[1]&=8191,v=2;v<10;v++)this._h[v]+=f,f=this._h[v]>>>13,this._h[v]&=8191;for(this._h[0]+=f*5,f=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=f,f=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=f,h[0]=this._h[0]+5,f=h[0]>>>13,h[0]&=8191,v=1;v<10;v++)h[v]=this._h[v]+f,f=h[v]>>>13,h[v]&=8191;for(h[9]-=1<<13,_=(f^1)-1,v=0;v<10;v++)h[v]&=_;for(_=~_,v=0;v<10;v++)this._h[v]=this._h[v]&_|h[v];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,O=this._h[0]+this._pad[0],this._h[0]=O&65535,v=1;v<8;v++)O=(this._h[v]+this._pad[v]|0)+(O>>>16)|0,this._h[v]=O&65535;return s[u+0]=this._h[0]>>>0,s[u+1]=this._h[0]>>>8,s[u+2]=this._h[1]>>>0,s[u+3]=this._h[1]>>>8,s[u+4]=this._h[2]>>>0,s[u+5]=this._h[2]>>>8,s[u+6]=this._h[3]>>>0,s[u+7]=this._h[3]>>>8,s[u+8]=this._h[4]>>>0,s[u+9]=this._h[4]>>>8,s[u+10]=this._h[5]>>>0,s[u+11]=this._h[5]>>>8,s[u+12]=this._h[6]>>>0,s[u+13]=this._h[6]>>>8,s[u+14]=this._h[7]>>>0,s[u+15]=this._h[7]>>>8,this._finished=!0,this},c.prototype.update=function(s){var u=0,h=s.length,f;if(this._leftover){f=16-this._leftover,f>h&&(f=h);for(var _=0;_<f;_++)this._buffer[this._leftover+_]=s[u+_];if(h-=f,u+=f,this._leftover+=f,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(h>=16&&(f=h-h%16,this._blocks(s,u,f),u+=f,h-=f),h){for(var _=0;_<h;_++)this._buffer[this._leftover+_]=s[u+_];this._leftover+=h}return this},c.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var s=new Uint8Array(16);return this.finish(s),s},c.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},c}();t.Poly1305=n;function i(c,s){var u=new n(c);u.update(s);var h=u.digest();return u.clean(),h}t.oneTimeAuth=i;function o(c,s){return c.length!==t.DIGEST_LENGTH||s.length!==t.DIGEST_LENGTH?!1:e.equal(c,s)}t.equal=o})(rl);(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=ai,r=rl,n=Et,i=oe,o=nr;t.KEY_LENGTH=32,t.NONCE_LENGTH=12,t.TAG_LENGTH=16;var c=new Uint8Array(16),s=function(){function u(h){if(this.nonceLength=t.NONCE_LENGTH,this.tagLength=t.TAG_LENGTH,h.length!==t.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(h)}return u.prototype.seal=function(h,f,_,O){if(h.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var v=new Uint8Array(16);v.set(h,v.length-h.length);var m=new Uint8Array(32);e.stream(this._key,v,m,4);var I=f.length+this.tagLength,x;if(O){if(O.length!==I)throw new Error("ChaCha20Poly1305: incorrect destination length");x=O}else x=new Uint8Array(I);return e.streamXOR(this._key,v,f,x,4),this._authenticate(x.subarray(x.length-this.tagLength,x.length),m,x.subarray(0,x.length-this.tagLength),_),n.wipe(v),x},u.prototype.open=function(h,f,_,O){if(h.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(f.length<this.tagLength)return null;var v=new Uint8Array(16);v.set(h,v.length-h.length);var m=new Uint8Array(32);e.stream(this._key,v,m,4);var I=new Uint8Array(this.tagLength);if(this._authenticate(I,m,f.subarray(0,f.length-this.tagLength),_),!o.equal(I,f.subarray(f.length-this.tagLength,f.length)))return null;var x=f.length-this.tagLength,R;if(O){if(O.length!==x)throw new Error("ChaCha20Poly1305: incorrect destination length");R=O}else R=new Uint8Array(x);return e.streamXOR(this._key,v,f.subarray(0,f.length-this.tagLength),R,4),n.wipe(v),R},u.prototype.clean=function(){return n.wipe(this._key),this},u.prototype._authenticate=function(h,f,_,O){var v=new r.Poly1305(f);O&&(v.update(O),O.length%16>0&&v.update(c.subarray(O.length%16))),v.update(_),_.length%16>0&&v.update(c.subarray(_.length%16));var m=new Uint8Array(8);O&&i.writeUint64LE(O.length,m),v.update(m),i.writeUint64LE(_.length,m),v.update(m);for(var I=v.digest(),x=0;x<I.length;x++)h[x]=I[x];v.clean(),n.wipe(I),n.wipe(m)},u}();t.ChaCha20Poly1305=s})(Po);var il={},yn={},Lo={};Object.defineProperty(Lo,"__esModule",{value:!0});function T_(t){return typeof t.saveState<"u"&&typeof t.restoreState<"u"&&typeof t.cleanSavedState<"u"}Lo.isSerializableHash=T_;Object.defineProperty(yn,"__esModule",{value:!0});var Pt=Lo,I_=nr,A_=Et,ol=function(){function t(e,r){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var n=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(n).clean():n.set(r);for(var i=0;i<n.length;i++)n[i]^=54;this._inner.update(n);for(var i=0;i<n.length;i++)n[i]^=106;this._outer.update(n),Pt.isSerializableHash(this._inner)&&Pt.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),A_.wipe(n)}return t.prototype.reset=function(){if(!Pt.isSerializableHash(this._inner)||!Pt.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){Pt.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),Pt.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(e){return this._inner.update(e),this},t.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(!Pt.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(e){if(!Pt.isSerializableHash(this._inner)||!Pt.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(e){if(!Pt.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},t}();yn.HMAC=ol;function N_(t,e,r){var n=new ol(t,e);n.update(r);var i=n.digest();return n.clean(),i}yn.hmac=N_;yn.equal=I_.equal;Object.defineProperty(il,"__esModule",{value:!0});var fa=yn,ha=Et,R_=function(){function t(e,r,n,i){n===void 0&&(n=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=i;var o=fa.hmac(this._hash,n,r);this._hmac=new fa.HMAC(e,o),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(e){for(var r=new Uint8Array(e),n=0;n<r.length;n++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[n]=this._buffer[this._bufpos++];return r},t.prototype.clean=function(){this._hmac.clean(),ha.wipe(this._buffer),ha.wipe(this._counter),this._bufpos=0},t}(),P_=il.HKDF=R_,ci={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=oe,r=Et;t.DIGEST_LENGTH=32,t.BLOCK_SIZE=64;var n=function(){function s(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return s.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},s.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},s.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},s.prototype.update=function(u,h){if(h===void 0&&(h=u.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var f=0;if(this._bytesHashed+=h,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&h>0;)this._buffer[this._bufferLength++]=u[f++],h--;this._bufferLength===this.blockSize&&(o(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(h>=this.blockSize&&(f=o(this._temp,this._state,u,f,h),h%=this.blockSize);h>0;)this._buffer[this._bufferLength++]=u[f++],h--;return this},s.prototype.finish=function(u){if(!this._finished){var h=this._bytesHashed,f=this._bufferLength,_=h/536870912|0,O=h<<3,v=h%64<56?64:128;this._buffer[f]=128;for(var m=f+1;m<v-8;m++)this._buffer[m]=0;e.writeUint32BE(_,this._buffer,v-8),e.writeUint32BE(O,this._buffer,v-4),o(this._temp,this._state,this._buffer,0,v),this._finished=!0}for(var m=0;m<this.digestLength/4;m++)e.writeUint32BE(this._state[m],u,m*4);return this},s.prototype.digest=function(){var u=new Uint8Array(this.digestLength);return this.finish(u),u},s.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},s.prototype.restoreState=function(u){return this._state.set(u.state),this._bufferLength=u.bufferLength,u.buffer&&this._buffer.set(u.buffer),this._bytesHashed=u.bytesHashed,this._finished=!1,this},s.prototype.cleanSavedState=function(u){r.wipe(u.state),u.buffer&&r.wipe(u.buffer),u.bufferLength=0,u.bytesHashed=0},s}();t.SHA256=n;var i=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function o(s,u,h,f,_){for(;_>=64;){for(var O=u[0],v=u[1],m=u[2],I=u[3],x=u[4],R=u[5],p=u[6],w=u[7],d=0;d<16;d++){var b=f+d*4;s[d]=e.readUint32BE(h,b)}for(var d=16;d<64;d++){var E=s[d-2],a=(E>>>17|E<<32-17)^(E>>>19|E<<32-19)^E>>>10;E=s[d-15];var g=(E>>>7|E<<32-7)^(E>>>18|E<<32-18)^E>>>3;s[d]=(a+s[d-7]|0)+(g+s[d-16]|0)}for(var d=0;d<64;d++){var a=(((x>>>6|x<<26)^(x>>>11|x<<21)^(x>>>25|x<<7))+(x&R^~x&p)|0)+(w+(i[d]+s[d]|0)|0)|0,g=((O>>>2|O<<32-2)^(O>>>13|O<<32-13)^(O>>>22|O<<32-22))+(O&v^O&m^v&m)|0;w=p,p=R,R=x,x=I+a|0,I=m,m=v,v=O,O=a+g|0}u[0]+=O,u[1]+=v,u[2]+=m,u[3]+=I,u[4]+=x,u[5]+=R,u[6]+=p,u[7]+=w,f+=64,_-=64}return f}function c(s){var u=new n;u.update(s);var h=u.digest();return u.clean(),h}t.hash=c})(ci);var Fo={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.sharedKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.scalarMultBase=t.scalarMult=t.SHARED_KEY_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=void 0;const e=Ur,r=Et;t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=32,t.SHARED_KEY_LENGTH=32;function n(d){const b=new Float64Array(16);if(d)for(let E=0;E<d.length;E++)b[E]=d[E];return b}const i=new Uint8Array(32);i[0]=9;const o=n([56129,1]);function c(d){let b=1;for(let E=0;E<16;E++){let a=d[E]+b+65535;b=Math.floor(a/65536),d[E]=a-b*65536}d[0]+=b-1+37*(b-1)}function s(d,b,E){const a=~(E-1);for(let g=0;g<16;g++){const B=a&(d[g]^b[g]);d[g]^=B,b[g]^=B}}function u(d,b){const E=n(),a=n();for(let g=0;g<16;g++)a[g]=b[g];c(a),c(a),c(a);for(let g=0;g<2;g++){E[0]=a[0]-65517;for(let C=1;C<15;C++)E[C]=a[C]-65535-(E[C-1]>>16&1),E[C-1]&=65535;E[15]=a[15]-32767-(E[14]>>16&1);const B=E[15]>>16&1;E[14]&=65535,s(a,E,1-B)}for(let g=0;g<16;g++)d[2*g]=a[g]&255,d[2*g+1]=a[g]>>8}function h(d,b){for(let E=0;E<16;E++)d[E]=b[2*E]+(b[2*E+1]<<8);d[15]&=32767}function f(d,b,E){for(let a=0;a<16;a++)d[a]=b[a]+E[a]}function _(d,b,E){for(let a=0;a<16;a++)d[a]=b[a]-E[a]}function O(d,b,E){let a,g,B=0,C=0,F=0,M=0,$=0,T=0,S=0,H=0,z=0,k=0,U=0,j=0,K=0,Z=0,V=0,ee=0,Q=0,ue=0,L=0,P=0,A=0,l=0,D=0,W=0,J=0,de=0,we=0,_e=0,De=0,$e=0,Le=0,ve=E[0],ye=E[1],ge=E[2],fe=E[3],le=E[4],ce=E[5],ae=E[6],ne=E[7],he=E[8],me=E[9],ie=E[10],be=E[11],Ee=E[12],xe=E[13],Ce=E[14],Se=E[15];a=b[0],B+=a*ve,C+=a*ye,F+=a*ge,M+=a*fe,$+=a*le,T+=a*ce,S+=a*ae,H+=a*ne,z+=a*he,k+=a*me,U+=a*ie,j+=a*be,K+=a*Ee,Z+=a*xe,V+=a*Ce,ee+=a*Se,a=b[1],C+=a*ve,F+=a*ye,M+=a*ge,$+=a*fe,T+=a*le,S+=a*ce,H+=a*ae,z+=a*ne,k+=a*he,U+=a*me,j+=a*ie,K+=a*be,Z+=a*Ee,V+=a*xe,ee+=a*Ce,Q+=a*Se,a=b[2],F+=a*ve,M+=a*ye,$+=a*ge,T+=a*fe,S+=a*le,H+=a*ce,z+=a*ae,k+=a*ne,U+=a*he,j+=a*me,K+=a*ie,Z+=a*be,V+=a*Ee,ee+=a*xe,Q+=a*Ce,ue+=a*Se,a=b[3],M+=a*ve,$+=a*ye,T+=a*ge,S+=a*fe,H+=a*le,z+=a*ce,k+=a*ae,U+=a*ne,j+=a*he,K+=a*me,Z+=a*ie,V+=a*be,ee+=a*Ee,Q+=a*xe,ue+=a*Ce,L+=a*Se,a=b[4],$+=a*ve,T+=a*ye,S+=a*ge,H+=a*fe,z+=a*le,k+=a*ce,U+=a*ae,j+=a*ne,K+=a*he,Z+=a*me,V+=a*ie,ee+=a*be,Q+=a*Ee,ue+=a*xe,L+=a*Ce,P+=a*Se,a=b[5],T+=a*ve,S+=a*ye,H+=a*ge,z+=a*fe,k+=a*le,U+=a*ce,j+=a*ae,K+=a*ne,Z+=a*he,V+=a*me,ee+=a*ie,Q+=a*be,ue+=a*Ee,L+=a*xe,P+=a*Ce,A+=a*Se,a=b[6],S+=a*ve,H+=a*ye,z+=a*ge,k+=a*fe,U+=a*le,j+=a*ce,K+=a*ae,Z+=a*ne,V+=a*he,ee+=a*me,Q+=a*ie,ue+=a*be,L+=a*Ee,P+=a*xe,A+=a*Ce,l+=a*Se,a=b[7],H+=a*ve,z+=a*ye,k+=a*ge,U+=a*fe,j+=a*le,K+=a*ce,Z+=a*ae,V+=a*ne,ee+=a*he,Q+=a*me,ue+=a*ie,L+=a*be,P+=a*Ee,A+=a*xe,l+=a*Ce,D+=a*Se,a=b[8],z+=a*ve,k+=a*ye,U+=a*ge,j+=a*fe,K+=a*le,Z+=a*ce,V+=a*ae,ee+=a*ne,Q+=a*he,ue+=a*me,L+=a*ie,P+=a*be,A+=a*Ee,l+=a*xe,D+=a*Ce,W+=a*Se,a=b[9],k+=a*ve,U+=a*ye,j+=a*ge,K+=a*fe,Z+=a*le,V+=a*ce,ee+=a*ae,Q+=a*ne,ue+=a*he,L+=a*me,P+=a*ie,A+=a*be,l+=a*Ee,D+=a*xe,W+=a*Ce,J+=a*Se,a=b[10],U+=a*ve,j+=a*ye,K+=a*ge,Z+=a*fe,V+=a*le,ee+=a*ce,Q+=a*ae,ue+=a*ne,L+=a*he,P+=a*me,A+=a*ie,l+=a*be,D+=a*Ee,W+=a*xe,J+=a*Ce,de+=a*Se,a=b[11],j+=a*ve,K+=a*ye,Z+=a*ge,V+=a*fe,ee+=a*le,Q+=a*ce,ue+=a*ae,L+=a*ne,P+=a*he,A+=a*me,l+=a*ie,D+=a*be,W+=a*Ee,J+=a*xe,de+=a*Ce,we+=a*Se,a=b[12],K+=a*ve,Z+=a*ye,V+=a*ge,ee+=a*fe,Q+=a*le,ue+=a*ce,L+=a*ae,P+=a*ne,A+=a*he,l+=a*me,D+=a*ie,W+=a*be,J+=a*Ee,de+=a*xe,we+=a*Ce,_e+=a*Se,a=b[13],Z+=a*ve,V+=a*ye,ee+=a*ge,Q+=a*fe,ue+=a*le,L+=a*ce,P+=a*ae,A+=a*ne,l+=a*he,D+=a*me,W+=a*ie,J+=a*be,de+=a*Ee,we+=a*xe,_e+=a*Ce,De+=a*Se,a=b[14],V+=a*ve,ee+=a*ye,Q+=a*ge,ue+=a*fe,L+=a*le,P+=a*ce,A+=a*ae,l+=a*ne,D+=a*he,W+=a*me,J+=a*ie,de+=a*be,we+=a*Ee,_e+=a*xe,De+=a*Ce,$e+=a*Se,a=b[15],ee+=a*ve,Q+=a*ye,ue+=a*ge,L+=a*fe,P+=a*le,A+=a*ce,l+=a*ae,D+=a*ne,W+=a*he,J+=a*me,de+=a*ie,we+=a*be,_e+=a*Ee,De+=a*xe,$e+=a*Ce,Le+=a*Se,B+=38*Q,C+=38*ue,F+=38*L,M+=38*P,$+=38*A,T+=38*l,S+=38*D,H+=38*W,z+=38*J,k+=38*de,U+=38*we,j+=38*_e,K+=38*De,Z+=38*$e,V+=38*Le,g=1,a=B+g+65535,g=Math.floor(a/65536),B=a-g*65536,a=C+g+65535,g=Math.floor(a/65536),C=a-g*65536,a=F+g+65535,g=Math.floor(a/65536),F=a-g*65536,a=M+g+65535,g=Math.floor(a/65536),M=a-g*65536,a=$+g+65535,g=Math.floor(a/65536),$=a-g*65536,a=T+g+65535,g=Math.floor(a/65536),T=a-g*65536,a=S+g+65535,g=Math.floor(a/65536),S=a-g*65536,a=H+g+65535,g=Math.floor(a/65536),H=a-g*65536,a=z+g+65535,g=Math.floor(a/65536),z=a-g*65536,a=k+g+65535,g=Math.floor(a/65536),k=a-g*65536,a=U+g+65535,g=Math.floor(a/65536),U=a-g*65536,a=j+g+65535,g=Math.floor(a/65536),j=a-g*65536,a=K+g+65535,g=Math.floor(a/65536),K=a-g*65536,a=Z+g+65535,g=Math.floor(a/65536),Z=a-g*65536,a=V+g+65535,g=Math.floor(a/65536),V=a-g*65536,a=ee+g+65535,g=Math.floor(a/65536),ee=a-g*65536,B+=g-1+37*(g-1),g=1,a=B+g+65535,g=Math.floor(a/65536),B=a-g*65536,a=C+g+65535,g=Math.floor(a/65536),C=a-g*65536,a=F+g+65535,g=Math.floor(a/65536),F=a-g*65536,a=M+g+65535,g=Math.floor(a/65536),M=a-g*65536,a=$+g+65535,g=Math.floor(a/65536),$=a-g*65536,a=T+g+65535,g=Math.floor(a/65536),T=a-g*65536,a=S+g+65535,g=Math.floor(a/65536),S=a-g*65536,a=H+g+65535,g=Math.floor(a/65536),H=a-g*65536,a=z+g+65535,g=Math.floor(a/65536),z=a-g*65536,a=k+g+65535,g=Math.floor(a/65536),k=a-g*65536,a=U+g+65535,g=Math.floor(a/65536),U=a-g*65536,a=j+g+65535,g=Math.floor(a/65536),j=a-g*65536,a=K+g+65535,g=Math.floor(a/65536),K=a-g*65536,a=Z+g+65535,g=Math.floor(a/65536),Z=a-g*65536,a=V+g+65535,g=Math.floor(a/65536),V=a-g*65536,a=ee+g+65535,g=Math.floor(a/65536),ee=a-g*65536,B+=g-1+37*(g-1),d[0]=B,d[1]=C,d[2]=F,d[3]=M,d[4]=$,d[5]=T,d[6]=S,d[7]=H,d[8]=z,d[9]=k,d[10]=U,d[11]=j,d[12]=K,d[13]=Z,d[14]=V,d[15]=ee}function v(d,b){O(d,b,b)}function m(d,b){const E=n();for(let a=0;a<16;a++)E[a]=b[a];for(let a=253;a>=0;a--)v(E,E),a!==2&&a!==4&&O(E,E,b);for(let a=0;a<16;a++)d[a]=E[a]}function I(d,b){const E=new Uint8Array(32),a=new Float64Array(80),g=n(),B=n(),C=n(),F=n(),M=n(),$=n();for(let z=0;z<31;z++)E[z]=d[z];E[31]=d[31]&127|64,E[0]&=248,h(a,b);for(let z=0;z<16;z++)B[z]=a[z];g[0]=F[0]=1;for(let z=254;z>=0;--z){const k=E[z>>>3]>>>(z&7)&1;s(g,B,k),s(C,F,k),f(M,g,C),_(g,g,C),f(C,B,F),_(B,B,F),v(F,M),v($,g),O(g,C,g),O(C,B,M),f(M,g,C),_(g,g,C),v(B,g),_(C,F,$),O(g,C,o),f(g,g,F),O(C,C,g),O(g,F,$),O(F,B,a),v(B,M),s(g,B,k),s(C,F,k)}for(let z=0;z<16;z++)a[z+16]=g[z],a[z+32]=C[z],a[z+48]=B[z],a[z+64]=F[z];const T=a.subarray(32),S=a.subarray(16);m(T,T),O(S,S,T);const H=new Uint8Array(32);return u(H,S),H}t.scalarMult=I;function x(d){return I(d,i)}t.scalarMultBase=x;function R(d){if(d.length!==t.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${t.SECRET_KEY_LENGTH} bytes`);const b=new Uint8Array(d);return{publicKey:x(b),secretKey:b}}t.generateKeyPairFromSeed=R;function p(d){const b=(0,e.randomBytes)(32,d),E=R(b);return(0,r.wipe)(b),E}t.generateKeyPair=p;function w(d,b,E=!1){if(d.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(b.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const a=I(d,b);if(E){let g=0;for(let B=0;B<a.length;B++)g|=a[B];if(g===0)throw new Error("X25519: invalid shared key")}return a}t.sharedKey=w})(Fo);var da=globalThis&&globalThis.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},L_=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),F_=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=it.platform}return t}(),M_=function(){function t(e,r,n,i){this.name=e,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return t}(),U_=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),$_=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),B_=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,k_=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,ga=3,z_=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",B_]],pa=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function j_(t){return t?_a(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new $_:typeof navigator<"u"?_a(navigator.userAgent):K_()}function q_(t){return t!==""&&z_.reduce(function(e,r){var n=r[0],i=r[1];if(e)return e;var o=i.exec(t);return!!o&&[n,o]},!1)}function _a(t){var e=q_(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new U_;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<ga&&(i=da(da([],i,!0),V_(ga-i.length),!0)):i=[];var o=i.join("."),c=H_(t),s=k_.exec(t);return s&&s[1]?new M_(r,o,c,s[1]):new L_(r,o,c)}function H_(t){for(var e=0,r=pa.length;e<r;e++){var n=pa[e],i=n[0],o=n[1],c=o.exec(t);if(c)return i}return null}function K_(){var t=typeof it<"u"&&it.version;return t?new F_(it.version.slice(1)):null}function V_(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var Ie={};Object.defineProperty(Ie,"__esModule",{value:!0});Ie.getLocalStorage=Ie.getLocalStorageOrThrow=Ie.getCrypto=Ie.getCryptoOrThrow=al=Ie.getLocation=Ie.getLocationOrThrow=Mo=Ie.getNavigator=Ie.getNavigatorOrThrow=sl=Ie.getDocument=Ie.getDocumentOrThrow=Ie.getFromWindowOrThrow=Ie.getFromWindow=void 0;function vr(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Ie.getFromWindow=vr;function $r(t){const e=vr(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Ie.getFromWindowOrThrow=$r;function W_(){return $r("document")}Ie.getDocumentOrThrow=W_;function G_(){return vr("document")}var sl=Ie.getDocument=G_;function Y_(){return $r("navigator")}Ie.getNavigatorOrThrow=Y_;function J_(){return vr("navigator")}var Mo=Ie.getNavigator=J_;function X_(){return $r("location")}Ie.getLocationOrThrow=X_;function Q_(){return vr("location")}var al=Ie.getLocation=Q_;function Z_(){return $r("crypto")}Ie.getCryptoOrThrow=Z_;function e1(){return vr("crypto")}Ie.getCrypto=e1;function t1(){return $r("localStorage")}Ie.getLocalStorageOrThrow=t1;function r1(){return vr("localStorage")}Ie.getLocalStorage=r1;var Uo={};Object.defineProperty(Uo,"__esModule",{value:!0});var cl=Uo.getWindowMetadata=void 0;const ya=Ie;function n1(){let t,e;try{t=ya.getDocumentOrThrow(),e=ya.getLocationOrThrow()}catch{return null}function r(){const _=t.getElementsByTagName("link"),O=[];for(let v=0;v<_.length;v++){const m=_[v],I=m.getAttribute("rel");if(I&&I.toLowerCase().indexOf("icon")>-1){const x=m.getAttribute("href");if(x)if(x.toLowerCase().indexOf("https:")===-1&&x.toLowerCase().indexOf("http:")===-1&&x.indexOf("//")!==0){let R=e.protocol+"//"+e.host;if(x.indexOf("/")===0)R+=x;else{const p=e.pathname.split("/");p.pop();const w=p.join("/");R+=w+"/"+x}O.push(R)}else if(x.indexOf("//")===0){const R=e.protocol+x;O.push(R)}else O.push(x)}}return O}function n(..._){const O=t.getElementsByTagName("meta");for(let v=0;v<O.length;v++){const m=O[v],I=["itemprop","property","name"].map(x=>m.getAttribute(x)).filter(x=>x?_.includes(x):!1);if(I.length&&I){const x=m.getAttribute("content");if(x)return x}}return""}function i(){let _=n("name","og:site_name","og:title","twitter:title");return _||(_=t.title),_}function o(){return n("description","og:description","twitter:description","keywords")}const c=i(),s=o(),u=e.origin,h=r();return{description:s,url:u,icons:h,name:c}}cl=Uo.getWindowMetadata=n1;var ln={},i1=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),ul="%[a-f0-9]{2}",ma=new RegExp("("+ul+")|([^%]+?)","gi"),va=new RegExp("("+ul+")+","gi");function ro(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(t.length===1)return t;e=e||1;var r=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],ro(r),ro(n))}function o1(t){try{return decodeURIComponent(t)}catch{for(var e=t.match(ma)||[],r=1;r<e.length;r++)t=ro(e,r).join(""),e=t.match(ma)||[];return t}}function s1(t){for(var e={"%FE%FF":"��","%FF%FE":"��"},r=va.exec(t);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{var n=o1(r[0]);n!==r[0]&&(e[r[0]]=n)}r=va.exec(t)}e["%C2"]="�";for(var i=Object.keys(e),o=0;o<i.length;o++){var c=i[o];t=t.replace(new RegExp(c,"g"),e[c])}return t}var a1=function(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch{return s1(t)}},c1=(t,e)=>{if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[t];const r=t.indexOf(e);return r===-1?[t]:[t.slice(0,r),t.slice(r+e.length)]},u1=function(t,e){for(var r={},n=Object.keys(t),i=Array.isArray(e),o=0;o<n.length;o++){var c=n[o],s=t[c];(i?e.indexOf(c)!==-1:e(c,s,t))&&(r[c]=s)}return r};(function(t){const e=i1,r=a1,n=c1,i=u1,o=p=>p==null,c=Symbol("encodeFragmentIdentifier");function s(p){switch(p.arrayFormat){case"index":return w=>(d,b)=>{const E=d.length;return b===void 0||p.skipNull&&b===null||p.skipEmptyString&&b===""?d:b===null?[...d,[f(w,p),"[",E,"]"].join("")]:[...d,[f(w,p),"[",f(E,p),"]=",f(b,p)].join("")]};case"bracket":return w=>(d,b)=>b===void 0||p.skipNull&&b===null||p.skipEmptyString&&b===""?d:b===null?[...d,[f(w,p),"[]"].join("")]:[...d,[f(w,p),"[]=",f(b,p)].join("")];case"colon-list-separator":return w=>(d,b)=>b===void 0||p.skipNull&&b===null||p.skipEmptyString&&b===""?d:b===null?[...d,[f(w,p),":list="].join("")]:[...d,[f(w,p),":list=",f(b,p)].join("")];case"comma":case"separator":case"bracket-separator":{const w=p.arrayFormat==="bracket-separator"?"[]=":"=";return d=>(b,E)=>E===void 0||p.skipNull&&E===null||p.skipEmptyString&&E===""?b:(E=E===null?"":E,b.length===0?[[f(d,p),w,f(E,p)].join("")]:[[b,f(E,p)].join(p.arrayFormatSeparator)])}default:return w=>(d,b)=>b===void 0||p.skipNull&&b===null||p.skipEmptyString&&b===""?d:b===null?[...d,f(w,p)]:[...d,[f(w,p),"=",f(b,p)].join("")]}}function u(p){let w;switch(p.arrayFormat){case"index":return(d,b,E)=>{if(w=/\[(\d*)\]$/.exec(d),d=d.replace(/\[\d*\]$/,""),!w){E[d]=b;return}E[d]===void 0&&(E[d]={}),E[d][w[1]]=b};case"bracket":return(d,b,E)=>{if(w=/(\[\])$/.exec(d),d=d.replace(/\[\]$/,""),!w){E[d]=b;return}if(E[d]===void 0){E[d]=[b];return}E[d]=[].concat(E[d],b)};case"colon-list-separator":return(d,b,E)=>{if(w=/(:list)$/.exec(d),d=d.replace(/:list$/,""),!w){E[d]=b;return}if(E[d]===void 0){E[d]=[b];return}E[d]=[].concat(E[d],b)};case"comma":case"separator":return(d,b,E)=>{const a=typeof b=="string"&&b.includes(p.arrayFormatSeparator),g=typeof b=="string"&&!a&&_(b,p).includes(p.arrayFormatSeparator);b=g?_(b,p):b;const B=a||g?b.split(p.arrayFormatSeparator).map(C=>_(C,p)):b===null?b:_(b,p);E[d]=B};case"bracket-separator":return(d,b,E)=>{const a=/(\[\])$/.test(d);if(d=d.replace(/\[\]$/,""),!a){E[d]=b&&_(b,p);return}const g=b===null?[]:b.split(p.arrayFormatSeparator).map(B=>_(B,p));if(E[d]===void 0){E[d]=g;return}E[d]=[].concat(E[d],g)};default:return(d,b,E)=>{if(E[d]===void 0){E[d]=b;return}E[d]=[].concat(E[d],b)}}}function h(p){if(typeof p!="string"||p.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function f(p,w){return w.encode?w.strict?e(p):encodeURIComponent(p):p}function _(p,w){return w.decode?r(p):p}function O(p){return Array.isArray(p)?p.sort():typeof p=="object"?O(Object.keys(p)).sort((w,d)=>Number(w)-Number(d)).map(w=>p[w]):p}function v(p){const w=p.indexOf("#");return w!==-1&&(p=p.slice(0,w)),p}function m(p){let w="";const d=p.indexOf("#");return d!==-1&&(w=p.slice(d)),w}function I(p){p=v(p);const w=p.indexOf("?");return w===-1?"":p.slice(w+1)}function x(p,w){return w.parseNumbers&&!Number.isNaN(Number(p))&&typeof p=="string"&&p.trim()!==""?p=Number(p):w.parseBooleans&&p!==null&&(p.toLowerCase()==="true"||p.toLowerCase()==="false")&&(p=p.toLowerCase()==="true"),p}function R(p,w){w=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},w),h(w.arrayFormatSeparator);const d=u(w),b=Object.create(null);if(typeof p!="string"||(p=p.trim().replace(/^[?#&]/,""),!p))return b;for(const E of p.split("&")){if(E==="")continue;let[a,g]=n(w.decode?E.replace(/\+/g," "):E,"=");g=g===void 0?null:["comma","separator","bracket-separator"].includes(w.arrayFormat)?g:_(g,w),d(_(a,w),g,b)}for(const E of Object.keys(b)){const a=b[E];if(typeof a=="object"&&a!==null)for(const g of Object.keys(a))a[g]=x(a[g],w);else b[E]=x(a,w)}return w.sort===!1?b:(w.sort===!0?Object.keys(b).sort():Object.keys(b).sort(w.sort)).reduce((E,a)=>{const g=b[a];return g&&typeof g=="object"&&!Array.isArray(g)?E[a]=O(g):E[a]=g,E},Object.create(null))}t.extract=I,t.parse=R,t.stringify=(p,w)=>{if(!p)return"";w=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},w),h(w.arrayFormatSeparator);const d=g=>w.skipNull&&o(p[g])||w.skipEmptyString&&p[g]==="",b=s(w),E={};for(const g of Object.keys(p))d(g)||(E[g]=p[g]);const a=Object.keys(E);return w.sort!==!1&&a.sort(w.sort),a.map(g=>{const B=p[g];return B===void 0?"":B===null?f(g,w):Array.isArray(B)?B.length===0&&w.arrayFormat==="bracket-separator"?f(g,w)+"[]":B.reduce(b(g),[]).join("&"):f(g,w)+"="+f(B,w)}).filter(g=>g.length>0).join("&")},t.parseUrl=(p,w)=>{w=Object.assign({decode:!0},w);const[d,b]=n(p,"#");return Object.assign({url:d.split("?")[0]||"",query:R(I(p),w)},w&&w.parseFragmentIdentifier&&b?{fragmentIdentifier:_(b,w)}:{})},t.stringifyUrl=(p,w)=>{w=Object.assign({encode:!0,strict:!0,[c]:!0},w);const d=v(p.url).split("?")[0]||"",b=t.extract(p.url),E=t.parse(b,{sort:!1}),a=Object.assign(E,p.query);let g=t.stringify(a,w);g&&(g=`?${g}`);let B=m(p.url);return p.fragmentIdentifier&&(B=`#${w[c]?f(p.fragmentIdentifier,w):p.fragmentIdentifier}`),`${d}${g}${B}`},t.pick=(p,w,d)=>{d=Object.assign({parseFragmentIdentifier:!0,[c]:!1},d);const{url:b,query:E,fragmentIdentifier:a}=t.parseUrl(p,d);return t.stringifyUrl({url:b,query:i(E,w),fragmentIdentifier:a},d)},t.exclude=(p,w,d)=>{const b=Array.isArray(w)?E=>!w.includes(E):(E,a)=>!w(E,a);return t.pick(p,b,d)}})(ln);const l1={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}},f1=":";function h1(t){const[e,r,n]=t.split(f1);return{namespace:e,reference:r,address:n}}function ll(t,e){return t.includes(":")?[t]:e.chains||[]}const fl="base10",_t="base16",no="base64pad",$o="utf8",hl=0,wr=1,d1=0,wa=1,io=12,Bo=32;function g1(){const t=Fo.generateKeyPair();return{privateKey:mt(t.secretKey,_t),publicKey:mt(t.publicKey,_t)}}function oo(){const t=Ur.randomBytes(Bo);return mt(t,_t)}function p1(t,e){const r=Fo.sharedKey(pt(t,_t),pt(e,_t)),n=new P_(ci.SHA256,r).expand(Bo);return mt(n,_t)}function _1(t){const e=ci.hash(pt(t,_t));return mt(e,_t)}function Hn(t){const e=ci.hash(pt(t,$o));return mt(e,_t)}function y1(t){return pt(`${t}`,fl)}function mn(t){return Number(mt(t,fl))}function m1(t){const e=y1(typeof t.type<"u"?t.type:hl);if(mn(e)===wr&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?pt(t.senderPublicKey,_t):void 0,n=typeof t.iv<"u"?pt(t.iv,_t):Ur.randomBytes(io),i=new Po.ChaCha20Poly1305(pt(t.symKey,_t)).seal(n,pt(t.message,$o));return w1({type:e,sealed:i,iv:n,senderPublicKey:r})}function v1(t){const e=new Po.ChaCha20Poly1305(pt(t.symKey,_t)),{sealed:r,iv:n}=ko(t.encoded),i=e.open(n,r);if(i===null)throw new Error("Failed to decrypt");return mt(i,$o)}function w1(t){if(mn(t.type)===wr){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return mt(eo([t.type,t.senderPublicKey,t.iv,t.sealed]),no)}return mt(eo([t.type,t.iv,t.sealed]),no)}function ko(t){const e=pt(t,no),r=e.slice(d1,wa),n=wa;if(mn(r)===wr){const s=n+Bo,u=s+io,h=e.slice(n,s),f=e.slice(s,u),_=e.slice(u);return{type:r,sealed:_,iv:f,senderPublicKey:h}}const i=n+io,o=e.slice(n,i),c=e.slice(i);return{type:r,sealed:c,iv:o}}function b1(t,e){const r=ko(t);return dl({type:mn(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?mt(r.senderPublicKey,_t):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function dl(t){const e=(t==null?void 0:t.type)||hl;if(e===wr){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function ba(t){return t.type===wr&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}var E1=Object.defineProperty,Ea=Object.getOwnPropertySymbols,D1=Object.prototype.hasOwnProperty,S1=Object.prototype.propertyIsEnumerable,Da=(t,e,r)=>e in t?E1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Sa=(t,e)=>{for(var r in e||(e={}))D1.call(e,r)&&Da(t,r,e[r]);if(Ea)for(var r of Ea(e))S1.call(e,r)&&Da(t,r,e[r]);return t};const x1="ReactNative",Qr={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},C1="js";function gl(){return typeof it<"u"&&typeof it.versions<"u"&&typeof it.versions.node<"u"}function O1(){return!sl()&&!!Mo()&&navigator.product===x1}function T1(){return!gl()&&!!Mo()}function I1(){return O1()?Qr.reactNative:gl()?Qr.node:T1()?Qr.browser:Qr.unknown}function A1(t,e){let r=ln.parse(t);return r=Sa(Sa({},r),e),t=ln.stringify(r),t}function N1(){return cl()||{name:"",description:"",url:"",icons:[""]}}function R1(){const t=j_();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function P1(){var t;const e=I1();return e===Qr.browser?[e,((t=al())==null?void 0:t.host)||"unknown"].join(":"):e}function L1(t,e,r){const n=R1(),i=P1();return[[t,e].join("-"),[C1,r].join("-"),n,i].join("/")}function F1({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:i,projectId:o,useOnCloseEvent:c}){const s=r.split("?"),u=L1(t,e,n),h={auth:i,ua:u,projectId:o,useOnCloseEvent:c||void 0},f=A1(s[1]||"",h);return s[0]+"?"+f}function gr(t,e){return t.filter(r=>e.includes(r)).length===t.length}function pl(t){return Object.fromEntries(t.entries())}function _l(t){return new Map(Object.entries(t))}function hr(t=te.FIVE_MINUTES,e){const r=te.toMiliseconds(t||te.FIVE_MINUTES);let n,i,o;return{resolve:c=>{o&&n&&(clearTimeout(o),n(c))},reject:c=>{o&&i&&(clearTimeout(o),i(c))},done:()=>new Promise((c,s)=>{o=setTimeout(()=>{s(new Error(e))},r),n=c,i=s})}}function so(t,e){return new Promise(async(r,n)=>{const i=setTimeout(()=>n(),e),o=await t;clearTimeout(i),r(o)})}function yl(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function M1(t){return yl("topic",t)}function U1(t){return yl("id",t)}function ml(t){const[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function Mt(t,e){return te.fromMiliseconds((e||Date.now())+te.toMiliseconds(t))}function Xt(t){return Date.now()>=te.toMiliseconds(t)}function Be(t,e){return`${t}${e?`:${e}`:""}`}const $1="irn";function ao(t){return(t==null?void 0:t.relay)||{protocol:$1}}function Pn(t){const e=l1[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}var B1=Object.defineProperty,xa=Object.getOwnPropertySymbols,k1=Object.prototype.hasOwnProperty,z1=Object.prototype.propertyIsEnumerable,Ca=(t,e,r)=>e in t?B1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,j1=(t,e)=>{for(var r in e||(e={}))k1.call(e,r)&&Ca(t,r,e[r]);if(xa)for(var r of xa(e))z1.call(e,r)&&Ca(t,r,e[r]);return t};function q1(t,e="-"){const r={},n="relay"+e;return Object.keys(t).forEach(i=>{if(i.startsWith(n)){const o=i.replace(n,""),c=t[i];r[o]=c}}),r}function H1(t){const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),i=t.substring(e+1,r).split("@"),o=typeof r<"u"?t.substring(r):"",c=ln.parse(o);return{protocol:n,topic:i[0],version:parseInt(i[1],10),symKey:c.symKey,relay:q1(c)}}function K1(t,e="-"){const r="relay",n={};return Object.keys(t).forEach(i=>{const o=r+e+i;t[i]&&(n[o]=t[i])}),n}function V1(t){return`${t.protocol}:${t.topic}@${t.version}?`+ln.stringify(j1({symKey:t.symKey},K1(t.relay)))}function Br(t){const e=[];return t.forEach(r=>{const[n,i]=r.split(":");e.push(`${n}:${i}`)}),e}function W1(t){const e=[];return Object.values(t).forEach(r=>{e.push(...Br(r.accounts))}),e}function G1(t,e){const r=[];return Object.values(t).forEach(n=>{Br(n.accounts).includes(e)&&r.push(...n.methods)}),r}function Y1(t,e){const r=[];return Object.values(t).forEach(n=>{Br(n.accounts).includes(e)&&r.push(...n.events)}),r}function J1(t,e){const r=Ln(t,e);if(r)throw new Error(r.message);const n={};for(const[i,o]of Object.entries(t))n[i]={methods:o.methods,events:o.events,chains:o.accounts.map(c=>`${c.split(":")[0]}:${c.split(":")[1]}`)};return n}const X1={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Q1={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function G(t,e){const{message:r,code:n}=Q1[t];return{message:e?`${r} ${e}`:r,code:n}}function Ve(t,e){const{message:r,code:n}=X1[t];return{message:e?`${r} ${e}`:r,code:n}}function ui(t,e){return Array.isArray(t)?typeof e<"u"&&t.length?t.every(e):!0:!1}function rn(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function ht(t){return typeof t>"u"}function rt(t,e){return e&&ht(t)?!0:typeof t=="string"&&!!t.trim().length}function zo(t,e){return e&&ht(t)?!0:typeof t=="number"&&!isNaN(t)}function Z1(t,e){const{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),i=Object.keys(r);let o=!0;return gr(i,n)?(n.forEach(c=>{const{accounts:s,methods:u,events:h}=t.namespaces[c],f=Br(s),_=r[c];(!gr(ll(c,_),f)||!gr(_.methods,u)||!gr(_.events,h))&&(o=!1)}),o):!1}function jo(t){return rt(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function ey(t){if(rt(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&jo(r)}}return!1}function ty(t){if(rt(t,!1))try{return typeof new URL(t)<"u"}catch{return!1}return!1}function ry(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function ny(t){return t==null?void 0:t.topic}function iy(t,e){let r=null;return rt(t==null?void 0:t.publicKey,!1)||(r=G("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function Oa(t){let e=!0;return ui(t)?t.length&&(e=t.every(r=>rt(r,!1))):e=!1,e}function oy(t,e,r){let n=null;return ui(e)?e.forEach(i=>{n||(!jo(i)||!i.includes(t))&&(n=Ve("UNSUPPORTED_CHAINS",`${r}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):n=Ve("UNSUPPORTED_CHAINS",`${r}, chains ${e} should be an array of strings conforming to "namespace:chainId" format`),n}function sy(t,e){let r=null;return Object.entries(t).forEach(([n,i])=>{if(r)return;const o=oy(n,ll(n,i),`${e} requiredNamespace`);o&&(r=o)}),r}function ay(t,e){let r=null;return ui(t)?t.forEach(n=>{r||ey(n)||(r=Ve("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=Ve("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function cy(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=ay(n==null?void 0:n.accounts,`${e} namespace`);i&&(r=i)}),r}function uy(t,e){let r=null;return Oa(t==null?void 0:t.methods)?Oa(t==null?void 0:t.events)||(r=Ve("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=Ve("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function vl(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=uy(n,`${e}, namespace`);i&&(r=i)}),r}function ly(t,e,r){let n=null;if(t&&rn(t)){const i=vl(t,e);i&&(n=i);const o=sy(t,e);o&&(n=o)}else n=G("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}function Ln(t,e){let r=null;if(t&&rn(t)){const n=vl(t,e);n&&(r=n);const i=cy(t,e);i&&(r=i)}else r=G("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function wl(t){return rt(t.protocol,!0)}function fy(t,e){let r=!1;return e&&!t?r=!0:t&&ui(t)&&t.length&&t.forEach(n=>{r=wl(n)}),r}function hy(t){return typeof t=="number"}function dt(t){return typeof t<"u"&&typeof t!==null}function dy(t){return!(!t||typeof t!="object"||!t.code||!zo(t.code,!1)||!t.message||!rt(t.message,!1))}function gy(t){return!(ht(t)||!rt(t.method,!1))}function py(t){return!(ht(t)||ht(t.result)&&ht(t.error)||!zo(t.id,!1)||!rt(t.jsonrpc,!1))}function _y(t){return!(ht(t)||!rt(t.name,!1))}function Ta(t,e){return!(!jo(e)||!W1(t).includes(e))}function yy(t,e,r){return rt(r,!1)?G1(t,e).includes(r):!1}function my(t,e,r){return rt(r,!1)?Y1(t,e).includes(r):!1}function Ia(t,e,r){let n=null;const i=vy(t),o=wy(e),c=Object.keys(i),s=Object.keys(o),u=Aa(Object.keys(t)),h=Aa(Object.keys(e)),f=u.filter(_=>!h.includes(_));return f.length&&(n=G("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${f.toString()}
      Received: ${Object.keys(e).toString()}`)),gr(c,s)||(n=G("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${c.toString()}
      Approved: ${s.toString()}`)),Object.keys(e).forEach(_=>{if(!_.includes(":")||n)return;const O=Br(e[_].accounts);O.includes(_)||(n=G("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${_}
        Required: ${_}
        Approved: ${O.toString()}`))}),c.forEach(_=>{n||(gr(i[_].methods,o[_].methods)?gr(i[_].events,o[_].events)||(n=G("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${_}`)):n=G("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${_}`))}),n}function vy(t){const e={};return Object.keys(t).forEach(r=>{var n;r.includes(":")?e[r]=t[r]:(n=t[r].chains)==null||n.forEach(i=>{e[i]={methods:t[r].methods,events:t[r].events}})}),e}function Aa(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function wy(t){const e={};return Object.keys(t).forEach(r=>{if(r.includes(":"))e[r]=t[r];else{const n=Br(t[r].accounts);n==null||n.forEach(i=>{e[i]={accounts:t[r].accounts.filter(o=>o.includes(`${i}:`)),methods:t[r].methods,events:t[r].events}})}}),e}function by(t,e){return zo(t,!1)&&t<=e.max&&t>=e.min}const Ey="PARSE_ERROR",Dy="INVALID_REQUEST",Sy="METHOD_NOT_FOUND",xy="INVALID_PARAMS",bl="INTERNAL_ERROR",qo="SERVER_ERROR",Cy=[-32700,-32600,-32601,-32602,-32603],nn={[Ey]:{code:-32700,message:"Parse error"},[Dy]:{code:-32600,message:"Invalid Request"},[Sy]:{code:-32601,message:"Method not found"},[xy]:{code:-32602,message:"Invalid params"},[bl]:{code:-32603,message:"Internal error"},[qo]:{code:-32e3,message:"Server error"}},El=qo;function Oy(t){return Cy.includes(t)}function Na(t){return Object.keys(nn).includes(t)?nn[t]:nn[El]}function Ty(t){const e=Object.values(nn).find(r=>r.code===t);return e||nn[El]}function Iy(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var Dl={},zt={},Ra;function Ay(){if(Ra)return zt;Ra=1,Object.defineProperty(zt,"__esModule",{value:!0}),zt.isBrowserCryptoAvailable=zt.getSubtleCrypto=zt.getBrowerCrypto=void 0;function t(){return(ft===null||ft===void 0?void 0:ft.crypto)||(ft===null||ft===void 0?void 0:ft.msCrypto)||{}}zt.getBrowerCrypto=t;function e(){const n=t();return n.subtle||n.webkitSubtle}zt.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return zt.isBrowserCryptoAvailable=r,zt}var jt={},Pa;function Ny(){if(Pa)return jt;Pa=1,Object.defineProperty(jt,"__esModule",{value:!0}),jt.isBrowser=jt.isNode=jt.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}jt.isReactNative=t;function e(){return typeof it<"u"&&typeof it.versions<"u"&&typeof it.versions.node<"u"}jt.isNode=e;function r(){return!t()&&!e()}return jt.isBrowser=r,jt}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=yt;e.__exportStar(Ay(),t),e.__exportStar(Ny(),t)})(Dl);function Ry(){const t=Date.now()*Math.pow(10,3),e=Math.floor(Math.random()*Math.pow(10,3));return t+e}function li(t,e,r){return{id:r||Ry(),jsonrpc:"2.0",method:t,params:e}}function Ho(t,e){return{id:t,jsonrpc:"2.0",result:e}}function Ko(t,e,r){return{id:t,jsonrpc:"2.0",error:Py(e,r)}}function Py(t,e){return typeof t>"u"?Na(bl):(typeof t=="string"&&(t=Object.assign(Object.assign({},Na(qo)),{message:t})),typeof e<"u"&&(t.data=e),Oy(t.code)&&(t=Ty(t.code)),t)}class Ly{}class Fy extends Ly{constructor(){super()}}class My extends Fy{constructor(e){super()}}const Uy="^wss?:";function $y(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function By(t,e){const r=$y(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function La(t){return By(t,Uy)}function ky(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function Sl(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function Vo(t){return Sl(t)&&"method"in t}function Wo(t){return Sl(t)&&(qt(t)||At(t))}function qt(t){return"result"in t}function At(t){return"error"in t}class zy extends My{constructor(e){super(e),this.events=new Ot.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(li(e.method,e.params||[]),r)}async requestStrict(e,r){return new Promise(async(n,i)=>{if(!this.connection.connected)try{await this.open()}catch(o){i(o)}this.events.on(`${e.id}`,o=>{At(o)?i(o.error):n(o.result)});try{await this.connection.send(e,r)}catch(o){i(o)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Wo(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.hasRegisteredEventListeners=!0)}}const Fa=10,jy=()=>typeof gi<"u"&&typeof gi.WebSocket<"u"?gi.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:require("ws"),qy=()=>typeof window<"u",Hy=jy();class Ky{constructor(e){if(this.url=e,this.events=new Ot.EventEmitter,this.registering=!1,!La(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close()})}async send(e,r){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Ao(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!La(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",o=>{this.resetMaxListeners(),i(o)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,n)=>{const i=Dl.isReactNative()?void 0:{rejectUnauthorized:!ky(e)},o=new Hy(e,[],i);qy()?o.onerror=c=>{const s=c;n(this.emitError(s.error))}:o.on("error",c=>{n(this.emitError(c))}),o.onopen=()=>{this.onOpen(o),r(o)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Bu(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),i=n.message||n.toString(),o=Ko(e,i);this.events.emit("payload",o)}parseError(e,r=this.url){return Iy(e,r,"WS")}resetMaxListeners(){this.events.getMaxListeners()>Fa&&this.events.setMaxListeners(Fa)}emitError(e){const r=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for URL: ${this.url}`));return this.events.emit("register_error",r),r}}var Kn={},Vy={get exports(){return Kn},set exports(t){Kn=t}};(function(t,e){var r=200,n="__lodash_hash_undefined__",i=1,o=2,c=9007199254740991,s="[object Arguments]",u="[object Array]",h="[object AsyncFunction]",f="[object Boolean]",_="[object Date]",O="[object Error]",v="[object Function]",m="[object GeneratorFunction]",I="[object Map]",x="[object Number]",R="[object Null]",p="[object Object]",w="[object Promise]",d="[object Proxy]",b="[object RegExp]",E="[object Set]",a="[object String]",g="[object Symbol]",B="[object Undefined]",C="[object WeakMap]",F="[object ArrayBuffer]",M="[object DataView]",$="[object Float32Array]",T="[object Float64Array]",S="[object Int8Array]",H="[object Int16Array]",z="[object Int32Array]",k="[object Uint8Array]",U="[object Uint8ClampedArray]",j="[object Uint16Array]",K="[object Uint32Array]",Z=/[\\^$.*+?()[\]{}|]/g,V=/^\[object .+?Constructor\]$/,ee=/^(?:0|[1-9]\d*)$/,Q={};Q[$]=Q[T]=Q[S]=Q[H]=Q[z]=Q[k]=Q[U]=Q[j]=Q[K]=!0,Q[s]=Q[u]=Q[F]=Q[f]=Q[M]=Q[_]=Q[O]=Q[v]=Q[I]=Q[x]=Q[p]=Q[b]=Q[E]=Q[a]=Q[C]=!1;var ue=typeof ft=="object"&&ft&&ft.Object===Object&&ft,L=typeof self=="object"&&self&&self.Object===Object&&self,P=ue||L||Function("return this")(),A=e&&!e.nodeType&&e,l=A&&!0&&t&&!t.nodeType&&t,D=l&&l.exports===A,W=D&&ue.process,J=function(){try{return W&&W.binding&&W.binding("util")}catch{}}(),de=J&&J.isTypedArray;function we(y,N){for(var q=-1,X=y==null?0:y.length,Ae=0,se=[];++q<X;){var Ue=y[q];N(Ue,q,y)&&(se[Ae++]=Ue)}return se}function _e(y,N){for(var q=-1,X=N.length,Ae=y.length;++q<X;)y[Ae+q]=N[q];return y}function De(y,N){for(var q=-1,X=y==null?0:y.length;++q<X;)if(N(y[q],q,y))return!0;return!1}function $e(y,N){for(var q=-1,X=Array(y);++q<y;)X[q]=N(q);return X}function Le(y){return function(N){return y(N)}}function ve(y,N){return y.has(N)}function ye(y,N){return y==null?void 0:y[N]}function ge(y){var N=-1,q=Array(y.size);return y.forEach(function(X,Ae){q[++N]=[Ae,X]}),q}function fe(y,N){return function(q){return y(N(q))}}function le(y){var N=-1,q=Array(y.size);return y.forEach(function(X){q[++N]=X}),q}var ce=Array.prototype,ae=Function.prototype,ne=Object.prototype,he=P["__core-js_shared__"],me=ae.toString,ie=ne.hasOwnProperty,be=function(){var y=/[^.]+$/.exec(he&&he.keys&&he.keys.IE_PROTO||"");return y?"Symbol(src)_1."+y:""}(),Ee=ne.toString,xe=RegExp("^"+me.call(ie).replace(Z,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ce=D?P.Buffer:void 0,Se=P.Symbol,Tt=P.Uint8Array,Rt=ne.propertyIsEnumerable,Wt=ce.splice,vt=Se?Se.toStringTag:void 0,ir=Object.getOwnPropertySymbols,kr=Ce?Ce.isBuffer:void 0,wn=fe(Object.keys,Object),ke=br(P,"DataView"),Fe=br(P,"Map"),ze=br(P,"Promise"),je=br(P,"Set"),qe=br(P,"WeakMap"),Me=br(Object,"create"),We=sr(ke),Ge=sr(Fe),Ye=sr(ze),Je=sr(je),Xe=sr(qe),Ke=Se?Se.prototype:void 0,He=Ke?Ke.valueOf:void 0;function Re(y){var N=-1,q=y==null?0:y.length;for(this.clear();++N<q;){var X=y[N];this.set(X[0],X[1])}}function Qe(){this.__data__=Me?Me(null):{},this.size=0}function Ze(y){var N=this.has(y)&&delete this.__data__[y];return this.size-=N?1:0,N}function jl(y){var N=this.__data__;if(Me){var q=N[y];return q===n?void 0:q}return ie.call(N,y)?N[y]:void 0}function ql(y){var N=this.__data__;return Me?N[y]!==void 0:ie.call(N,y)}function Hl(y,N){var q=this.__data__;return this.size+=this.has(y)?0:1,q[y]=Me&&N===void 0?n:N,this}Re.prototype.clear=Qe,Re.prototype.delete=Ze,Re.prototype.get=jl,Re.prototype.has=ql,Re.prototype.set=Hl;function Bt(y){var N=-1,q=y==null?0:y.length;for(this.clear();++N<q;){var X=y[N];this.set(X[0],X[1])}}function Kl(){this.__data__=[],this.size=0}function Vl(y){var N=this.__data__,q=En(N,y);if(q<0)return!1;var X=N.length-1;return q==X?N.pop():Wt.call(N,q,1),--this.size,!0}function Wl(y){var N=this.__data__,q=En(N,y);return q<0?void 0:N[q][1]}function Gl(y){return En(this.__data__,y)>-1}function Yl(y,N){var q=this.__data__,X=En(q,y);return X<0?(++this.size,q.push([y,N])):q[X][1]=N,this}Bt.prototype.clear=Kl,Bt.prototype.delete=Vl,Bt.prototype.get=Wl,Bt.prototype.has=Gl,Bt.prototype.set=Yl;function or(y){var N=-1,q=y==null?0:y.length;for(this.clear();++N<q;){var X=y[N];this.set(X[0],X[1])}}function Jl(){this.size=0,this.__data__={hash:new Re,map:new(Fe||Bt),string:new Re}}function Xl(y){var N=Dn(this,y).delete(y);return this.size-=N?1:0,N}function Ql(y){return Dn(this,y).get(y)}function Zl(y){return Dn(this,y).has(y)}function ef(y,N){var q=Dn(this,y),X=q.size;return q.set(y,N),this.size+=q.size==X?0:1,this}or.prototype.clear=Jl,or.prototype.delete=Xl,or.prototype.get=Ql,or.prototype.has=Zl,or.prototype.set=ef;function bn(y){var N=-1,q=y==null?0:y.length;for(this.__data__=new or;++N<q;)this.add(y[N])}function tf(y){return this.__data__.set(y,n),this}function rf(y){return this.__data__.has(y)}bn.prototype.add=bn.prototype.push=tf,bn.prototype.has=rf;function Gt(y){var N=this.__data__=new Bt(y);this.size=N.size}function nf(){this.__data__=new Bt,this.size=0}function of(y){var N=this.__data__,q=N.delete(y);return this.size=N.size,q}function sf(y){return this.__data__.get(y)}function af(y){return this.__data__.has(y)}function cf(y,N){var q=this.__data__;if(q instanceof Bt){var X=q.__data__;if(!Fe||X.length<r-1)return X.push([y,N]),this.size=++q.size,this;q=this.__data__=new or(X)}return q.set(y,N),this.size=q.size,this}Gt.prototype.clear=nf,Gt.prototype.delete=of,Gt.prototype.get=sf,Gt.prototype.has=af,Gt.prototype.set=cf;function uf(y,N){var q=Sn(y),X=!q&&Sf(y),Ae=!q&&!X&&di(y),se=!q&&!X&&!Ae&&ss(y),Ue=q||X||Ae||se,et=Ue?$e(y.length,String):[],nt=et.length;for(var Pe in y)(N||ie.call(y,Pe))&&!(Ue&&(Pe=="length"||Ae&&(Pe=="offset"||Pe=="parent")||se&&(Pe=="buffer"||Pe=="byteLength"||Pe=="byteOffset")||vf(Pe,nt)))&&et.push(Pe);return et}function En(y,N){for(var q=y.length;q--;)if(rs(y[q][0],N))return q;return-1}function lf(y,N,q){var X=N(y);return Sn(y)?X:_e(X,q(y))}function zr(y){return y==null?y===void 0?B:R:vt&&vt in Object(y)?yf(y):Df(y)}function Qo(y){return jr(y)&&zr(y)==s}function Zo(y,N,q,X,Ae){return y===N?!0:y==null||N==null||!jr(y)&&!jr(N)?y!==y&&N!==N:ff(y,N,q,X,Zo,Ae)}function ff(y,N,q,X,Ae,se){var Ue=Sn(y),et=Sn(N),nt=Ue?u:Yt(y),Pe=et?u:Yt(N);nt=nt==s?p:nt,Pe=Pe==s?p:Pe;var wt=nt==p,It=Pe==p,at=nt==Pe;if(at&&di(y)){if(!di(N))return!1;Ue=!0,wt=!1}if(at&&!wt)return se||(se=new Gt),Ue||ss(y)?es(y,N,q,X,Ae,se):pf(y,N,nt,q,X,Ae,se);if(!(q&i)){var Dt=wt&&ie.call(y,"__wrapped__"),St=It&&ie.call(N,"__wrapped__");if(Dt||St){var Jt=Dt?y.value():y,kt=St?N.value():N;return se||(se=new Gt),Ae(Jt,kt,q,X,se)}}return at?(se||(se=new Gt),_f(y,N,q,X,Ae,se)):!1}function hf(y){if(!os(y)||bf(y))return!1;var N=ns(y)?xe:V;return N.test(sr(y))}function df(y){return jr(y)&&is(y.length)&&!!Q[zr(y)]}function gf(y){if(!Ef(y))return wn(y);var N=[];for(var q in Object(y))ie.call(y,q)&&q!="constructor"&&N.push(q);return N}function es(y,N,q,X,Ae,se){var Ue=q&i,et=y.length,nt=N.length;if(et!=nt&&!(Ue&&nt>et))return!1;var Pe=se.get(y);if(Pe&&se.get(N))return Pe==N;var wt=-1,It=!0,at=q&o?new bn:void 0;for(se.set(y,N),se.set(N,y);++wt<et;){var Dt=y[wt],St=N[wt];if(X)var Jt=Ue?X(St,Dt,wt,N,y,se):X(Dt,St,wt,y,N,se);if(Jt!==void 0){if(Jt)continue;It=!1;break}if(at){if(!De(N,function(kt,ar){if(!ve(at,ar)&&(Dt===kt||Ae(Dt,kt,q,X,se)))return at.push(ar)})){It=!1;break}}else if(!(Dt===St||Ae(Dt,St,q,X,se))){It=!1;break}}return se.delete(y),se.delete(N),It}function pf(y,N,q,X,Ae,se,Ue){switch(q){case M:if(y.byteLength!=N.byteLength||y.byteOffset!=N.byteOffset)return!1;y=y.buffer,N=N.buffer;case F:return!(y.byteLength!=N.byteLength||!se(new Tt(y),new Tt(N)));case f:case _:case x:return rs(+y,+N);case O:return y.name==N.name&&y.message==N.message;case b:case a:return y==N+"";case I:var et=ge;case E:var nt=X&i;if(et||(et=le),y.size!=N.size&&!nt)return!1;var Pe=Ue.get(y);if(Pe)return Pe==N;X|=o,Ue.set(y,N);var wt=es(et(y),et(N),X,Ae,se,Ue);return Ue.delete(y),wt;case g:if(He)return He.call(y)==He.call(N)}return!1}function _f(y,N,q,X,Ae,se){var Ue=q&i,et=ts(y),nt=et.length,Pe=ts(N),wt=Pe.length;if(nt!=wt&&!Ue)return!1;for(var It=nt;It--;){var at=et[It];if(!(Ue?at in N:ie.call(N,at)))return!1}var Dt=se.get(y);if(Dt&&se.get(N))return Dt==N;var St=!0;se.set(y,N),se.set(N,y);for(var Jt=Ue;++It<nt;){at=et[It];var kt=y[at],ar=N[at];if(X)var as=Ue?X(ar,kt,at,N,y,se):X(kt,ar,at,y,N,se);if(!(as===void 0?kt===ar||Ae(kt,ar,q,X,se):as)){St=!1;break}Jt||(Jt=at=="constructor")}if(St&&!Jt){var xn=y.constructor,Cn=N.constructor;xn!=Cn&&"constructor"in y&&"constructor"in N&&!(typeof xn=="function"&&xn instanceof xn&&typeof Cn=="function"&&Cn instanceof Cn)&&(St=!1)}return se.delete(y),se.delete(N),St}function ts(y){return lf(y,Of,mf)}function Dn(y,N){var q=y.__data__;return wf(N)?q[typeof N=="string"?"string":"hash"]:q.map}function br(y,N){var q=ye(y,N);return hf(q)?q:void 0}function yf(y){var N=ie.call(y,vt),q=y[vt];try{y[vt]=void 0;var X=!0}catch{}var Ae=Ee.call(y);return X&&(N?y[vt]=q:delete y[vt]),Ae}var mf=ir?function(y){return y==null?[]:(y=Object(y),we(ir(y),function(N){return Rt.call(y,N)}))}:Tf,Yt=zr;(ke&&Yt(new ke(new ArrayBuffer(1)))!=M||Fe&&Yt(new Fe)!=I||ze&&Yt(ze.resolve())!=w||je&&Yt(new je)!=E||qe&&Yt(new qe)!=C)&&(Yt=function(y){var N=zr(y),q=N==p?y.constructor:void 0,X=q?sr(q):"";if(X)switch(X){case We:return M;case Ge:return I;case Ye:return w;case Je:return E;case Xe:return C}return N});function vf(y,N){return N=N??c,!!N&&(typeof y=="number"||ee.test(y))&&y>-1&&y%1==0&&y<N}function wf(y){var N=typeof y;return N=="string"||N=="number"||N=="symbol"||N=="boolean"?y!=="__proto__":y===null}function bf(y){return!!be&&be in y}function Ef(y){var N=y&&y.constructor,q=typeof N=="function"&&N.prototype||ne;return y===q}function Df(y){return Ee.call(y)}function sr(y){if(y!=null){try{return me.call(y)}catch{}try{return y+""}catch{}}return""}function rs(y,N){return y===N||y!==y&&N!==N}var Sf=Qo(function(){return arguments}())?Qo:function(y){return jr(y)&&ie.call(y,"callee")&&!Rt.call(y,"callee")},Sn=Array.isArray;function xf(y){return y!=null&&is(y.length)&&!ns(y)}var di=kr||If;function Cf(y,N){return Zo(y,N)}function ns(y){if(!os(y))return!1;var N=zr(y);return N==v||N==m||N==h||N==d}function is(y){return typeof y=="number"&&y>-1&&y%1==0&&y<=c}function os(y){var N=typeof y;return y!=null&&(N=="object"||N=="function")}function jr(y){return y!=null&&typeof y=="object"}var ss=de?Le(de):df;function Of(y){return xf(y)?uf(y):gf(y)}function Tf(){return[]}function If(){return!1}t.exports=Cf})(Vy,Kn);function Wy(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var o=t.charAt(i),c=o.charCodeAt(0);if(r[c]!==255)throw new TypeError(o+" is ambiguous");r[c]=i}var s=t.length,u=t.charAt(0),h=Math.log(s)/Math.log(256),f=Math.log(256)/Math.log(s);function _(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var I=0,x=0,R=0,p=m.length;R!==p&&m[R]===0;)R++,I++;for(var w=(p-R)*f+1>>>0,d=new Uint8Array(w);R!==p;){for(var b=m[R],E=0,a=w-1;(b!==0||E<x)&&a!==-1;a--,E++)b+=256*d[a]>>>0,d[a]=b%s>>>0,b=b/s>>>0;if(b!==0)throw new Error("Non-zero carry");x=E,R++}for(var g=w-x;g!==w&&d[g]===0;)g++;for(var B=u.repeat(I);g<w;++g)B+=t.charAt(d[g]);return B}function O(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;var I=0;if(m[I]!==" "){for(var x=0,R=0;m[I]===u;)x++,I++;for(var p=(m.length-I)*h+1>>>0,w=new Uint8Array(p);m[I];){var d=r[m.charCodeAt(I)];if(d===255)return;for(var b=0,E=p-1;(d!==0||b<R)&&E!==-1;E--,b++)d+=s*w[E]>>>0,w[E]=d%256>>>0,d=d/256>>>0;if(d!==0)throw new Error("Non-zero carry");R=b,I++}if(m[I]!==" "){for(var a=p-R;a!==p&&w[a]===0;)a++;for(var g=new Uint8Array(x+(p-a)),B=x;a!==p;)g[B++]=w[a++];return g}}}function v(m){var I=O(m);if(I)return I;throw new Error(`Non-${e} character`)}return{encode:_,decodeUnsafe:O,decode:v}}var Gy=Wy,Yy=Gy;const xl=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Jy=t=>new TextEncoder().encode(t),Xy=t=>new TextDecoder().decode(t);class Qy{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Zy{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Cl(this,e)}}class em{constructor(e){this.decoders=e}or(e){return Cl(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Cl=(t,e)=>new em({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class tm{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new Qy(e,r,n),this.decoder=new Zy(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const fi=({name:t,prefix:e,encode:r,decode:n})=>new tm(t,e,r,n),vn=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=Yy(r,e);return fi({prefix:t,name:e,encode:n,decode:o=>xl(i(o))})},rm=(t,e,r,n)=>{const i={};for(let f=0;f<e.length;++f)i[e[f]]=f;let o=t.length;for(;t[o-1]==="=";)--o;const c=new Uint8Array(o*r/8|0);let s=0,u=0,h=0;for(let f=0;f<o;++f){const _=i[t[f]];if(_===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|_,s+=r,s>=8&&(s-=8,c[h++]=255&u>>s)}if(s>=r||255&u<<8-s)throw new SyntaxError("Unexpected end of data");return c},nm=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let o="",c=0,s=0;for(let u=0;u<t.length;++u)for(s=s<<8|t[u],c+=8;c>r;)c-=r,o+=e[i&s>>c];if(c&&(o+=e[i&s<<r-c]),n)for(;o.length*r&7;)o+="=";return o},st=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>fi({prefix:e,name:t,encode(i){return nm(i,n,r)},decode(i){return rm(i,n,r,t)}}),im=fi({prefix:"\0",name:"identity",encode:t=>Xy(t),decode:t=>Jy(t)});var om=Object.freeze({__proto__:null,identity:im});const sm=st({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var am=Object.freeze({__proto__:null,base2:sm});const cm=st({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var um=Object.freeze({__proto__:null,base8:cm});const lm=vn({prefix:"9",name:"base10",alphabet:"0123456789"});var fm=Object.freeze({__proto__:null,base10:lm});const hm=st({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),dm=st({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var gm=Object.freeze({__proto__:null,base16:hm,base16upper:dm});const pm=st({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),_m=st({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ym=st({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),mm=st({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),vm=st({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),wm=st({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),bm=st({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Em=st({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Dm=st({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Sm=Object.freeze({__proto__:null,base32:pm,base32upper:_m,base32pad:ym,base32padupper:mm,base32hex:vm,base32hexupper:wm,base32hexpad:bm,base32hexpadupper:Em,base32z:Dm});const xm=vn({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Cm=vn({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Om=Object.freeze({__proto__:null,base36:xm,base36upper:Cm});const Tm=vn({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Im=vn({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Am=Object.freeze({__proto__:null,base58btc:Tm,base58flickr:Im});const Nm=st({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Rm=st({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Pm=st({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Lm=st({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Fm=Object.freeze({__proto__:null,base64:Nm,base64pad:Rm,base64url:Pm,base64urlpad:Lm});const Ol=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Mm=Ol.reduce((t,e,r)=>(t[r]=e,t),[]),Um=Ol.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function $m(t){return t.reduce((e,r)=>(e+=Mm[r],e),"")}function Bm(t){const e=[];for(const r of t){const n=Um[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const km=fi({prefix:"🚀",name:"base256emoji",encode:$m,decode:Bm});var zm=Object.freeze({__proto__:null,base256emoji:km}),jm=Tl,Ma=128,qm=127,Hm=~qm,Km=Math.pow(2,31);function Tl(t,e,r){e=e||[],r=r||0;for(var n=r;t>=Km;)e[r++]=t&255|Ma,t/=128;for(;t&Hm;)e[r++]=t&255|Ma,t>>>=7;return e[r]=t|0,Tl.bytes=r-n+1,e}var Vm=co,Wm=128,Ua=127;function co(t,n){var r=0,n=n||0,i=0,o=n,c,s=t.length;do{if(o>=s)throw co.bytes=0,new RangeError("Could not decode varint");c=t[o++],r+=i<28?(c&Ua)<<i:(c&Ua)*Math.pow(2,i),i+=7}while(c>=Wm);return co.bytes=o-n,r}var Gm=Math.pow(2,7),Ym=Math.pow(2,14),Jm=Math.pow(2,21),Xm=Math.pow(2,28),Qm=Math.pow(2,35),Zm=Math.pow(2,42),ev=Math.pow(2,49),tv=Math.pow(2,56),rv=Math.pow(2,63),nv=function(t){return t<Gm?1:t<Ym?2:t<Jm?3:t<Xm?4:t<Qm?5:t<Zm?6:t<ev?7:t<tv?8:t<rv?9:10},iv={encode:jm,decode:Vm,encodingLength:nv},Il=iv;const $a=(t,e,r=0)=>(Il.encode(t,e,r),e),Ba=t=>Il.encodingLength(t),uo=(t,e)=>{const r=e.byteLength,n=Ba(t),i=n+Ba(r),o=new Uint8Array(i+r);return $a(t,o,0),$a(r,o,n),o.set(e,i),new ov(t,r,e,o)};class ov{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}const Al=({name:t,code:e,encode:r})=>new sv(t,e,r);class sv{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?uo(this.code,r):r.then(n=>uo(this.code,n))}else throw Error("Unknown type, must be binary type")}}const Nl=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),av=Al({name:"sha2-256",code:18,encode:Nl("SHA-256")}),cv=Al({name:"sha2-512",code:19,encode:Nl("SHA-512")});var uv=Object.freeze({__proto__:null,sha256:av,sha512:cv});const Rl=0,lv="identity",Pl=xl,fv=t=>uo(Rl,Pl(t)),hv={code:Rl,name:lv,encode:Pl,digest:fv};var dv=Object.freeze({__proto__:null,identity:hv});new TextEncoder,new TextDecoder;const ka={...om,...am,...um,...fm,...gm,...Sm,...Om,...Am,...Fm,...zm};({...uv,...dv});function gv(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function Ll(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const za=Ll("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Ri=Ll("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=gv(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),pv={utf8:za,"utf-8":za,hex:ka.base16,latin1:Ri,ascii:Ri,binary:Ri,...ka};function _v(t,e="utf8"){const r=pv[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}const Fl="wc",yv=2,Go="core",er=`${Fl}@2:${Go}:`,mv={name:Go,logger:"error"},vv={database:":memory:"},wv="crypto",ja="client_ed25519_seed",bv=te.ONE_DAY,Ev="keychain",Dv="0.3",Sv="messages",xv="0.3",Cv=te.SIX_HOURS,Ov="publisher",Ml="irn",Tv="error",Ul="wss://relay.walletconnect.com",Iv="relayer",tt={message:"relayer_message",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},Av="_subscription",An={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},qa=te.ONE_SECOND,Nv="2.5.1",Rv="0.3",Ft={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},Pv="subscription",Lv="0.3",Fv=te.FIVE_SECONDS*1e3,Mv="pairing",Uv="0.3",Yr={wc_pairingDelete:{req:{ttl:te.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:te.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:te.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:te.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:te.ONE_DAY,prompt:!1,tag:0},res:{ttl:te.ONE_DAY,prompt:!1,tag:0}}},Lt={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},$v="history",Bv="0.3",kv="expirer",Ct={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},zv="0.3";class jv{constructor(e,r){this.core=e,this.logger=r,this.keychain=new Map,this.name=Ev,this.version=Dv,this.initialized=!1,this.storagePrefix=er,this.init=async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}},this.has=n=>(this.isInitialized(),this.keychain.has(n)),this.set=async(n,i)=>{this.isInitialized(),this.keychain.set(n,i),await this.persist()},this.get=n=>{this.isInitialized();const i=this.keychain.get(n);if(typeof i>"u"){const{message:o}=G("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(o)}return i},this.del=async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()},this.core=e,this.logger=Oe.generateChildLogger(r,this.name)}get context(){return Oe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,pl(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?_l(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=G("NOT_INITIALIZED",this.name);throw new Error(e)}}}class qv{constructor(e,r,n){this.core=e,this.logger=r,this.name=wv,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=i=>(this.isInitialized(),this.keychain.has(i)),this.getClientId=async()=>{this.isInitialized();const i=await this.getClientSeed(),o=la(i);return el(o.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const i=g1();return this.setPrivateKey(i.publicKey,i.privateKey)},this.signJWT=async i=>{this.isInitialized();const o=await this.getClientSeed(),c=la(o),s=oo();return await w_(s,i,bv,c)},this.generateSharedKey=(i,o,c)=>{this.isInitialized();const s=this.getPrivateKey(i),u=p1(s,o);return this.setSymKey(u,c)},this.setSymKey=async(i,o)=>{this.isInitialized();const c=o||_1(i);return await this.keychain.set(c,i),c},this.deleteKeyPair=async i=>{this.isInitialized(),await this.keychain.del(i)},this.deleteSymKey=async i=>{this.isInitialized(),await this.keychain.del(i)},this.encode=async(i,o,c)=>{this.isInitialized();const s=dl(c),u=Ao(o);if(ba(s)){const O=s.senderPublicKey,v=s.receiverPublicKey;i=await this.generateSharedKey(O,v)}const h=this.getSymKey(i),{type:f,senderPublicKey:_}=s;return m1({type:f,symKey:h,message:u,senderPublicKey:_})},this.decode=async(i,o,c)=>{this.isInitialized();const s=b1(o,c);if(ba(s)){const f=s.receiverPublicKey,_=s.senderPublicKey;i=await this.generateSharedKey(f,_)}const u=this.getSymKey(i),h=v1({symKey:u,encoded:o});return Bu(h)},this.core=e,this.logger=Oe.generateChildLogger(r,this.name),this.keychain=n||new jv(this.core,this.logger)}get context(){return Oe.getLoggerContext(this.logger)}getPayloadType(e){const r=ko(e);return mn(r.type)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(ja)}catch{e=oo(),await this.keychain.set(ja,e)}return _v(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=G("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Hv extends Ip{constructor(e,r){super(e,r),this.logger=e,this.core=r,this.messages=new Map,this.name=Sv,this.version=xv,this.initialized=!1,this.storagePrefix=er,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}},this.set=async(n,i)=>{this.isInitialized();const o=Hn(i);let c=this.messages.get(n);return typeof c>"u"&&(c={}),typeof c[o]<"u"||(c[o]=i,this.messages.set(n,c),await this.persist()),o},this.get=n=>{this.isInitialized();let i=this.messages.get(n);return typeof i>"u"&&(i={}),i},this.has=(n,i)=>{this.isInitialized();const o=this.get(n),c=Hn(i);return typeof o[c]<"u"},this.del=async n=>{this.isInitialized(),this.messages.delete(n),await this.persist()},this.logger=Oe.generateChildLogger(e,this.name),this.core=r}get context(){return Oe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,pl(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?_l(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=G("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Kv extends Ap{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.events=new Ot.EventEmitter,this.name=Ov,this.queue=new Map,this.publishTimeout=1e4,this.publish=async(n,i,o)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:o}});try{const c=(o==null?void 0:o.ttl)||Cv,s=ao(o),u=(o==null?void 0:o.prompt)||!1,h=(o==null?void 0:o.tag)||0,f={topic:n,message:i,opts:{ttl:c,relay:s,prompt:u,tag:h}},_=Hn(i);this.queue.set(_,f);try{await await so(this.rpcPublish(n,i,c,s,u,h),this.publishTimeout),this.relayer.events.emit(tt.publish,f)}catch{this.logger.debug("Publishing Payload stalled"),this.relayer.events.emit(tt.connection_stalled);return}this.onPublish(_,f),this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:o}})}catch(c){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(c),c}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.relayer=e,this.logger=Oe.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return Oe.getLoggerContext(this.logger)}rpcPublish(e,r,n,i,o,c){var s,u,h,f;const _={method:Pn(i.protocol).publish,params:{topic:e,message:r,ttl:n,prompt:o,tag:c}};return ht((s=_.params)==null?void 0:s.prompt)&&((u=_.params)==null||delete u.prompt),ht((h=_.params)==null?void 0:h.tag)&&((f=_.params)==null||delete f.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:_}),this.relayer.provider.request(_)}onPublish(e,r){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:r,message:n,opts:i}=e;await this.publish(r,n,i)})}registerEventListeners(){this.relayer.core.heartbeat.on(pn.HEARTBEAT_EVENTS.pulse,()=>{this.checkQueue()})}}class Vv{constructor(){this.map=new Map,this.set=(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])},this.get=e=>this.map.get(e)||[],this.exists=(e,r)=>this.get(e).includes(r),this.delete=(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const i=n.filter(o=>o!==r);if(!i.length){this.map.delete(e);return}this.map.set(e,i)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var Wv=Object.defineProperty,Gv=Object.defineProperties,Yv=Object.getOwnPropertyDescriptors,Ha=Object.getOwnPropertySymbols,Jv=Object.prototype.hasOwnProperty,Xv=Object.prototype.propertyIsEnumerable,Ka=(t,e,r)=>e in t?Wv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Jr=(t,e)=>{for(var r in e||(e={}))Jv.call(e,r)&&Ka(t,r,e[r]);if(Ha)for(var r of Ha(e))Xv.call(e,r)&&Ka(t,r,e[r]);return t},Pi=(t,e)=>Gv(t,Yv(e));class Qv extends Pp{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.subscriptions=new Map,this.topicMap=new Vv,this.events=new Ot.EventEmitter,this.name=Pv,this.version=Lv,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=er,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}});try{const o=ao(i),c={topic:n,relay:o};this.pending.set(n,c);const s=await this.rpcSubscribe(n,o);return this.onSubscribe(s,c),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}}),s}catch(o){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(o),o}},this.unsubscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),typeof(i==null?void 0:i.id)<"u"?await this.unsubscribeById(n,i.id,i):await this.unsubscribeByTopic(n,i)},this.isSubscribed=async n=>this.topics.includes(n)?!0:await new Promise((i,o)=>{const c=new te.Watch;c.start(this.pendingSubscriptionWatchLabel);const s=setInterval(()=>{!this.pending.has(n)&&this.topics.includes(n)&&(clearInterval(s),c.stop(this.pendingSubscriptionWatchLabel),i(!0)),c.elapsed(this.pendingSubscriptionWatchLabel)>=Fv&&(clearInterval(s),c.stop(this.pendingSubscriptionWatchLabel),o(!1))},this.pollingInterval)}),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=Oe.generateChildLogger(r,this.name),this.clientId=""}get context(){return Oe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async i=>await this.unsubscribeById(e,i,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const i=ao(n);await this.rpcUnsubscribe(e,r,i);const o=Ve("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,o),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,r){const n={method:Pn(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await so(this.relayer.provider.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(tt.connection_stalled)}return Hn(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,n={method:Pn(r.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{return await await so(this.relayer.provider.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(tt.connection_stalled)}}rpcUnsubscribe(e,r,n){const i={method:Pn(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.provider.request(i)}onSubscribe(e,r){this.setSubscription(e,Pi(Jr({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,Jr({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r))}addSubscription(e,r){this.subscriptions.set(e,Jr({},r)),this.topicMap.set(r.topic,e),this.events.emit(Ft.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=G("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(Ft.deleted,Pi(Jr({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Ft.sync)}async reset(){if(!this.cached.length)return;const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<e;r++){const n=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(n)}this.events.emit(Ft.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=G("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const r=await this.rpcBatchSubscribe(e);this.onBatchSubscribe(r.map((n,i)=>Pi(Jr({},e[i]),{id:n})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(r=>{e.push(r)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(pn.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(tt.connect,async()=>{await this.onConnect()}),this.relayer.on(tt.disconnect,()=>{this.onDisconnect()}),this.events.on(Ft.created,async e=>{const r=Ft.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()}),this.events.on(Ft.deleted,async e=>{const r=Ft.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=G("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),e())},this.pollingInterval)})}}var Zv=Object.defineProperty,Va=Object.getOwnPropertySymbols,ew=Object.prototype.hasOwnProperty,tw=Object.prototype.propertyIsEnumerable,Wa=(t,e,r)=>e in t?Zv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,rw=(t,e)=>{for(var r in e||(e={}))ew.call(e,r)&&Wa(t,r,e[r]);if(Va)for(var r of Va(e))tw.call(e,r)&&Wa(t,r,e[r]);return t};class nw extends Np{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new Ot.EventEmitter,this.name=Iv,this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Oe.generateChildLogger(e.logger,this.name):ei(Oe.getDefaultLoggerOptions({level:e.logger||Tv})),this.messages=new Hv(this.logger,e.core),this.subscriber=new Qv(this,this.logger),this.publisher=new Kv(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||Ul,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),this.provider=await this.createProvider(),await Promise.all([this.messages.init(),this.transportOpen(),this.subscriber.init()]),this.registerEventListeners(),this.initialized=!0}get context(){return Oe.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now()})}async subscribe(e,r){this.isInitialized();let n="";return await Promise.all([new Promise(i=>{this.subscriber.once(Ft.created,o=>{o.topic===e&&i()})}),new Promise(async i=>{n=await this.subscriber.subscribe(e,r),i()})]),n}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(tt.transport_closed))}async transportOpen(e){if(!this.reconnecting){this.relayUrl=e||this.relayUrl,this.transportExplicitlyClosed=!1,this.reconnecting=!0;try{await Promise.all([new Promise(r=>{this.initialized||r(),this.subscriber.once(Ft.resubscribed,()=>{r()})}),await Promise.race([new Promise(async r=>{await this.provider.connect(),this.removeListener(tt.transport_closed,this.rejectTransportOpen),r()}),new Promise(r=>this.once(tt.transport_closed,this.rejectTransportOpen))])])}catch(r){const n=r;if(!/socket hang up/i.test(n.message))throw r;this.logger.error(r),this.events.emit(tt.transport_closed)}finally{this.reconnecting=!1}}}async restartTransport(e){this.transportExplicitlyClosed||(await this.transportClose(),await new Promise(r=>setTimeout(r,qa)),await this.transportOpen(e))}rejectTransportOpen(){throw new Error("closeTransport called before connection was established")}async createProvider(){const e=await this.core.crypto.signJWT(this.relayUrl);return new zy(new Ky(F1({sdkVersion:Nv,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0})))}async recordMessageEvent(e){const{topic:r,message:n}=e;await this.messages.set(r,n)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;return await this.subscriber.isSubscribed(r)?this.messages.has(r,n):!0}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Vo(e)){if(!e.method.endsWith(Av))return;const r=e.params,{topic:n,message:i,publishedAt:o}=r.data,c={topic:n,message:i,publishedAt:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(rw({type:"event",event:r.id},c)),this.events.emit(r.id,c),await this.acknowledgePayload(e),await this.onMessageEvent(c)}}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(tt.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const r=Ho(e.id,!0);await this.provider.connection.send(r)}registerEventListeners(){this.provider.on(An.payload,e=>this.onProviderPayload(e)),this.provider.on(An.connect,()=>{this.events.emit(tt.connect)}),this.provider.on(An.disconnect,()=>{this.events.emit(tt.disconnect),this.attemptToReconnect()}),this.provider.on(An.error,e=>{this.logger.error(e),this.events.emit(tt.error,e)}),this.events.on(tt.connection_stalled,async()=>{await this.restartTransport()})}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout(async()=>{await this.transportOpen()},te.toMiliseconds(qa))}isInitialized(){if(!this.initialized){const{message:e}=G("NOT_INITIALIZED",this.name);throw new Error(e)}}}var iw=Object.defineProperty,Ga=Object.getOwnPropertySymbols,ow=Object.prototype.hasOwnProperty,sw=Object.prototype.propertyIsEnumerable,Ya=(t,e,r)=>e in t?iw(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ja=(t,e)=>{for(var r in e||(e={}))ow.call(e,r)&&Ya(t,r,e[r]);if(Ga)for(var r of Ga(e))sw.call(e,r)&&Ya(t,r,e[r]);return t};class hi extends Rp{constructor(e,r,n,i=er,o=void 0){super(e,r,n,i),this.core=e,this.logger=r,this.name=n,this.map=new Map,this.version=Rv,this.cached=[],this.initialized=!1,this.storagePrefix=er,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(c=>{ry(c)?this.map.set(c.id,c):ny(c)?this.map.set(c.topic,c):this.getKey&&c!==null&&!ht(c)&&this.map.set(this.getKey(c),c)}),this.cached=[],this.initialized=!0)},this.set=async(c,s)=>{this.isInitialized(),this.map.has(c)?await this.update(c,s):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:c,value:s}),this.map.set(c,s),await this.persist())},this.get=c=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:c}),this.getData(c)),this.getAll=c=>(this.isInitialized(),c?this.values.filter(s=>Object.keys(c).every(u=>Kn(s[u],c[u]))):this.values),this.update=async(c,s)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:c,update:s});const u=Ja(Ja({},this.getData(c)),s);this.map.set(c,u),await this.persist()},this.delete=async(c,s)=>{this.isInitialized(),this.map.has(c)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:c,reason:s}),this.map.delete(c),await this.persist())},this.logger=Oe.generateChildLogger(r,this.name),this.storagePrefix=i,this.getKey=o}get context(){return Oe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){const{message:n}=G("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=G("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=G("NOT_INITIALIZED",this.name);throw new Error(e)}}}class aw{constructor(e,r){this.core=e,this.logger=r,this.name=Mv,this.version=Uv,this.events=new Ot,this.initialized=!1,this.storagePrefix=er,this.ignoredPayloadTypes=[wr],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]},this.create=async()=>{this.isInitialized();const n=oo(),i=await this.core.crypto.setSymKey(n),o=Mt(te.FIVE_MINUTES),c={protocol:Ml},s={topic:i,expiry:o,relay:c,active:!1},u=V1({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:n,relay:c});return await this.pairings.set(i,s),await this.core.relayer.subscribe(i),this.core.expirer.set(i,o),{topic:i,uri:u}},this.pair=async n=>{this.isInitialized(),this.isValidPair(n);const{topic:i,symKey:o,relay:c}=H1(n.uri);if(this.pairings.keys.includes(i))throw new Error(`Pairing already exists: ${i}`);if(this.core.crypto.hasKeys(i))throw new Error(`Keychain already exists: ${i}`);const s=Mt(te.FIVE_MINUTES),u={topic:i,relay:c,expiry:s,active:!1};return await this.pairings.set(i,u),await this.core.crypto.setSymKey(o,i),await this.core.relayer.subscribe(i,{relay:c}),this.core.expirer.set(i,s),n.activatePairing&&await this.activate({topic:i}),u},this.activate=async({topic:n})=>{this.isInitialized();const i=Mt(te.THIRTY_DAYS);await this.pairings.update(n,{active:!0,expiry:i}),this.core.expirer.set(n,i)},this.ping=async n=>{this.isInitialized(),await this.isValidPing(n);const{topic:i}=n;if(this.pairings.keys.includes(i)){const o=await this.sendRequest(i,"wc_pairingPing",{}),{done:c,resolve:s,reject:u}=hr();this.events.once(Be("pairing_ping",o),({error:h})=>{h?u(h):s()}),await c()}},this.updateExpiry=async({topic:n,expiry:i})=>{this.isInitialized(),await this.pairings.update(n,{expiry:i})},this.updateMetadata=async({topic:n,metadata:i})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:i})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:i}=n;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",Ve("USER_DISCONNECTED")),await this.deletePairing(i))},this.sendRequest=async(n,i,o)=>{const c=li(i,o),s=await this.core.crypto.encode(n,c),u=Yr[i].req;return this.core.history.set(n,c),await this.core.relayer.publish(n,s,u),c.id},this.sendResult=async(n,i,o)=>{const c=Ho(n,o),s=await this.core.crypto.encode(i,c),u=await this.core.history.get(i,n),h=Yr[u.request.method].res;await this.core.relayer.publish(i,s,h),await this.core.history.resolve(c)},this.sendError=async(n,i,o)=>{const c=Ko(n,o),s=await this.core.crypto.encode(i,c),u=await this.core.history.get(i,n),h=Yr[u.request.method]?Yr[u.request.method].res:Yr.unregistered_method.res;await this.core.relayer.publish(i,s,h),await this.core.history.resolve(c)},this.deletePairing=async(n,i)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,Ve("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),i?Promise.resolve():this.core.expirer.del(n)])},this.cleanup=async()=>{const n=this.pairings.getAll().filter(i=>Xt(i.expiry));await Promise.all(n.map(i=>this.deletePairing(i.topic)))},this.onRelayEventRequest=n=>{const{topic:i,payload:o}=n,c=o.method;if(this.pairings.keys.includes(i))switch(c){case"wc_pairingPing":return this.onPairingPingRequest(i,o);case"wc_pairingDelete":return this.onPairingDeleteRequest(i,o);default:return this.onUnknownRpcMethodRequest(i,o)}},this.onRelayEventResponse=async n=>{const{topic:i,payload:o}=n,c=(await this.core.history.get(i,o.id)).request.method;if(this.pairings.keys.includes(i))switch(c){case"wc_pairingPing":return this.onPairingPingResponse(i,o);default:return this.onUnknownRpcMethodResponse(c)}},this.onPairingPingRequest=async(n,i)=>{const{id:o}=i;try{this.isValidPing({topic:n}),await this.sendResult(o,n,!0),this.events.emit("pairing_ping",{id:o,topic:n})}catch(c){await this.sendError(o,n,c),this.logger.error(c)}},this.onPairingPingResponse=(n,i)=>{const{id:o}=i;setTimeout(()=>{qt(i)?this.events.emit(Be("pairing_ping",o),{}):At(i)&&this.events.emit(Be("pairing_ping",o),{error:i.error})},500)},this.onPairingDeleteRequest=async(n,i)=>{const{id:o}=i;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit("pairing_delete",{id:o,topic:n})}catch(c){await this.sendError(o,n,c),this.logger.error(c)}},this.onUnknownRpcMethodRequest=async(n,i)=>{const{id:o,method:c}=i;try{if(this.registeredMethods.includes(c))return;const s=Ve("WC_METHOD_UNSUPPORTED",c);await this.sendError(o,n,s),this.logger.error(s)}catch(s){await this.sendError(o,n,s),this.logger.error(s)}},this.onUnknownRpcMethodResponse=n=>{this.registeredMethods.includes(n)||this.logger.error(Ve("WC_METHOD_UNSUPPORTED",n))},this.isValidPair=n=>{if(!dt(n)){const{message:i}=G("MISSING_OR_INVALID",`pair() params: ${n}`);throw new Error(i)}if(!ty(n.uri)){const{message:i}=G("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw new Error(i)}},this.isValidPing=async n=>{if(!dt(n)){const{message:o}=G("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(o)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidDisconnect=async n=>{if(!dt(n)){const{message:o}=G("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(o)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidPairingTopic=async n=>{if(!rt(n,!1)){const{message:i}=G("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(i)}if(!this.pairings.keys.includes(n)){const{message:i}=G("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(i)}if(Xt(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:i}=G("EXPIRED",`pairing topic: ${n}`);throw new Error(i)}},this.core=e,this.logger=Oe.generateChildLogger(r,this.name),this.pairings=new hi(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Oe.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=G("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(tt.message,async e=>{const{topic:r,message:n}=e;if(this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))return;const i=await this.core.crypto.decode(r,n);Vo(i)?(this.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):Wo(i)&&(await this.core.history.resolve(i),this.onRelayEventResponse({topic:r,payload:i}))})}registerExpirerEvents(){this.core.expirer.on(Ct.expired,async e=>{const{topic:r}=ml(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit("pairing_expire",{topic:r}))})}}class cw extends Tp{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.records=new Map,this.events=new Ot.EventEmitter,this.name=$v,this.version=Bv,this.cached=[],this.initialized=!1,this.storagePrefix=er,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(n,i,o)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:i,chainId:o}),this.records.has(i.id))return;const c={id:i.id,topic:n,request:{method:i.method,params:i.params||null},chainId:o};this.records.set(c.id,c),this.events.emit(Lt.created,c)},this.resolve=async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const i=await this.getRecord(n.id);typeof i.response>"u"&&(i.response=At(n)?{error:n.error}:{result:n.result},this.records.set(i.id,i),this.events.emit(Lt.updated,i))},this.get=async(n,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:i}),await this.getRecord(i)),this.delete=(n,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(o=>{if(o.topic===n){if(typeof i<"u"&&o.id!==i)return;this.records.delete(o.id),this.events.emit(Lt.deleted,o)}})},this.exists=async(n,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===n:!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=Oe.generateChildLogger(r,this.name)}get context(){return Oe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:li(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:n}=G("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Lt.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=G("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Lt.created,e=>{const r=Lt.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(Lt.updated,e=>{const r=Lt.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(Lt.deleted,e=>{const r=Lt.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=G("NOT_INITIALIZED",this.name);throw new Error(e)}}}class uw extends Lp{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.expirations=new Map,this.events=new Ot.EventEmitter,this.name=kv,this.version=zv,this.cached=[],this.initialized=!1,this.storagePrefix=er,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=n=>{try{const i=this.formatTarget(n);return typeof this.getExpiration(i)<"u"}catch{return!1}},this.set=(n,i)=>{this.isInitialized();const o=this.formatTarget(n),c={target:o,expiry:i};this.expirations.set(o,c),this.checkExpiry(o,c),this.events.emit(Ct.created,{target:o,expiration:c})},this.get=n=>{this.isInitialized();const i=this.formatTarget(n);return this.getExpiration(i)},this.del=n=>{if(this.isInitialized(),this.has(n)){const i=this.formatTarget(n),o=this.getExpiration(i);this.expirations.delete(i),this.events.emit(Ct.deleted,{target:i,expiration:o})}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=Oe.generateChildLogger(r,this.name)}get context(){return Oe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return M1(e);if(typeof e=="number")return U1(e);const{message:r}=G("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Ct.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=G("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:n}=G("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}checkExpiry(e,r){const{expiry:n}=r;te.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(Ct.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(pn.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Ct.created,e=>{const r=Ct.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Ct.expired,e=>{const r=Ct.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Ct.deleted,e=>{const r=Ct.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=G("NOT_INITIALIZED",this.name);throw new Error(e)}}}var lw=Object.defineProperty,Xa=Object.getOwnPropertySymbols,fw=Object.prototype.hasOwnProperty,hw=Object.prototype.propertyIsEnumerable,Qa=(t,e,r)=>e in t?lw(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Za=(t,e)=>{for(var r in e||(e={}))fw.call(e,r)&&Qa(t,r,e[r]);if(Xa)for(var r of Xa(e))hw.call(e,r)&&Qa(t,r,e[r]);return t};let dw=class $l extends Op{constructor(e){super(e),this.protocol=Fl,this.version=yv,this.name=Go,this.events=new Ot.EventEmitter,this.initialized=!1,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||Ul;const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:ei(Oe.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||mv.logger}));this.logger=Oe.generateChildLogger(r,this.name),this.heartbeat=new pn.HeartBeat,this.crypto=new qv(this,this.logger,e==null?void 0:e.keychain),this.history=new cw(this,this.logger),this.expirer=new uw(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new hp(Za(Za({},vv),e==null?void 0:e.storageOptions)),this.relayer=new nw({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new aw(this,this.logger)}static async init(e){const r=new $l(e);return await r.initialize(),r}get context(){return Oe.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}};const gw=dw,Bl="wc",kl=2,zl="client",Yo=`${Bl}@${kl}:${zl}:`,Li={name:zl,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},pw="proposal",_w="Proposal expired",yw="session",Nn=te.SEVEN_DAYS,mw="engine",Xr={wc_sessionPropose:{req:{ttl:te.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:te.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:te.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:te.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:te.ONE_DAY,prompt:!1,tag:1104},res:{ttl:te.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:te.ONE_DAY,prompt:!1,tag:1106},res:{ttl:te.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:te.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:te.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:te.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:te.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:te.ONE_DAY,prompt:!1,tag:1112},res:{ttl:te.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:te.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:te.THIRTY_SECONDS,prompt:!1,tag:1115}}},Fi={min:te.FIVE_MINUTES,max:te.SEVEN_DAYS},vw="request";var ww=Object.defineProperty,bw=Object.defineProperties,Ew=Object.getOwnPropertyDescriptors,ec=Object.getOwnPropertySymbols,Dw=Object.prototype.hasOwnProperty,Sw=Object.prototype.propertyIsEnumerable,tc=(t,e,r)=>e in t?ww(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,xt=(t,e)=>{for(var r in e||(e={}))Dw.call(e,r)&&tc(t,r,e[r]);if(ec)for(var r of ec(e))Sw.call(e,r)&&tc(t,r,e[r]);return t},Mi=(t,e)=>bw(t,Ew(e));class xw extends Mp{constructor(e){super(e),this.name=mw,this.events=new Ot,this.initialized=!1,this.ignoredPayloadTypes=[wr],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(Xr)}),this.initialized=!0)},this.connect=async r=>{this.isInitialized();const n=Mi(xt({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:i,requiredNamespaces:o,optionalNamespaces:c,sessionProperties:s,relays:u}=n;let h=i,f,_=!1;if(h&&(_=this.client.core.pairing.pairings.get(h).active),!h||!_){const{topic:w,uri:d}=await this.client.core.pairing.create();h=w,f=d}const O=await this.client.core.crypto.generateKeyPair(),v=xt({requiredNamespaces:o,optionalNamespaces:c,relays:u??[{protocol:Ml}],proposer:{publicKey:O,metadata:this.client.metadata}},s&&{sessionProperties:s}),{reject:m,resolve:I,done:x}=hr(te.FIVE_MINUTES,_w);if(this.events.once(Be("session_connect"),async({error:w,session:d})=>{if(w)m(w);else if(d){d.self.publicKey=O;const b=Mi(xt({},d),{requiredNamespaces:d.requiredNamespaces,optionalNamespaces:d.optionalNamespaces});await this.client.session.set(d.topic,b),await this.setExpiry(d.topic,d.expiry),h&&await this.client.core.pairing.updateMetadata({topic:h,metadata:d.peer.metadata}),I(b)}}),!h){const{message:w}=G("NO_MATCHING_KEY",`connect() pairing topic: ${h}`);throw new Error(w)}const R=await this.sendRequest(h,"wc_sessionPropose",v),p=Mt(te.FIVE_MINUTES);return await this.setProposal(R,xt({id:R,expiry:p},v)),{uri:f,approval:x}},this.pair=async r=>(this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{this.isInitialized(),await this.isValidApprove(r);const{id:n,relayProtocol:i,namespaces:o,sessionProperties:c}=r,s=this.client.proposal.get(n);let{pairingTopic:u,proposer:h,requiredNamespaces:f,optionalNamespaces:_}=s;rn(f)||(f=J1(o,"approve()"));const O=await this.client.core.crypto.generateKeyPair(),v=h.publicKey,m=await this.client.core.crypto.generateSharedKey(O,v);u&&n&&(await this.client.core.pairing.updateMetadata({topic:u,metadata:h.metadata}),await this.sendResult(n,u,{relay:{protocol:i??"irn"},responderPublicKey:O}),await this.client.proposal.delete(n,Ve("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:u}));const I=xt({relay:{protocol:i??"irn"},namespaces:o,requiredNamespaces:f,optionalNamespaces:_,controller:{publicKey:O,metadata:this.client.metadata},expiry:Mt(Nn)},c&&{sessionProperties:c});await this.client.core.relayer.subscribe(m);const x=await this.sendRequest(m,"wc_sessionSettle",I),{done:R,resolve:p,reject:w}=hr();this.events.once(Be("session_approve",x),({error:b})=>{b?w(b):p(this.client.session.get(m))});const d=Mi(xt({},I),{topic:m,acknowledged:!1,self:I.controller,peer:{publicKey:h.publicKey,metadata:h.metadata},controller:O});return await this.client.session.set(m,d),await this.setExpiry(m,Mt(Nn)),{topic:m,acknowledged:R}},this.reject=async r=>{this.isInitialized(),await this.isValidReject(r);const{id:n,reason:i}=r,{pairingTopic:o}=this.client.proposal.get(n);o&&(await this.sendError(n,o,i),await this.client.proposal.delete(n,Ve("USER_DISCONNECTED")))},this.update=async r=>{this.isInitialized(),await this.isValidUpdate(r);const{topic:n,namespaces:i}=r,o=await this.sendRequest(n,"wc_sessionUpdate",{namespaces:i}),{done:c,resolve:s,reject:u}=hr();return this.events.once(Be("session_update",o),({error:h})=>{h?u(h):s()}),await this.client.session.update(n,{namespaces:i}),{acknowledged:c}},this.extend=async r=>{this.isInitialized(),await this.isValidExtend(r);const{topic:n}=r,i=await this.sendRequest(n,"wc_sessionExtend",{}),{done:o,resolve:c,reject:s}=hr();return this.events.once(Be("session_extend",i),({error:u})=>{u?s(u):c()}),await this.setExpiry(n,Mt(Nn)),{acknowledged:o}},this.request=async r=>{this.isInitialized(),await this.isValidRequest(r);const{chainId:n,request:i,topic:o,expiry:c}=r,s=await this.sendRequest(o,"wc_sessionRequest",{request:i,chainId:n},c),{done:u,resolve:h,reject:f}=hr(c);return this.events.once(Be("session_request",s),({error:_,result:O})=>{_?f(_):h(O)}),this.client.events.emit("session_request_sent",{topic:o,request:i,chainId:n}),await u()},this.respond=async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:n,response:i}=r,{id:o}=i;qt(i)?await this.sendResult(o,n,i.result):At(i)&&await this.sendError(o,n,i.error),this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0})},this.ping=async r=>{this.isInitialized(),await this.isValidPing(r);const{topic:n}=r;if(this.client.session.keys.includes(n)){const i=await this.sendRequest(n,"wc_sessionPing",{}),{done:o,resolve:c,reject:s}=hr();this.events.once(Be("session_ping",i),({error:u})=>{u?s(u):c()}),await o()}else this.client.core.pairing.pairings.keys.includes(n)&&await this.client.core.pairing.ping({topic:n})},this.emit=async r=>{this.isInitialized(),await this.isValidEmit(r);const{topic:n,event:i,chainId:o}=r;await this.sendRequest(n,"wc_sessionEvent",{event:i,chainId:o})},this.disconnect=async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:n}=r;this.client.session.keys.includes(n)?(await this.sendRequest(n,"wc_sessionDelete",Ve("USER_DISCONNECTED")),await this.deleteSession(n)):await this.client.core.pairing.disconnect({topic:n})},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(n=>Z1(n,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.deleteSession=async(r,n)=>{const{self:i}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),await Promise.all([this.client.session.delete(r,Ve("USER_DISCONNECTED")),this.client.core.crypto.deleteKeyPair(i.publicKey),this.client.core.crypto.deleteSymKey(r),n?Promise.resolve():this.client.core.expirer.del(r)])},this.deleteProposal=async(r,n)=>{await Promise.all([this.client.proposal.delete(r,Ve("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,n,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)])},this.setExpiry=async(r,n)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:n}),this.client.core.expirer.set(r,n)},this.setProposal=async(r,n)=>{await this.client.proposal.set(r,n),this.client.core.expirer.set(r,n.expiry)},this.setPendingSessionRequest=async r=>{const n=Xr.wc_sessionRequest.req.ttl,{id:i,topic:o,params:c}=r;await this.client.pendingRequest.set(i,{id:i,topic:o,params:c}),n&&this.client.core.expirer.set(i,Mt(n))},this.sendRequest=async(r,n,i,o)=>{const c=li(n,i),s=await this.client.core.crypto.encode(r,c),u=Xr[n].req;return o&&(u.ttl=o),this.client.core.history.set(r,c),this.client.core.relayer.publish(r,s,u),c.id},this.sendResult=async(r,n,i)=>{const o=Ho(r,i),c=await this.client.core.crypto.encode(n,o),s=await this.client.core.history.get(n,r),u=Xr[s.request.method].res;this.client.core.relayer.publish(n,c,u),await this.client.core.history.resolve(o)},this.sendError=async(r,n,i)=>{const o=Ko(r,i),c=await this.client.core.crypto.encode(n,o),s=await this.client.core.history.get(n,r),u=Xr[s.request.method].res;this.client.core.relayer.publish(n,c,u),await this.client.core.history.resolve(o)},this.cleanup=async()=>{const r=[],n=[];this.client.session.getAll().forEach(i=>{Xt(i.expiry)&&r.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{Xt(i.expiry)&&n.push(i.id)}),await Promise.all([...r.map(i=>this.deleteSession(i)),...n.map(i=>this.deleteProposal(i))])},this.onRelayEventRequest=r=>{const{topic:n,payload:i}=r,o=i.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeRequest(n,i);case"wc_sessionSettle":return this.onSessionSettleRequest(n,i);case"wc_sessionUpdate":return this.onSessionUpdateRequest(n,i);case"wc_sessionExtend":return this.onSessionExtendRequest(n,i);case"wc_sessionPing":return this.onSessionPingRequest(n,i);case"wc_sessionDelete":return this.onSessionDeleteRequest(n,i);case"wc_sessionRequest":return this.onSessionRequest(n,i);case"wc_sessionEvent":return this.onSessionEventRequest(n,i);default:return this.client.logger.info(`Unsupported request method ${o}`)}},this.onRelayEventResponse=async r=>{const{topic:n,payload:i}=r,o=(await this.client.core.history.get(n,i.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(n,i);case"wc_sessionSettle":return this.onSessionSettleResponse(n,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,i);case"wc_sessionExtend":return this.onSessionExtendResponse(n,i);case"wc_sessionPing":return this.onSessionPingResponse(n,i);case"wc_sessionRequest":return this.onSessionRequestResponse(n,i);default:return this.client.logger.info(`Unsupported response method ${o}`)}},this.onSessionProposeRequest=async(r,n)=>{const{params:i,id:o}=n;try{this.isValidConnect(xt({},n.params));const c=Mt(te.FIVE_MINUTES),s=xt({id:o,pairingTopic:r,expiry:c},i);await this.setProposal(o,s),this.client.events.emit("session_proposal",{id:o,params:s})}catch(c){await this.sendError(o,r,c),this.client.logger.error(c)}},this.onSessionProposeResponse=async(r,n)=>{const{id:i}=n;if(qt(n)){const{result:o}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const c=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:c});const s=c.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:s});const u=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:u});const h=await this.client.core.crypto.generateSharedKey(s,u);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:h});const f=await this.client.core.relayer.subscribe(h);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:f}),await this.client.core.pairing.activate({topic:r})}else At(n)&&(await this.client.proposal.delete(i,Ve("USER_DISCONNECTED")),this.events.emit(Be("session_connect"),{error:n.error}))},this.onSessionSettleRequest=async(r,n)=>{const{id:i,params:o}=n;try{this.isValidSessionSettleRequest(o);const{relay:c,controller:s,expiry:u,namespaces:h,requiredNamespaces:f,optionalNamespaces:_,sessionProperties:O}=n.params,v=xt({topic:r,relay:c,expiry:u,namespaces:h,acknowledged:!0,requiredNamespaces:f,optionalNamespaces:_,controller:s.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:s.publicKey,metadata:s.metadata}},O&&{sessionProperties:O});await this.sendResult(n.id,r,!0),this.events.emit(Be("session_connect"),{session:v})}catch(c){await this.sendError(i,r,c),this.client.logger.error(c)}},this.onSessionSettleResponse=async(r,n)=>{const{id:i}=n;qt(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(Be("session_approve",i),{})):At(n)&&(await this.client.session.delete(r,Ve("USER_DISCONNECTED")),this.events.emit(Be("session_approve",i),{error:n.error}))},this.onSessionUpdateRequest=async(r,n)=>{const{params:i,id:o}=n;try{this.isValidUpdate(xt({topic:r},i)),await this.client.session.update(r,{namespaces:i.namespaces}),await this.sendResult(o,r,!0),this.client.events.emit("session_update",{id:o,topic:r,params:i})}catch(c){await this.sendError(o,r,c),this.client.logger.error(c)}},this.onSessionUpdateResponse=(r,n)=>{const{id:i}=n;qt(n)?this.events.emit(Be("session_update",i),{}):At(n)&&this.events.emit(Be("session_update",i),{error:n.error})},this.onSessionExtendRequest=async(r,n)=>{const{id:i}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,Mt(Nn)),await this.sendResult(i,r,!0),this.client.events.emit("session_extend",{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.onSessionExtendResponse=(r,n)=>{const{id:i}=n;qt(n)?this.events.emit(Be("session_extend",i),{}):At(n)&&this.events.emit(Be("session_extend",i),{error:n.error})},this.onSessionPingRequest=async(r,n)=>{const{id:i}=n;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.client.events.emit("session_ping",{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.onSessionPingResponse=(r,n)=>{const{id:i}=n;setTimeout(()=>{qt(n)?this.events.emit(Be("session_ping",i),{}):At(n)&&this.events.emit(Be("session_ping",i),{error:n.error})},500)},this.onSessionDeleteRequest=async(r,n)=>{const{id:i}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),this.client.core.relayer.once(tt.publish,async()=>{await this.deleteSession(r)}),await this.sendResult(i,r,!0),this.client.events.emit("session_delete",{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.onSessionRequest=async(r,n)=>{const{id:i,params:o}=n;try{this.isValidRequest(xt({topic:r},o)),await this.setPendingSessionRequest({id:i,topic:r,params:o}),this.client.events.emit("session_request",{id:i,topic:r,params:o})}catch(c){await this.sendError(i,r,c),this.client.logger.error(c)}},this.onSessionRequestResponse=(r,n)=>{const{id:i}=n;qt(n)?this.events.emit(Be("session_request",i),{result:n.result}):At(n)&&this.events.emit(Be("session_request",i),{error:n.error})},this.onSessionEventRequest=async(r,n)=>{const{id:i,params:o}=n;try{this.isValidEmit(xt({topic:r},o)),this.client.events.emit("session_event",{id:i,topic:r,params:o})}catch(c){await this.sendError(i,r,c),this.client.logger.error(c)}},this.isValidConnect=async r=>{if(!dt(r)){const{message:u}=G("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(u)}const{pairingTopic:n,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:c,relays:s}=r;if(ht(n)||await this.isValidPairingTopic(n),!fy(s,!0)){const{message:u}=G("MISSING_OR_INVALID",`connect() relays: ${s}`);throw new Error(u)}!ht(i)&&rn(i)!==0&&this.validateNamespaces(i,"requiredNamespaces"),!ht(o)&&rn(o)!==0&&this.validateNamespaces(o,"optionalNamespaces"),ht(c)||this.validateSessionProps(c,"sessionProperties")},this.validateNamespaces=(r,n)=>{const i=ly(r,"connect()",n);if(i)throw new Error(i.message)},this.isValidApprove=async r=>{if(!dt(r))throw new Error(G("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:i,relayProtocol:o,sessionProperties:c}=r;await this.isValidProposalId(n);const s=this.client.proposal.get(n),u=Ln(i,"approve()");if(u)throw new Error(u.message);const h=Ia(s.requiredNamespaces,i,"approve()");if(h)throw new Error(h.message);if(!rt(o,!0)){const{message:f}=G("MISSING_OR_INVALID",`approve() relayProtocol: ${o}`);throw new Error(f)}ht(c)||this.validateSessionProps(c,"sessionProperties")},this.isValidReject=async r=>{if(!dt(r)){const{message:o}=G("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(o)}const{id:n,reason:i}=r;if(await this.isValidProposalId(n),!dy(i)){const{message:o}=G("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(o)}},this.isValidSessionSettleRequest=r=>{if(!dt(r)){const{message:h}=G("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(h)}const{relay:n,controller:i,namespaces:o,expiry:c}=r;if(!wl(n)){const{message:h}=G("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(h)}const s=iy(i,"onSessionSettleRequest()");if(s)throw new Error(s.message);const u=Ln(o,"onSessionSettleRequest()");if(u)throw new Error(u.message);if(Xt(c)){const{message:h}=G("EXPIRED","onSessionSettleRequest()");throw new Error(h)}},this.isValidUpdate=async r=>{if(!dt(r)){const{message:u}=G("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(u)}const{topic:n,namespaces:i}=r;await this.isValidSessionTopic(n);const o=this.client.session.get(n),c=Ln(i,"update()");if(c)throw new Error(c.message);const s=Ia(o.requiredNamespaces,i,"update()");if(s)throw new Error(s.message)},this.isValidExtend=async r=>{if(!dt(r)){const{message:i}=G("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionTopic(n)},this.isValidRequest=async r=>{if(!dt(r)){const{message:u}=G("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(u)}const{topic:n,request:i,chainId:o,expiry:c}=r;await this.isValidSessionTopic(n);const{namespaces:s}=this.client.session.get(n);if(!Ta(s,o)){const{message:u}=G("MISSING_OR_INVALID",`request() chainId: ${o}`);throw new Error(u)}if(!gy(i)){const{message:u}=G("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(u)}if(!yy(s,o,i.method)){const{message:u}=G("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(u)}if(c&&!by(c,Fi)){const{message:u}=G("MISSING_OR_INVALID",`request() expiry: ${c}. Expiry must be a number (in seconds) between ${Fi.min} and ${Fi.max}`);throw new Error(u)}},this.isValidRespond=async r=>{if(!dt(r)){const{message:o}=G("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(o)}const{topic:n,response:i}=r;if(await this.isValidSessionTopic(n),!py(i)){const{message:o}=G("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}},this.isValidPing=async r=>{if(!dt(r)){const{message:i}=G("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.isValidEmit=async r=>{if(!dt(r)){const{message:s}=G("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(s)}const{topic:n,event:i,chainId:o}=r;await this.isValidSessionTopic(n);const{namespaces:c}=this.client.session.get(n);if(!Ta(c,o)){const{message:s}=G("MISSING_OR_INVALID",`emit() chainId: ${o}`);throw new Error(s)}if(!_y(i)){const{message:s}=G("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(s)}if(!my(c,o,i.name)){const{message:s}=G("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(s)}},this.isValidDisconnect=async r=>{if(!dt(r)){const{message:i}=G("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.validateSessionProps=(r,n)=>{Object.values(r).forEach(i=>{if(!rt(i,!1)){const{message:o}=G("MISSING_OR_INVALID",`${n} must be in Record<string, string> format. Received: ${JSON.stringify(i)}`);throw new Error(o)}})}}isInitialized(){if(!this.initialized){const{message:e}=G("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.client.core.relayer.on(tt.message,async e=>{const{topic:r,message:n}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(n)))return;const i=await this.client.core.crypto.decode(r,n);Vo(i)?(this.client.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):Wo(i)&&(await this.client.core.history.resolve(i),this.onRelayEventResponse({topic:r,payload:i}))})}registerExpirerEvents(){this.client.core.expirer.on(Ct.expired,async e=>{const{topic:r,id:n}=ml(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,G("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}isValidPairingTopic(e){if(!rt(e,!1)){const{message:r}=G("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=G("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(Xt(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=G("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!rt(e,!1)){const{message:r}=G("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(!this.client.session.keys.includes(e)){const{message:r}=G("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(Xt(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:r}=G("EXPIRED",`session topic: ${e}`);throw new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(rt(e,!1)){const{message:r}=G("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=G("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!hy(e)){const{message:r}=G("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=G("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(Xt(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:r}=G("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class Cw extends hi{constructor(e,r){super(e,r,pw,Yo),this.core=e,this.logger=r}}class Ow extends hi{constructor(e,r){super(e,r,yw,Yo),this.core=e,this.logger=r}}class Tw extends hi{constructor(e,r){super(e,r,vw,Yo),this.core=e,this.logger=r}}class Jo extends Fp{constructor(e){super(e),this.protocol=Bl,this.version=kl,this.name=Li.name,this.events=new Ot.EventEmitter,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.removeAllListeners=n=>this.events.removeAllListeners(n),this.connect=async n=>{try{return await this.engine.connect(n)}catch(i){throw this.logger.error(i.message),i}},this.pair=async n=>{try{return await this.engine.pair(n)}catch(i){throw this.logger.error(i.message),i}},this.approve=async n=>{try{return await this.engine.approve(n)}catch(i){throw this.logger.error(i.message),i}},this.reject=async n=>{try{return await this.engine.reject(n)}catch(i){throw this.logger.error(i.message),i}},this.update=async n=>{try{return await this.engine.update(n)}catch(i){throw this.logger.error(i.message),i}},this.extend=async n=>{try{return await this.engine.extend(n)}catch(i){throw this.logger.error(i.message),i}},this.request=async n=>{try{return await this.engine.request(n)}catch(i){throw this.logger.error(i.message),i}},this.respond=async n=>{try{return await this.engine.respond(n)}catch(i){throw this.logger.error(i.message),i}},this.ping=async n=>{try{return await this.engine.ping(n)}catch(i){throw this.logger.error(i.message),i}},this.emit=async n=>{try{return await this.engine.emit(n)}catch(i){throw this.logger.error(i.message),i}},this.disconnect=async n=>{try{return await this.engine.disconnect(n)}catch(i){throw this.logger.error(i.message),i}},this.find=n=>{try{return this.engine.find(n)}catch(i){throw this.logger.error(i.message),i}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}},this.name=(e==null?void 0:e.name)||Li.name,this.metadata=(e==null?void 0:e.metadata)||N1();const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:ei(Oe.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||Li.logger}));this.core=(e==null?void 0:e.core)||new gw(e),this.logger=Oe.generateChildLogger(r,this.name),this.session=new Ow(this.core,this.logger),this.proposal=new Cw(this.core,this.logger),this.pendingRequest=new Tw(this.core,this.logger),this.engine=new xw(this)}static async init(e){const r=new Jo(e);return await r.initialize(),r}get context(){return Oe.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}function Iw(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var i=t.charAt(n),o=i.charCodeAt(0);if(e[o]!==255)throw new TypeError(i+" is ambiguous");e[o]=n}var c=t.length,s=t.charAt(0),u=Math.log(c)/Math.log(256),h=Math.log(256)/Math.log(c);function f(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var m=0,I=0,x=0,R=v.length;x!==R&&v[x]===0;)x++,m++;for(var p=(R-x)*h+1>>>0,w=new Uint8Array(p);x!==R;){for(var d=v[x],b=0,E=p-1;(d!==0||b<I)&&E!==-1;E--,b++)d+=256*w[E]>>>0,w[E]=d%c>>>0,d=d/c>>>0;if(d!==0)throw new Error("Non-zero carry");I=b,x++}for(var a=p-I;a!==p&&w[a]===0;)a++;for(var g=s.repeat(m);a<p;++a)g+=t.charAt(w[a]);return g}function _(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;for(var m=0,I=0,x=0;v[m]===s;)I++,m++;for(var R=(v.length-m)*u+1>>>0,p=new Uint8Array(R);v[m];){var w=e[v.charCodeAt(m)];if(w===255)return;for(var d=0,b=R-1;(w!==0||d<x)&&b!==-1;b--,d++)w+=c*p[b]>>>0,p[b]=w%256>>>0,w=w/256>>>0;if(w!==0)throw new Error("Non-zero carry");x=d,m++}for(var E=R-x;E!==R&&p[E]===0;)E++;for(var a=new Uint8Array(I+(R-E)),g=I;E!==R;)a[g++]=p[E++];return a}function O(v){var m=_(v);if(m)return m;throw new Error("Non-base"+c+" character")}return{encode:f,decodeUnsafe:_,decode:O}}var Aw=Iw;const Nw=Aw,Rw="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var Pw=Nw(Rw);const Ui=Pw;class dr extends Error{constructor(){super(),Object.setPrototypeOf(this,dr.prototype)}}class Xo extends Error{constructor(){super(),Object.setPrototypeOf(this,Xo.prototype)}}var rc;(function(t){t.Mainnet="solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ",t.Devnet="solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"})(rc||(rc={}));var Pr;(function(t){t.signTransaction="solana_signTransaction",t.signMessage="solana_signMessage"})(Pr||(Pr={}));const nc=t=>({requiredNamespaces:{solana:{chains:[t],methods:[Pr.signTransaction,Pr.signMessage],events:[]}}});class jw{constructor(e){this._options=e.options,this._network=e.network}async connect(){const e=this._client??await Jo.init(this._options),r=e.find(nc(this._network)).filter(n=>n.acknowledged);if(r.length)return this._session=r[r.length-1],this._client=e,{publicKey:this.publicKey};{const{uri:n,approval:i}=await e.connect(nc(this._network));return new Promise((o,c)=>{n&&Us.open(n,()=>{c(new Xo)}),i().then(s=>{this._session=s,this._client=e,o({publicKey:this.publicKey})}).catch(c).finally(()=>{Us.close()})})}}async disconnect(){if(this._client&&this._session)await this._client.disconnect({topic:this._session.topic,reason:Ve("USER_DISCONNECTED")}),this._session=void 0;else throw new dr}get client(){if(this._client)return Object.assign({},this._client,{off:this._client.removeListener});throw new dr}get publicKey(){if(this._client&&this._session){const{address:e}=h1(this._session.namespaces.solana.accounts[0]);return new Nf(e)}else throw new dr}async signTransaction(e){if(this._client&&this._session){const{signature:r}=await this._client.request({chainId:this._network,topic:this._session.topic,request:{method:Pr.signTransaction,params:{...e}}});return e.addSignature(this.publicKey,ic.Buffer.from(Ui.decode(r))),e}else throw new dr}async signMessage(e){if(this._client&&this._session){const{signature:r}=await this._client.request({chainId:this._network,topic:this._session.topic,request:{method:Pr.signMessage,params:{pubkey:this.publicKey.toString(),message:Ui.encode(e)}}});return Ui.decode(r)}else throw new dr}}export{dr as ClientNotInitializedError,Xo as QRCodeModalError,rc as WalletConnectChainID,Jo as WalletConnectClient,Pr as WalletConnectRPCMethods,jw as WalletConnectWallet};
